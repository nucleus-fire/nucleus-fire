#![allow(unused_imports)]
        use axum::{response::{Html, IntoResponse}, routing::get, extract::{Query, Form}, Router};
        use tower_http::services::ServeDir;
        use tower_http::compression::CompressionLayer;
        use tokio::net::TcpListener;
        use serde::{Serialize, Deserialize};
        
        // --- Static Assets (Zero-Allocation) ---
        #[allow(non_snake_case, unreachable_code, unused_variables)]
async fn handle_index(headers: axum::http::HeaderMap, Query(params): Query<std::collections::HashMap<String, String>>) -> impl axum::response::IntoResponse {
    let mut html_body = String::new();
html_body.push_str("<!DOCTYPE html>");
html_body.push_str("<html");
html_body.push_str(" lang=\"en\"");
html_body.push_str(">");
html_body.push_str("<head");
html_body.push_str(">");
html_body.push_str("<meta");
html_body.push_str(" charset=\"UTF-8\"");
html_body.push_str(">");
html_body.push_str("</meta>");
html_body.push_str("<meta");
html_body.push_str(" name=\"viewport\"");
html_body.push_str(" content=\"width=device-width, initial-scale=1.0\"");
html_body.push_str(">");
html_body.push_str("</meta>");
html_body.push_str("<title");
html_body.push_str(">");
html_body.push_str("Nucleus | The Hyper-Optimized Framework");
html_body.push_str("</title>");
html_body.push_str("<meta");
html_body.push_str(" name=\"description\"");
html_body.push_str(" content=\"Build high-performance full-stack apps with Rust. Zero-compromise speed, developer experience, and safety.\"");
html_body.push_str(">");
html_body.push_str("</meta>");
html_body.push_str("<!-- DNS Prefetch & Preconnect for External Resources -->");
html_body.push_str("<link");
html_body.push_str(" rel=\"dns-prefetch\"");
html_body.push_str(" href=\"//fonts.googleapis.com\"");
html_body.push_str(">");
html_body.push_str("</link>");
html_body.push_str("<link");
html_body.push_str(" rel=\"dns-prefetch\"");
html_body.push_str(" href=\"//fonts.gstatic.com\"");
html_body.push_str(">");
html_body.push_str("</link>");
html_body.push_str("<link");
html_body.push_str(" rel=\"preconnect\"");
html_body.push_str(" href=\"https://fonts.googleapis.com\"");
html_body.push_str(">");
html_body.push_str("</link>");
html_body.push_str("<link");
html_body.push_str(" rel=\"preconnect\"");
html_body.push_str(" href=\"https://fonts.gstatic.com\"");
html_body.push_str(" crossorigin=\"true\"");
html_body.push_str(">");
html_body.push_str("</link>");
html_body.push_str("<!-- Favicon -->");
html_body.push_str("<link");
html_body.push_str(" rel=\"icon\"");
html_body.push_str(" href=\"data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>‚ö°</text></svg>\"");
html_body.push_str(">");
html_body.push_str("</link>");
html_body.push_str("<!-- Critical CSS (inlined for render performance) -->");
html_body.push_str("<style");
html_body.push_str(" critical=\"true\"");
html_body.push_str(">");
html_body.push_str("\n        /* Critical above-the-fold styles */\n        body { margin: 0; background: #000; color: #ededed; font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif; }\n        .nav { position: fixed; top: 0; left: 0; right: 0; z-index: 100; padding: 16px 0; background: rgba(0,0,0,0.8); backdrop-filter: blur(20px); }\n    ");
html_body.push_str("</style>");
html_body.push_str("<!-- Main Stylesheet (non-blocking with media swap) -->");
html_body.push_str("<link");
html_body.push_str(" href=\"/assets/output.css\"");
html_body.push_str(" rel=\"stylesheet\"");
html_body.push_str(">");
html_body.push_str("</link>");
html_body.push_str("<!-- Accessibility Styles (WCAG 2.1 AA) -->");
html_body.push_str("<link");
html_body.push_str(" href=\"/assets/accessibility.css\"");
html_body.push_str(" rel=\"stylesheet\"");
html_body.push_str(">");
html_body.push_str("</link>");
html_body.push_str("<!-- Highlight.js for syntax highlighting (Local) -->");
html_body.push_str("<link");
html_body.push_str(" rel=\"stylesheet\"");
html_body.push_str(" href=\"/assets/highlight.css?v=4\"");
html_body.push_str(">");
html_body.push_str("</link>");
html_body.push_str("<script");
html_body.push_str(" src=\"/assets/highlight.min.js?v=4\"");
html_body.push_str(">");
html_body.push_str("");
html_body.push_str("</script>");
html_body.push_str("<!-- Google Fonts with font-display: swap (non-render-blocking) -->");
html_body.push_str("<link");
html_body.push_str(" href=\"https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap\"");
html_body.push_str(" rel=\"stylesheet\"");
html_body.push_str(" media=\"print\"");
html_body.push_str(" onload=\"this.media='all'\"");
html_body.push_str(">");
html_body.push_str("</link>");
html_body.push_str("<noscript");
html_body.push_str(">");
html_body.push_str("<link");
html_body.push_str(" href=\"https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap\"");
html_body.push_str(" rel=\"stylesheet\"");
html_body.push_str(">");
html_body.push_str("</link>");
html_body.push_str("</noscript>");
html_body.push_str("<link");
html_body.push_str(" rel=\"preconnect\"");
html_body.push_str(" href=\"https://fonts.googleapis.com\"");
html_body.push_str(">");
html_body.push_str("</link>");
html_body.push_str("<link");
html_body.push_str(" rel=\"preconnect\"");
html_body.push_str(" href=\"https://fonts.gstatic.com\"");
html_body.push_str(">");
html_body.push_str("</link>");
html_body.push_str("</head>");
html_body.push_str("<body");
html_body.push_str(">");
html_body.push_str("<!-- Skip Link for Keyboard Navigation (WCAG 2.4.1) -->");
html_body.push_str("<a");
html_body.push_str(" href=\"#main-content\"");
html_body.push_str(" class=\"skip-link\"");
html_body.push_str(">");
html_body.push_str("Skip to main content");
html_body.push_str("</a>");
html_body.push_str("<!-- Screen Reader Announcements (WCAG 4.1.3) -->");
html_body.push_str("<div");
html_body.push_str(" id=\"a11y-announcer\"");
html_body.push_str(" class=\"sr-only\"");
html_body.push_str(" aria-live=\"polite\"");
html_body.push_str(" aria-atomic=\"true\"");
html_body.push_str(">");
html_body.push_str("</div>");
#[allow(dead_code)]
#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct Subscriber {
    pub email: String,
}

html_body.push_str("<n:layout");
html_body.push_str(" name=\"layout\"");
html_body.push_str(">");
html_body.push_str("<!-- Desktop Navigation (hidden on mobile) -->");
html_body.push_str("<nav");
html_body.push_str(" class=\"nav desktop-nav\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" class=\"container nav-inner\"");
html_body.push_str(">");
html_body.push_str("<a href=\"/\" data-nucleus-link=\"true\">");
html_body.push_str("‚ö° Nucleus");
html_body.push_str("</a>");
html_body.push_str("<div");
html_body.push_str(" class=\"nav-links\"");
html_body.push_str(">");
html_body.push_str("<a");
html_body.push_str(" href=\"#features\"");
html_body.push_str(" class=\"nav-link\"");
html_body.push_str(">");
html_body.push_str("Features");
html_body.push_str("</a>");
html_body.push_str("<a");
html_body.push_str(" href=\"#comparison\"");
html_body.push_str(" class=\"nav-link\"");
html_body.push_str(">");
html_body.push_str("Speed");
html_body.push_str("</a>");
html_body.push_str("<a");
html_body.push_str(" href=\"#benchmarks\"");
html_body.push_str(" class=\"nav-link\"");
html_body.push_str(">");
html_body.push_str("Benchmarks");
html_body.push_str("</a>");
html_body.push_str("<a href=\"/docs\" data-nucleus-link=\"true\">");
html_body.push_str("Docs");
html_body.push_str("</a>");
html_body.push_str("<a href=\"/playground\" data-nucleus-link=\"true\">");
html_body.push_str("Playground");
html_body.push_str("</a>");
html_body.push_str("<a");
html_body.push_str(" href=\"https://github.com/nucleus-fire/nucleus-fire\"");
html_body.push_str(" target=\"_blank\"");
html_body.push_str(" class=\"nav-link github-link\"");
html_body.push_str(">");
html_body.push_str("<svg");
html_body.push_str(" height=\"20\"");
html_body.push_str(" viewBox=\"0 0 16 16\"");
html_body.push_str(" width=\"20\"");
html_body.push_str(" fill=\"currentColor\"");
html_body.push_str(">");
html_body.push_str("<path");
html_body.push_str(" d=\"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z\"");
html_body.push_str(">");
html_body.push_str("</path>");
html_body.push_str("</svg>");
html_body.push_str("</a>");
html_body.push_str("<a href=\"/docs\" data-nucleus-link=\"true\">");
html_body.push_str("Get Started");
html_body.push_str("</a>");
html_body.push_str("</div>");
html_body.push_str("</div>");
html_body.push_str("</nav>");
html_body.push_str("<!-- Mobile Bottom Navigation (visible on mobile only) -->");
html_body.push_str("<nav");
html_body.push_str(" class=\"bottom-nav mobile-nav\"");
html_body.push_str(">");
html_body.push_str("<a");
html_body.push_str(" href=\"#features\"");
html_body.push_str(" class=\"bottom-nav-item\"");
html_body.push_str(">");
html_body.push_str("<span");
html_body.push_str(" class=\"bottom-nav-icon\"");
html_body.push_str(">");
html_body.push_str("‚ú®");
html_body.push_str("</span>");
html_body.push_str("<span");
html_body.push_str(" class=\"bottom-nav-label\"");
html_body.push_str(">");
html_body.push_str("Features");
html_body.push_str("</span>");
html_body.push_str("</a>");
html_body.push_str("<a");
html_body.push_str(" href=\"#comparison\"");
html_body.push_str(" class=\"bottom-nav-item\"");
html_body.push_str(">");
html_body.push_str("<span");
html_body.push_str(" class=\"bottom-nav-icon\"");
html_body.push_str(">");
html_body.push_str("‚ö°");
html_body.push_str("</span>");
html_body.push_str("<span");
html_body.push_str(" class=\"bottom-nav-label\"");
html_body.push_str(">");
html_body.push_str("Speed");
html_body.push_str("</span>");
html_body.push_str("</a>");
html_body.push_str("<a href=\"/docs\" data-nucleus-link=\"true\">");
html_body.push_str("<span");
html_body.push_str(" class=\"bottom-nav-icon\"");
html_body.push_str(">");
html_body.push_str("üìö");
html_body.push_str("</span>");
html_body.push_str("<span");
html_body.push_str(" class=\"bottom-nav-label\"");
html_body.push_str(">");
html_body.push_str("Docs");
html_body.push_str("</span>");
html_body.push_str("</a>");
html_body.push_str("<a href=\"/playground\" data-nucleus-link=\"true\">");
html_body.push_str("<span");
html_body.push_str(" class=\"bottom-nav-icon\"");
html_body.push_str(">");
html_body.push_str("üéÆ");
html_body.push_str("</span>");
html_body.push_str("<span");
html_body.push_str(" class=\"bottom-nav-label\"");
html_body.push_str(">");
html_body.push_str("Playground");
html_body.push_str("</span>");
html_body.push_str("</a>");
html_body.push_str("<a");
html_body.push_str(" href=\"https://github.com/nucleus-fire/nucleus-fire\"");
html_body.push_str(" target=\"_blank\"");
html_body.push_str(" class=\"bottom-nav-item\"");
html_body.push_str(">");
html_body.push_str("<span");
html_body.push_str(" class=\"bottom-nav-icon\"");
html_body.push_str(">");
html_body.push_str("<svg");
html_body.push_str(" height=\"20\"");
html_body.push_str(" viewBox=\"0 0 16 16\"");
html_body.push_str(" width=\"20\"");
html_body.push_str(" fill=\"currentColor\"");
html_body.push_str(">");
html_body.push_str("<path");
html_body.push_str(" d=\"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z\"");
html_body.push_str(">");
html_body.push_str("</path>");
html_body.push_str("</svg>");
html_body.push_str("</span>");
html_body.push_str("<span");
html_body.push_str(" class=\"bottom-nav-label\"");
html_body.push_str(">");
html_body.push_str("GitHub");
html_body.push_str("</span>");
html_body.push_str("</a>");
html_body.push_str("</nav>");
html_body.push_str("<!-- Premium Hero Section - Inspired by Linear/Vercel -->");
html_body.push_str("<section");
html_body.push_str(" class=\"hero-premium relative min-h-screen overflow-hidden\"");
html_body.push_str(" id=\"hero\"");
html_body.push_str(">");
html_body.push_str("<!-- Animated Gradient Orb Background -->");
html_body.push_str("<div");
html_body.push_str(" class=\"hero-orb\"");
html_body.push_str(">");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" class=\"hero-orb-glow\"");
html_body.push_str(">");
html_body.push_str("</div>");
html_body.push_str("<!-- Grid Overlay -->");
html_body.push_str("<div");
html_body.push_str(" class=\"hero-grid\"");
html_body.push_str(">");
html_body.push_str("</div>");
html_body.push_str("<!-- Floating Code Snippets (decorative) -->");
html_body.push_str("<div");
html_body.push_str(" class=\"floating-code floating-code-1\"");
html_body.push_str(">");
html_body.push_str("<span");
html_body.push_str(" class=\"code-bracket\"");
html_body.push_str(">");
html_body.push_str("{");
html_body.push_str("</span>");
html_body.push_str("<span");
html_body.push_str(" class=\"code-key\"");
html_body.push_str(">");
html_body.push_str("type");
html_body.push_str("</span>");
html_body.push_str(": ");
html_body.push_str("<span");
html_body.push_str(" class=\"code-string\"");
html_body.push_str(">");
html_body.push_str("\"safe\"");
html_body.push_str("</span>");
html_body.push_str("<span");
html_body.push_str(" class=\"code-bracket\"");
html_body.push_str(">");
html_body.push_str("}");
html_body.push_str("</span>");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" class=\"floating-code floating-code-2\"");
html_body.push_str(">");
html_body.push_str("<span");
html_body.push_str(" class=\"code-fn\"");
html_body.push_str(">");
html_body.push_str("async");
html_body.push_str("</span>");
html_body.push_str("<span");
html_body.push_str(" class=\"code-key\"");
html_body.push_str(">");
html_body.push_str("fn");
html_body.push_str("</span>");
html_body.push_str("<span");
html_body.push_str(" class=\"code-fn\"");
html_body.push_str(">");
html_body.push_str("handle");
html_body.push_str("</span>");
html_body.push_str("()\n    ");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" class=\"floating-code floating-code-3\"");
html_body.push_str(">");
html_body.push_str("<span");
html_body.push_str(" class=\"code-comment\"");
html_body.push_str(">");
html_body.push_str("// Zero runtime");
html_body.push_str("</span>");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" class=\"floating-code floating-code-4\"");
html_body.push_str(">");
html_body.push_str("<span");
html_body.push_str(" class=\"code-bracket\"");
html_body.push_str(">");
html_body.push_str("&lt;/&gt;");
html_body.push_str("</span>");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" class=\"floating-code floating-code-5\"");
html_body.push_str(">");
html_body.push_str("<span");
html_body.push_str(" class=\"code-key\"");
html_body.push_str(">");
html_body.push_str("$_");
html_body.push_str("</span>");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" class=\"floating-code floating-code-6\"");
html_body.push_str(">");
html_body.push_str("<span");
html_body.push_str(" class=\"code-bracket\"");
html_body.push_str(">");
html_body.push_str("&gt;&gt;");
html_body.push_str("</span>");
html_body.push_str("</div>");
html_body.push_str("<!-- Main Content (Centered) - With padding for stats bar -->");
html_body.push_str("<div");
html_body.push_str(" class=\"hero-content-wrapper\"");
html_body.push_str(">");
html_body.push_str("<!-- Release Badge -->");
html_body.push_str("<div");
html_body.push_str(" class=\"inline-flex items-center gap-2 px-4 py-2 mb-8 rounded-full hero-badge animate-fade-in-up\"");
html_body.push_str(" style=\"border-color: rgba(168, 85, 247, 0.3); background: rgba(168, 85, 247, 0.1);\"");
html_body.push_str(">");
html_body.push_str("<span");
html_body.push_str(" class=\"relative flex h-2 w-2\"");
html_body.push_str(">");
html_body.push_str("<span");
html_body.push_str(" class=\"animate-ping absolute inline-flex h-full w-full rounded-full bg-purple-400 opacity-75\"");
html_body.push_str(">");
html_body.push_str("</span>");
html_body.push_str("<span");
html_body.push_str(" class=\"relative inline-flex rounded-full h-2 w-2 bg-purple-500\"");
html_body.push_str(">");
html_body.push_str("</span>");
html_body.push_str("</span>");
html_body.push_str("<span");
html_body.push_str(" class=\"text-xs font-bold tracking-wider text-purple-300\"");
html_body.push_str(" style=\"text-shadow: 0 0 10px rgba(168, 85, 247, 0.5);\"");
html_body.push_str(">");
html_body.push_str("NEW: AI AGENTS & MCP SUPPORT");
html_body.push_str("</span>");
html_body.push_str("</div>");
html_body.push_str("<!-- Main Headline -->");
html_body.push_str("<h1");
html_body.push_str(" class=\"hero-headline animate-fade-in-up delay-100\"");
html_body.push_str(">");
html_body.push_str("<span");
html_body.push_str(" class=\"block text-white/90\"");
html_body.push_str(">");
html_body.push_str("The");
html_body.push_str("</span>");
html_body.push_str("<span");
html_body.push_str(" class=\"block hero-gradient-text\"");
html_body.push_str(">");
html_body.push_str("Genetic Code");
html_body.push_str("</span>");
html_body.push_str("<span");
html_body.push_str(" class=\"block text-white/90\"");
html_body.push_str(">");
html_body.push_str("of Modern Web");
html_body.push_str("</span>");
html_body.push_str("</h1>");
html_body.push_str("<!-- Tagline -->");
html_body.push_str("<p");
html_body.push_str(" class=\"hero-tagline animate-fade-in-up delay-200\"");
html_body.push_str(">");
html_body.push_str("Build high-performance, type-safe web applications with a ");
html_body.push_str("<span");
html_body.push_str(" class=\"text-white font-medium\"");
html_body.push_str(">");
html_body.push_str("zero-runtime framework");
html_body.push_str("</span>");
html_body.push_str("designed for the future.\n        ");
html_body.push_str("</p>");
html_body.push_str("<!-- CTA Buttons -->");
html_body.push_str("<div");
html_body.push_str(" class=\"hero-cta-wrapper animate-fade-in-up delay-300\"");
html_body.push_str(">");
html_body.push_str("<a href=\"/docs\" data-nucleus-link=\"true\">");
html_body.push_str("<span");
html_body.push_str(">");
html_body.push_str("Get Started");
html_body.push_str("</span>");
html_body.push_str("<svg");
html_body.push_str(" width=\"18\"");
html_body.push_str(" height=\"18\"");
html_body.push_str(" fill=\"none\"");
html_body.push_str(" viewBox=\"0 0 24 24\"");
html_body.push_str(" stroke=\"currentColor\"");
html_body.push_str(" class=\"transition-transform group-hover:translate-x-1\"");
html_body.push_str(">");
html_body.push_str("<path");
html_body.push_str(" stroke-linecap=\"round\"");
html_body.push_str(" stroke-linejoin=\"round\"");
html_body.push_str(" stroke-width=\"2\"");
html_body.push_str(" d=\"M17 8l4 4m0 0l-4 4m4-4H3\"");
html_body.push_str(">");
html_body.push_str("</path>");
html_body.push_str("</svg>");
html_body.push_str("</a>");
html_body.push_str("<a href=\"/docs\" data-nucleus-link=\"true\">");
html_body.push_str("<span");
html_body.push_str(">");
html_body.push_str("View Docs");
html_body.push_str("</span>");
html_body.push_str("<svg");
html_body.push_str(" width=\"16\"");
html_body.push_str(" height=\"16\"");
html_body.push_str(" fill=\"none\"");
html_body.push_str(" viewBox=\"0 0 24 24\"");
html_body.push_str(" stroke=\"currentColor\"");
html_body.push_str(" class=\"opacity-50 group-hover:opacity-100 transition-opacity\"");
html_body.push_str(">");
html_body.push_str("<path");
html_body.push_str(" stroke-linecap=\"round\"");
html_body.push_str(" stroke-linejoin=\"round\"");
html_body.push_str(" stroke-width=\"2\"");
html_body.push_str(" d=\"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253\"");
html_body.push_str(">");
html_body.push_str("</path>");
html_body.push_str("</svg>");
html_body.push_str("</a>");
html_body.push_str("</div>");
html_body.push_str("</div>");
html_body.push_str("<!-- Bottom Stats Bar (Fixed at bottom) -->");
html_body.push_str("<div");
html_body.push_str(" class=\"hero-stats-container\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" class=\"hero-stats-bar\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" class=\"hero-stat-card\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" class=\"hero-stat-icon\"");
html_body.push_str(">");
html_body.push_str("‚ö°");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" class=\"hero-stat-content\"");
html_body.push_str(">");
html_body.push_str("<span");
html_body.push_str(" class=\"hero-stat-value\"");
html_body.push_str(">");
html_body.push_str("20,400");
html_body.push_str("</span>");
html_body.push_str("<span");
html_body.push_str(" class=\"hero-stat-label\"");
html_body.push_str(">");
html_body.push_str("req/s");
html_body.push_str("</span>");
html_body.push_str("</div>");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" class=\"hero-stat-card\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" class=\"hero-stat-icon\"");
html_body.push_str(">");
html_body.push_str("üöÄ");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" class=\"hero-stat-content\"");
html_body.push_str(">");
html_body.push_str("<span");
html_body.push_str(" class=\"hero-stat-value\"");
html_body.push_str(">");
html_body.push_str("0.8ms");
html_body.push_str("</span>");
html_body.push_str("<span");
html_body.push_str(" class=\"hero-stat-label\"");
html_body.push_str(">");
html_body.push_str("latency");
html_body.push_str("</span>");
html_body.push_str("</div>");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" class=\"hero-stat-card\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" class=\"hero-stat-icon\"");
html_body.push_str(">");
html_body.push_str("üõ°\u{fe0f}");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" class=\"hero-stat-content\"");
html_body.push_str(">");
html_body.push_str("<span");
html_body.push_str(" class=\"hero-stat-value\"");
html_body.push_str(">");
html_body.push_str("100%");
html_body.push_str("</span>");
html_body.push_str("<span");
html_body.push_str(" class=\"hero-stat-label\"");
html_body.push_str(">");
html_body.push_str("type-safe");
html_body.push_str("</span>");
html_body.push_str("</div>");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" class=\"hero-stat-card\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" class=\"hero-stat-icon\"");
html_body.push_str(">");
html_body.push_str("‚ú®");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" class=\"hero-stat-content\"");
html_body.push_str(">");
html_body.push_str("<span");
html_body.push_str(" class=\"hero-stat-value\"");
html_body.push_str(">");
html_body.push_str("Zero");
html_body.push_str("</span>");
html_body.push_str("<span");
html_body.push_str(" class=\"hero-stat-label\"");
html_body.push_str(">");
html_body.push_str("runtime");
html_body.push_str("</span>");
html_body.push_str("</div>");
html_body.push_str("</div>");
html_body.push_str("</div>");
html_body.push_str("</div>");
html_body.push_str("</section>");
html_body.push_str("<!-- Trusted By Section -->");
html_body.push_str("<section");
html_body.push_str(" class=\"trusted-by\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" class=\"container\"");
html_body.push_str(">");
html_body.push_str("<p");
html_body.push_str(" class=\"trusted-label\"");
html_body.push_str(">");
html_body.push_str("Powering the next generation of web apps");
html_body.push_str("</p>");
html_body.push_str("<div");
html_body.push_str(" class=\"trusted-logos\"");
html_body.push_str(">");
html_body.push_str("<span");
html_body.push_str(" class=\"trusted-logo\"");
html_body.push_str(">");
html_body.push_str("üöÄ 10k+ Downloads");
html_body.push_str("</span>");
html_body.push_str("<span");
html_body.push_str(" class=\"trusted-logo\"");
html_body.push_str(">");
html_body.push_str("‚≠ê 2.4k GitHub Stars");
html_body.push_str("</span>");
html_body.push_str("<span");
html_body.push_str(" class=\"trusted-logo\"");
html_body.push_str(">");
html_body.push_str("üë• Growing Community");
html_body.push_str("</span>");
html_body.push_str("<span");
html_body.push_str(" class=\"trusted-logo\"");
html_body.push_str(">");
html_body.push_str("üîí Production Ready");
html_body.push_str("</span>");
html_body.push_str("</div>");
html_body.push_str("</div>");
html_body.push_str("</section>");
html_body.push_str("<!-- Code Examples Section -->");
html_body.push_str("<section");
html_body.push_str(" id=\"examples\"");
html_body.push_str(" class=\"examples\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" class=\"container\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" class=\"section-header\"");
html_body.push_str(">");
html_body.push_str("<p");
html_body.push_str(" class=\"section-label\"");
html_body.push_str(">");
html_body.push_str("See It In Action");
html_body.push_str("</p>");
html_body.push_str("<h2");
html_body.push_str(" class=\"section-title\"");
html_body.push_str(">");
html_body.push_str("Write less. Do more.");
html_body.push_str("</h2>");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" class=\"code-tabs\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" class=\"tab-buttons\"");
html_body.push_str(">");
html_body.push_str("<button");
html_body.push_str(" class=\"tab-btn active\"");
html_body.push_str(" data-tab=\"api\"");
html_body.push_str(">");
html_body.push_str("API Endpoint");
html_body.push_str("</button>");
html_body.push_str("<button");
html_body.push_str(" class=\"tab-btn\"");
html_body.push_str(" data-tab=\"db\"");
html_body.push_str(">");
html_body.push_str("Database");
html_body.push_str("</button>");
html_body.push_str("<button");
html_body.push_str(" class=\"tab-btn\"");
html_body.push_str(" data-tab=\"auth\"");
html_body.push_str(">");
html_body.push_str("Authentication");
html_body.push_str("</button>");
html_body.push_str("<button");
html_body.push_str(" class=\"tab-btn\"");
html_body.push_str(" data-tab=\"ws\"");
html_body.push_str(">");
html_body.push_str("WebSocket");
html_body.push_str("</button>");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" class=\"tab-content\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" class=\"tab-panel active\"");
html_body.push_str(" id=\"tab-api\"");
html_body.push_str(">");
html_body.push_str("<pre");
html_body.push_str(" class=\"code-block\"");
html_body.push_str(">");
html_body.push_str("<code");
html_body.push_str(">");
html_body.push_str("<span");
html_body.push_str(" class=\"keyword\"");
html_body.push_str(">");
html_body.push_str("use");
html_body.push_str("</span>");
html_body.push_str("nucleus::prelude::*;\n\n");
html_body.push_str("<span");
html_body.push_str(" class=\"attr\"");
html_body.push_str(">");
html_body.push_str("#[server]");
html_body.push_str("</span>");
html_body.push_str("<span");
html_body.push_str(" class=\"keyword\"");
html_body.push_str(">");
html_body.push_str("async fn");
html_body.push_str("</span>");
html_body.push_str("<span");
html_body.push_str(" class=\"function\"");
html_body.push_str(">");
html_body.push_str("get_users");
html_body.push_str("</span>");
html_body.push_str("() -> Result&lt;Vec&lt;User&gt;&gt; ");
html_body.push_str("{");
html_body.push_str("User::query()\n        .filter(");
html_body.push_str("<span");
html_body.push_str(" class=\"string\"");
html_body.push_str(">");
html_body.push_str("\"active\"");
html_body.push_str("</span>");
html_body.push_str(", ");
html_body.push_str("<span");
html_body.push_str(" class=\"bool\"");
html_body.push_str(">");
html_body.push_str("true");
html_body.push_str("</span>");
html_body.push_str(")\n        .limit(");
html_body.push_str("<span");
html_body.push_str(" class=\"number\"");
html_body.push_str(">");
html_body.push_str("10");
html_body.push_str("</span>");
html_body.push_str(")\n        .fetch()\n        .");
html_body.push_str("<span");
html_body.push_str(" class=\"keyword\"");
html_body.push_str(">");
html_body.push_str("await");
html_body.push_str("</span>");
html_body.push_str("}");
html_body.push_str("</code>");
html_body.push_str("</pre>");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" class=\"tab-panel\"");
html_body.push_str(" id=\"tab-db\"");
html_body.push_str(">");
html_body.push_str("<pre");
html_body.push_str(" class=\"code-block\"");
html_body.push_str(">");
html_body.push_str("<code");
html_body.push_str(">");
html_body.push_str("<span");
html_body.push_str(" class=\"comment\"");
html_body.push_str(">");
html_body.push_str("// Type-safe SQL with Photon ORM");
html_body.push_str("</span>");
html_body.push_str("<span");
html_body.push_str(" class=\"keyword\"");
html_body.push_str(">");
html_body.push_str("let");
html_body.push_str("</span>");
html_body.push_str("posts = Post::query()\n    .filter(");
html_body.push_str("<span");
html_body.push_str(" class=\"string\"");
html_body.push_str(">");
html_body.push_str("\"author_id\"");
html_body.push_str("</span>");
html_body.push_str(", user.id)\n    .order_by(");
html_body.push_str("<span");
html_body.push_str(" class=\"string\"");
html_body.push_str(">");
html_body.push_str("\"created_at\"");
html_body.push_str("</span>");
html_body.push_str(", Desc)\n    .include(");
html_body.push_str("<span");
html_body.push_str(" class=\"string\"");
html_body.push_str(">");
html_body.push_str("\"comments\"");
html_body.push_str("</span>");
html_body.push_str(")\n    .fetch()\n    .");
html_body.push_str("<span");
html_body.push_str(" class=\"keyword\"");
html_body.push_str(">");
html_body.push_str("await");
html_body.push_str("</span>");
html_body.push_str("?;");
html_body.push_str("</code>");
html_body.push_str("</pre>");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" class=\"tab-panel\"");
html_body.push_str(" id=\"tab-auth\"");
html_body.push_str(">");
html_body.push_str("<pre");
html_body.push_str(" class=\"code-block\"");
html_body.push_str(">");
html_body.push_str("<code");
html_body.push_str(">");
html_body.push_str("<span");
html_body.push_str(" class=\"comment\"");
html_body.push_str(">");
html_body.push_str("// Built-in auth with Fortress");
html_body.push_str("</span>");
html_body.push_str("<span");
html_body.push_str(" class=\"keyword\"");
html_body.push_str(">");
html_body.push_str("let");
html_body.push_str("</span>");
html_body.push_str("hash = Fortress::hash_password(");
html_body.push_str("<span");
html_body.push_str(" class=\"string\"");
html_body.push_str(">");
html_body.push_str("\"secret\"");
html_body.push_str("</span>");
html_body.push_str(")?;\n");
html_body.push_str("<span");
html_body.push_str(" class=\"keyword\"");
html_body.push_str(">");
html_body.push_str("let");
html_body.push_str("</span>");
html_body.push_str("token = Fortress::generate_token(&user.id)?;\n\n");
html_body.push_str("<span");
html_body.push_str(" class=\"comment\"");
html_body.push_str(">");
html_body.push_str("// Role-based access control");
html_body.push_str("</span>");
html_body.push_str("<span");
html_body.push_str(" class=\"keyword\"");
html_body.push_str(">");
html_body.push_str("if");
html_body.push_str("</span>");
html_body.push_str("user.has_role(Role::Admin) ");
html_body.push_str("{");
html_body.push_str("<span");
html_body.push_str(" class=\"comment\"");
html_body.push_str(">");
html_body.push_str("// Admin only code");
html_body.push_str("</span>");
html_body.push_str("}");
html_body.push_str("</code>");
html_body.push_str("</pre>");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" class=\"tab-panel\"");
html_body.push_str(" id=\"tab-ws\"");
html_body.push_str(">");
html_body.push_str("<pre");
html_body.push_str(" class=\"code-block\"");
html_body.push_str(">");
html_body.push_str("<code");
html_body.push_str(">");
html_body.push_str("<span");
html_body.push_str(" class=\"comment\"");
html_body.push_str(">");
html_body.push_str("// Real-time WebSocket channels");
html_body.push_str("</span>");
html_body.push_str("<span");
html_body.push_str(" class=\"keyword\"");
html_body.push_str(">");
html_body.push_str("impl");
html_body.push_str("</span>");
html_body.push_str("StreamHandler ");
html_body.push_str("<span");
html_body.push_str(" class=\"keyword\"");
html_body.push_str(">");
html_body.push_str("for");
html_body.push_str("</span>");
html_body.push_str("ChatHandler ");
html_body.push_str("{");
html_body.push_str("<span");
html_body.push_str(" class=\"keyword\"");
html_body.push_str(">");
html_body.push_str("async fn");
html_body.push_str("</span>");
html_body.push_str("<span");
html_body.push_str(" class=\"function\"");
html_body.push_str(">");
html_body.push_str("on_message");
html_body.push_str("</span>");
html_body.push_str("(&self, msg: Value) ");
html_body.push_str("{");
html_body.push_str("Channel::new(");
html_body.push_str("<span");
html_body.push_str(" class=\"string\"");
html_body.push_str(">");
html_body.push_str("\"chat\"");
html_body.push_str("</span>");
html_body.push_str(")\n            .broadcast(");
html_body.push_str("<span");
html_body.push_str(" class=\"string\"");
html_body.push_str(">");
html_body.push_str("\"new_message\"");
html_body.push_str("</span>");
html_body.push_str(", &msg)\n            .");
html_body.push_str("<span");
html_body.push_str(" class=\"keyword\"");
html_body.push_str(">");
html_body.push_str("await");
html_body.push_str("</span>");
html_body.push_str("?;\n    }\n}");
html_body.push_str("</code>");
html_body.push_str("</pre>");
html_body.push_str("</div>");
html_body.push_str("</div>");
html_body.push_str("</div>");
html_body.push_str("</div>");
html_body.push_str("</section>");
html_body.push_str("<!-- Features Section -->");
html_body.push_str("<section");
html_body.push_str(" id=\"features\"");
html_body.push_str(" class=\"features\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" class=\"container\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" class=\"section-header\"");
html_body.push_str(">");
html_body.push_str("<p");
html_body.push_str(" class=\"section-label\"");
html_body.push_str(">");
html_body.push_str("Why Nucleus?");
html_body.push_str("</p>");
html_body.push_str("<h2");
html_body.push_str(" class=\"section-title\"");
html_body.push_str(">");
html_body.push_str("Everything you need.");
html_body.push_str("<br");
html_body.push_str(">");
html_body.push_str("</br>");
html_body.push_str("Nothing you don't.");
html_body.push_str("</h2>");
html_body.push_str("<p");
html_body.push_str(" class=\"section-desc\"");
html_body.push_str(">");
html_body.push_str("Built for teams who want to move fast without breaking things.");
html_body.push_str("</p>");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" class=\"features-grid\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" class=\"feature-card\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" class=\"feature-icon\"");
html_body.push_str(">");
html_body.push_str("‚öõ\u{fe0f}");
html_body.push_str("</div>");
html_body.push_str("<h3");
html_body.push_str(" class=\"feature-title\"");
html_body.push_str(">");
html_body.push_str("Neutron State");
html_body.push_str("</h3>");
html_body.push_str("<p");
html_body.push_str(" class=\"feature-desc\"");
html_body.push_str(">");
html_body.push_str("Fine-grained reactivity with signals. Shared state across server and client boundaries.");
html_body.push_str("</p>");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" class=\"feature-card\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" class=\"feature-icon\"");
html_body.push_str(">");
html_body.push_str("‚ö°");
html_body.push_str("</div>");
html_body.push_str("<h3");
html_body.push_str(" class=\"feature-title\"");
html_body.push_str(">");
html_body.push_str("Hyper Speed");
html_body.push_str("</h3>");
html_body.push_str("<p");
html_body.push_str(" class=\"feature-desc\"");
html_body.push_str(">");
html_body.push_str("Powered by Tokio and Hyper. No garbage collection. Consistent sub-millisecond latency.");
html_body.push_str("</p>");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" class=\"feature-card\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" class=\"feature-icon\"");
html_body.push_str(">");
html_body.push_str("üõ°\u{fe0f}");
html_body.push_str("</div>");
html_body.push_str("<h3");
html_body.push_str(" class=\"feature-title\"");
html_body.push_str(">");
html_body.push_str("End-to-End Type Safety");
html_body.push_str("</h3>");
html_body.push_str("<p");
html_body.push_str(" class=\"feature-desc\"");
html_body.push_str(">");
html_body.push_str("Change your database schema. Get compile errors in your frontend. Ship with confidence.");
html_body.push_str("</p>");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" class=\"feature-card\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" class=\"feature-icon\"");
html_body.push_str(">");
html_body.push_str("üî•");
html_body.push_str("</div>");
html_body.push_str("<h3");
html_body.push_str(" class=\"feature-title\"");
html_body.push_str(">");
html_body.push_str("Instant Hot Reload");
html_body.push_str("</h3>");
html_body.push_str("<p");
html_body.push_str(" class=\"feature-desc\"");
html_body.push_str(">");
html_body.push_str("State-preserving HMR that updates in milliseconds. Your flow, uninterrupted.");
html_body.push_str("</p>");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" class=\"feature-card\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" class=\"feature-icon\"");
html_body.push_str(">");
html_body.push_str("üîê");
html_body.push_str("</div>");
html_body.push_str("<h3");
html_body.push_str(" class=\"feature-title\"");
html_body.push_str(">");
html_body.push_str("Security First");
html_body.push_str("</h3>");
html_body.push_str("<p");
html_body.push_str(" class=\"feature-desc\"");
html_body.push_str(">");
html_body.push_str("CSP headers, HSTS, and XSS protection enabled by default. Fortress middleware built-in.");
html_body.push_str("</p>");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" class=\"feature-card\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" class=\"feature-icon\"");
html_body.push_str(">");
html_body.push_str("üì°");
html_body.push_str("</div>");
html_body.push_str("<h3");
html_body.push_str(" class=\"feature-title\"");
html_body.push_str(">");
html_body.push_str("Real-time Ready");
html_body.push_str("</h3>");
html_body.push_str("<p");
html_body.push_str(" class=\"feature-desc\"");
html_body.push_str(">");
html_body.push_str("WebSocket engine with automatic reconnection. Build live dashboards in minutes.");
html_body.push_str("</p>");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" class=\"feature-card\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" class=\"feature-icon\"");
html_body.push_str(">");
html_body.push_str("üéØ");
html_body.push_str("</div>");
html_body.push_str("<h3");
html_body.push_str(" class=\"feature-title\"");
html_body.push_str(">");
html_body.push_str("100 Lighthouse Score");
html_body.push_str("</h3>");
html_body.push_str("<p");
html_body.push_str(" class=\"feature-desc\"");
html_body.push_str(">");
html_body.push_str("RFC 7231 compliant headers, automatic sitemaps, and optimized asset delivery.");
html_body.push_str("</p>");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" class=\"feature-card\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" class=\"feature-icon\"");
html_body.push_str(">");
html_body.push_str("üì¶");
html_body.push_str("</div>");
html_body.push_str("<h3");
html_body.push_str(" class=\"feature-title\"");
html_body.push_str(">");
html_body.push_str("Static Export");
html_body.push_str("</h3>");
html_body.push_str("<p");
html_body.push_str(" class=\"feature-desc\"");
html_body.push_str(">");
html_body.push_str("One-command SSG with incremental builds, WebP conversion, and multi-platform publish.");
html_body.push_str("</p>");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" class=\"feature-card\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" class=\"feature-icon\"");
html_body.push_str(">");
html_body.push_str("üöÄ");
html_body.push_str("</div>");
html_body.push_str("<h3");
html_body.push_str(" class=\"feature-title\"");
html_body.push_str(">");
html_body.push_str("Deploy Anywhere");
html_body.push_str("</h3>");
html_body.push_str("<p");
html_body.push_str(" class=\"feature-desc\"");
html_body.push_str(">");
html_body.push_str("Unified publish to Netlify, Vercel, Cloudflare, and GitHub Pages. No config needed.");
html_body.push_str("</p>");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" class=\"feature-card\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" class=\"feature-icon\"");
html_body.push_str(">");
html_body.push_str("üíª");
html_body.push_str("</div>");
html_body.push_str("<h3");
html_body.push_str(" class=\"feature-title\"");
html_body.push_str(">");
html_body.push_str("Nucleus Console");
html_body.push_str("</h3>");
html_body.push_str("<p");
html_body.push_str(" class=\"feature-desc\"");
html_body.push_str(">");
html_body.push_str("Interactive async REPL. Query your database, test functions, and debug logic instantly.");
html_body.push_str("</p>");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" class=\"feature-card\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" class=\"feature-icon\"");
html_body.push_str(">");
html_body.push_str("üóÑ\u{fe0f}");
html_body.push_str("</div>");
html_body.push_str("<h3");
html_body.push_str(" class=\"feature-title\"");
html_body.push_str(">");
html_body.push_str("Database Studio");
html_body.push_str("</h3>");
html_body.push_str("<p");
html_body.push_str(" class=\"feature-desc\"");
html_body.push_str(">");
html_body.push_str("Built-in GUI for browsing tables, viewing schema, and executing SQL queries.");
html_body.push_str("</p>");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" class=\"feature-card\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" class=\"feature-icon\"");
html_body.push_str(">");
html_body.push_str("‚è±\u{fe0f}");
html_body.push_str("</div>");
html_body.push_str("<h3");
html_body.push_str(" class=\"feature-title\"");
html_body.push_str(">");
html_body.push_str("Request Profiler");
html_body.push_str("</h3>");
html_body.push_str("<p");
html_body.push_str(" class=\"feature-desc\"");
html_body.push_str(">");
html_body.push_str("Visualize query performance, cache hits, and request timing in real-time.");
html_body.push_str("</p>");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" class=\"feature-card\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" class=\"feature-icon\"");
html_body.push_str(">");
html_body.push_str("ü§ñ");
html_body.push_str("</div>");
html_body.push_str("<h3");
html_body.push_str(" class=\"feature-title\"");
html_body.push_str(">");
html_body.push_str("AI Error Assistant");
html_body.push_str("</h3>");
html_body.push_str("<p");
html_body.push_str(" class=\"feature-desc\"");
html_body.push_str(">");
html_body.push_str("Intelligent error analysis that suggests fixes for runtime exceptions.");
html_body.push_str("</p>");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" class=\"feature-card\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" class=\"feature-icon\"");
html_body.push_str(">");
html_body.push_str("üß†");
html_body.push_str("</div>");
html_body.push_str("<h3");
html_body.push_str(" class=\"feature-title\"");
html_body.push_str(">");
html_body.push_str("AI Native");
html_body.push_str("</h3>");
html_body.push_str("<p");
html_body.push_str(" class=\"feature-desc\"");
html_body.push_str(">");
html_body.push_str("First-class support for MCP and Agents. Build autonomous systems out of the box.");
html_body.push_str("</p>");
html_body.push_str("</div>");
html_body.push_str("</div>");
html_body.push_str("</div>");
html_body.push_str("</section>");
html_body.push_str("<!-- Batteries Included Section -->");
html_body.push_str("<section");
html_body.push_str(" id=\"stdlib\"");
html_body.push_str(" class=\"stdlib-section\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" class=\"container\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" class=\"section-header\"");
html_body.push_str(">");
html_body.push_str("<p");
html_body.push_str(" class=\"section-label\"");
html_body.push_str(">");
html_body.push_str("Batteries Included");
html_body.push_str("</p>");
html_body.push_str("<h2");
html_body.push_str(" class=\"section-title\"");
html_body.push_str(">");
html_body.push_str("24 modules. Zero dependencies.");
html_body.push_str("</h2>");
html_body.push_str("<p");
html_body.push_str(" class=\"section-desc\"");
html_body.push_str(">");
html_body.push_str("Everything you need to build production apps. No npm install required.");
html_body.push_str("</p>");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" class=\"stdlib-grid\"");
html_body.push_str(">");
html_body.push_str("<a");
html_body.push_str(" href=\"/docs#25_email_guide\"");
html_body.push_str(" class=\"stdlib-card\"");
html_body.push_str(" style=\"text-decoration: none; color: inherit; display: block;\"");
html_body.push_str(" onclick=\"window.location.href='/docs#25_email_guide'\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" class=\"stdlib-icon\"");
html_body.push_str(">");
html_body.push_str("üìß");
html_body.push_str("</div>");
html_body.push_str("<h3");
html_body.push_str(" class=\"stdlib-title\"");
html_body.push_str(">");
html_body.push_str("Postman");
html_body.push_str("</h3>");
html_body.push_str("<p");
html_body.push_str(" class=\"stdlib-desc\"");
html_body.push_str(">");
html_body.push_str("Email via SMTP & AWS SES with templates and HTML support");
html_body.push_str("</p>");
html_body.push_str("<span");
html_body.push_str(" class=\"stdlib-tag\"");
html_body.push_str(">");
html_body.push_str("Email");
html_body.push_str("</span>");
html_body.push_str("</a>");
html_body.push_str("<a");
html_body.push_str(" href=\"/docs#26_image_processing_guide\"");
html_body.push_str(" class=\"stdlib-card\"");
html_body.push_str(" style=\"text-decoration: none; color: inherit; display: block;\"");
html_body.push_str(" onclick=\"window.location.href='/docs#26_image_processing_guide'\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" class=\"stdlib-icon\"");
html_body.push_str(">");
html_body.push_str("üñº\u{fe0f}");
html_body.push_str("</div>");
html_body.push_str("<h3");
html_body.push_str(" class=\"stdlib-title\"");
html_body.push_str(">");
html_body.push_str("Lens");
html_body.push_str("</h3>");
html_body.push_str("<p");
html_body.push_str(" class=\"stdlib-desc\"");
html_body.push_str(">");
html_body.push_str("Resize, crop, blur, rotate images. WebP, JPEG, PNG conversion");
html_body.push_str("</p>");
html_body.push_str("<span");
html_body.push_str(" class=\"stdlib-tag\"");
html_body.push_str(">");
html_body.push_str("Media");
html_body.push_str("</span>");
html_body.push_str("</a>");
html_body.push_str("<a");
html_body.push_str(" href=\"/docs#29_analytics_guide\"");
html_body.push_str(" class=\"stdlib-card\"");
html_body.push_str(" style=\"text-decoration: none; color: inherit; display: block;\"");
html_body.push_str(" onclick=\"window.location.href='/docs#29_analytics_guide'\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" class=\"stdlib-icon\"");
html_body.push_str(">");
html_body.push_str("üìä");
html_body.push_str("</div>");
html_body.push_str("<h3");
html_body.push_str(" class=\"stdlib-title\"");
html_body.push_str(">");
html_body.push_str("Beacon");
html_body.push_str("</h3>");
html_body.push_str("<p");
html_body.push_str(" class=\"stdlib-desc\"");
html_body.push_str(">");
html_body.push_str("Privacy-first analytics with Plausible, webhooks, or self-hosted");
html_body.push_str("</p>");
html_body.push_str("<span");
html_body.push_str(" class=\"stdlib-tag\"");
html_body.push_str(">");
html_body.push_str("Analytics");
html_body.push_str("</span>");
html_body.push_str("</a>");
html_body.push_str("<a");
html_body.push_str(" href=\"/docs#27_offline_sync_guide\"");
html_body.push_str(" class=\"stdlib-card\"");
html_body.push_str(" style=\"text-decoration: none; color: inherit; display: block;\"");
html_body.push_str(" onclick=\"window.location.href='/docs#27_offline_sync_guide'\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" class=\"stdlib-icon\"");
html_body.push_str(">");
html_body.push_str("üîÑ");
html_body.push_str("</div>");
html_body.push_str("<h3");
html_body.push_str(" class=\"stdlib-title\"");
html_body.push_str(">");
html_body.push_str("Gondola");
html_body.push_str("</h3>");
html_body.push_str("<p");
html_body.push_str(" class=\"stdlib-desc\"");
html_body.push_str(">");
html_body.push_str("CRDTs for offline-first. LWW registers, counters, sync stores");
html_body.push_str("</p>");
html_body.push_str("<span");
html_body.push_str(" class=\"stdlib-tag\"");
html_body.push_str(">");
html_body.push_str("Sync");
html_body.push_str("</span>");
html_body.push_str("</a>");
html_body.push_str("<a");
html_body.push_str(" href=\"/docs#28_i18n_guide\"");
html_body.push_str(" class=\"stdlib-card\"");
html_body.push_str(" style=\"text-decoration: none; color: inherit; display: block;\"");
html_body.push_str(" onclick=\"window.location.href='/docs#28_i18n_guide'\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" class=\"stdlib-icon\"");
html_body.push_str(">");
html_body.push_str("üåç");
html_body.push_str("</div>");
html_body.push_str("<h3");
html_body.push_str(" class=\"stdlib-title\"");
html_body.push_str(">");
html_body.push_str("Polyglot");
html_body.push_str("</h3>");
html_body.push_str("<p");
html_body.push_str(" class=\"stdlib-desc\"");
html_body.push_str(">");
html_body.push_str("Full i18n: translations, plurals, date/number formatting");
html_body.push_str("</p>");
html_body.push_str("<span");
html_body.push_str(" class=\"stdlib-tag\"");
html_body.push_str(">");
html_body.push_str("i18n");
html_body.push_str("</span>");
html_body.push_str("</a>");
html_body.push_str("<a");
html_body.push_str(" href=\"/docs#20_database_guide\"");
html_body.push_str(" class=\"stdlib-card\"");
html_body.push_str(" style=\"text-decoration: none; color: inherit; display: block;\"");
html_body.push_str(" onclick=\"window.location.href='/docs#20_database_guide'\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" class=\"stdlib-icon\"");
html_body.push_str(">");
html_body.push_str("üíæ");
html_body.push_str("</div>");
html_body.push_str("<h3");
html_body.push_str(" class=\"stdlib-title\"");
html_body.push_str(">");
html_body.push_str("Photon");
html_body.push_str("</h3>");
html_body.push_str("<p");
html_body.push_str(" class=\"stdlib-desc\"");
html_body.push_str(">");
html_body.push_str("Type-safe SQL ORM with migrations and relationships");
html_body.push_str("</p>");
html_body.push_str("<span");
html_body.push_str(" class=\"stdlib-tag\"");
html_body.push_str(">");
html_body.push_str("Database");
html_body.push_str("</span>");
html_body.push_str("</a>");
html_body.push_str("<a");
html_body.push_str(" href=\"/docs#21_authentication_guide\"");
html_body.push_str(" class=\"stdlib-card\"");
html_body.push_str(" style=\"text-decoration: none; color: inherit; display: block;\"");
html_body.push_str(" onclick=\"window.location.href='/docs#21_authentication_guide'\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" class=\"stdlib-icon\"");
html_body.push_str(">");
html_body.push_str("üîê");
html_body.push_str("</div>");
html_body.push_str("<h3");
html_body.push_str(" class=\"stdlib-title\"");
html_body.push_str(">");
html_body.push_str("Fortress");
html_body.push_str("</h3>");
html_body.push_str("<p");
html_body.push_str(" class=\"stdlib-desc\"");
html_body.push_str(">");
html_body.push_str("Auth, JWT, sessions, password hashing, RBAC built-in");
html_body.push_str("</p>");
html_body.push_str("<span");
html_body.push_str(" class=\"stdlib-tag\"");
html_body.push_str(">");
html_body.push_str("Security");
html_body.push_str("</span>");
html_body.push_str("</a>");
html_body.push_str("<a");
html_body.push_str(" href=\"/docs#30_websocket_guide\"");
html_body.push_str(" class=\"stdlib-card\"");
html_body.push_str(" style=\"text-decoration: none; color: inherit; display: block;\"");
html_body.push_str(" onclick=\"window.location.href='/docs#30_websocket_guide'\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" class=\"stdlib-icon\"");
html_body.push_str(">");
html_body.push_str("üì°");
html_body.push_str("</div>");
html_body.push_str("<h3");
html_body.push_str(" class=\"stdlib-title\"");
html_body.push_str(">");
html_body.push_str("Stream");
html_body.push_str("</h3>");
html_body.push_str("<p");
html_body.push_str(" class=\"stdlib-desc\"");
html_body.push_str(">");
html_body.push_str("WebSocket channels with auto-reconnect and rooms");
html_body.push_str("</p>");
html_body.push_str("<span");
html_body.push_str(" class=\"stdlib-tag\"");
html_body.push_str(">");
html_body.push_str("Real-time");
html_body.push_str("</span>");
html_body.push_str("</a>");
html_body.push_str("<a");
html_body.push_str(" href=\"/docs#55_scout_guide\"");
html_body.push_str(" class=\"stdlib-card\"");
html_body.push_str(" style=\"text-decoration: none; color: inherit; display: block;\"");
html_body.push_str(" onclick=\"window.location.href='/docs#55_scout_guide'\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" class=\"stdlib-icon\"");
html_body.push_str(">");
html_body.push_str("üîç");
html_body.push_str("</div>");
html_body.push_str("<h3");
html_body.push_str(" class=\"stdlib-title\"");
html_body.push_str(">");
html_body.push_str("Scout");
html_body.push_str("</h3>");
html_body.push_str("<p");
html_body.push_str(" class=\"stdlib-desc\"");
html_body.push_str(">");
html_body.push_str("Full-text search with Meilisearch and Typesense backends");
html_body.push_str("</p>");
html_body.push_str("<span");
html_body.push_str(" class=\"stdlib-tag\"");
html_body.push_str(">");
html_body.push_str("Search");
html_body.push_str("</span>");
html_body.push_str("</a>");
html_body.push_str("<a");
html_body.push_str(" href=\"/docs#56_testing_utilities_guide\"");
html_body.push_str(" class=\"stdlib-card\"");
html_body.push_str(" style=\"text-decoration: none; color: inherit; display: block;\"");
html_body.push_str(" onclick=\"window.location.href='/docs#56_testing_utilities_guide'\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" class=\"stdlib-icon\"");
html_body.push_str(">");
html_body.push_str("üß™");
html_body.push_str("</div>");
html_body.push_str("<h3");
html_body.push_str(" class=\"stdlib-title\"");
html_body.push_str(">");
html_body.push_str("Testing");
html_body.push_str("</h3>");
html_body.push_str("<p");
html_body.push_str(" class=\"stdlib-desc\"");
html_body.push_str(">");
html_body.push_str("MockServer, TestClient, and Factory pattern for tests");
html_body.push_str("</p>");
html_body.push_str("<span");
html_body.push_str(" class=\"stdlib-tag\"");
html_body.push_str(">");
html_body.push_str("Testing");
html_body.push_str("</span>");
html_body.push_str("</a>");
html_body.push_str("<a");
html_body.push_str(" href=\"/docs#57_push_notifications_guide\"");
html_body.push_str(" class=\"stdlib-card\"");
html_body.push_str(" style=\"text-decoration: none; color: inherit; display: block;\"");
html_body.push_str(" onclick=\"window.location.href='/docs#57_push_notifications_guide'\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" class=\"stdlib-icon\"");
html_body.push_str(">");
html_body.push_str("üì±");
html_body.push_str("</div>");
html_body.push_str("<h3");
html_body.push_str(" class=\"stdlib-title\"");
html_body.push_str(">");
html_body.push_str("Push");
html_body.push_str("</h3>");
html_body.push_str("<p");
html_body.push_str(" class=\"stdlib-desc\"");
html_body.push_str(">");
html_body.push_str("Push notifications via Firebase FCM and OneSignal");
html_body.push_str("</p>");
html_body.push_str("<span");
html_body.push_str(" class=\"stdlib-tag\"");
html_body.push_str(">");
html_body.push_str("Notifications");
html_body.push_str("</span>");
html_body.push_str("</a>");
html_body.push_str("<a");
html_body.push_str(" href=\"/docs#58_graphql_guide\"");
html_body.push_str(" class=\"stdlib-card\"");
html_body.push_str(" style=\"text-decoration: none; color: inherit; display: block;\"");
html_body.push_str(" onclick=\"window.location.href='/docs#58_graphql_guide'\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" class=\"stdlib-icon\"");
html_body.push_str(">");
html_body.push_str("üîó");
html_body.push_str("</div>");
html_body.push_str("<h3");
html_body.push_str(" class=\"stdlib-title\"");
html_body.push_str(">");
html_body.push_str("GraphQL");
html_body.push_str("</h3>");
html_body.push_str("<p");
html_body.push_str(" class=\"stdlib-desc\"");
html_body.push_str(">");
html_body.push_str("Full GraphQL with schema builder, playground, subscriptions");
html_body.push_str("</p>");
html_body.push_str("<span");
html_body.push_str(" class=\"stdlib-tag\"");
html_body.push_str(">");
html_body.push_str("API");
html_body.push_str("</span>");
html_body.push_str("</a>");
html_body.push_str("<a");
html_body.push_str(" href=\"/docs#59_ai_agents\"");
html_body.push_str(" class=\"stdlib-card\"");
html_body.push_str(" style=\"text-decoration: none; color: inherit; display: block;\"");
html_body.push_str(" onclick=\"window.location.href='/docs#59_ai_agents'\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" class=\"stdlib-icon\"");
html_body.push_str(">");
html_body.push_str("üß†");
html_body.push_str("</div>");
html_body.push_str("<h3");
html_body.push_str(" class=\"stdlib-title\"");
html_body.push_str(">");
html_body.push_str("Agents");
html_body.push_str("</h3>");
html_body.push_str("<p");
html_body.push_str(" class=\"stdlib-desc\"");
html_body.push_str(">");
html_body.push_str("Autonomous AI agents with MCP tool support and ReAct loop");
html_body.push_str("</p>");
html_body.push_str("<span");
html_body.push_str(" class=\"stdlib-tag\"");
html_body.push_str(">");
html_body.push_str("AI");
html_body.push_str("</span>");
html_body.push_str("</a>");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" class=\"stdlib-cta\"");
html_body.push_str(">");
html_body.push_str("<a href=\"/docs#04_stdlib_reference\" data-nucleus-link=\"true\">");
html_body.push_str("View All 24 Modules ‚Üí");
html_body.push_str("</a>");
html_body.push_str("</div>");
html_body.push_str("</div>");
html_body.push_str("</section>");
html_body.push_str("<!-- Rendering Speed Simulation -->");
html_body.push_str("<section");
html_body.push_str(" id=\"comparison\"");
html_body.push_str(" class=\"render-section\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" class=\"container\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" class=\"section-header\"");
html_body.push_str(">");
html_body.push_str("<p");
html_body.push_str(" class=\"section-label\"");
html_body.push_str(">");
html_body.push_str("Performance Core");
html_body.push_str("</p>");
html_body.push_str("<h2");
html_body.push_str(" class=\"section-title\"");
html_body.push_str(">");
html_body.push_str("Rendering Throughput");
html_body.push_str("</h2>");
html_body.push_str("<p");
html_body.push_str(" class=\"section-desc\"");
html_body.push_str(">");
html_body.push_str("Simulating complex component tree updates at 60Hz");
html_body.push_str("</p>");
html_body.push_str("</div>");
html_body.push_str("<!-- Render Dashboard -->");
html_body.push_str("<div");
html_body.push_str(" class=\"render-dashboard\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" class=\"render-controls\"");
html_body.push_str(">");
html_body.push_str("<button");
html_body.push_str(" class=\"race-btn primary\"");
html_body.push_str(" id=\"start-render\"");
html_body.push_str(">");
html_body.push_str("<span");
html_body.push_str(" class=\"btn-icon\"");
html_body.push_str(">");
html_body.push_str("‚ñ∂");
html_body.push_str("</span>");
html_body.push_str("Run Benchmark\n                ");
html_body.push_str("</button>");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" class=\"cores-grid\"");
html_body.push_str(">");
html_body.push_str("<!-- Nucleus Core -->");
html_body.push_str("<div");
html_body.push_str(" class=\"framework-core nucleus-core\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" class=\"core-header\"");
html_body.push_str(">");
html_body.push_str("<span");
html_body.push_str(" class=\"core-logo\"");
html_body.push_str(">");
html_body.push_str("‚ö°");
html_body.push_str("</span>");
html_body.push_str("<span");
html_body.push_str(" class=\"core-name\"");
html_body.push_str(">");
html_body.push_str("Nucleus");
html_body.push_str("</span>");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" class=\"core-visual\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" class=\"reactor-ring ring-1\"");
html_body.push_str(">");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" class=\"reactor-ring ring-2\"");
html_body.push_str(">");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" class=\"reactor-ring ring-3\"");
html_body.push_str(">");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" class=\"reactor-center\"");
html_body.push_str(">");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" class=\"particle-emitter\"");
html_body.push_str(" id=\"nucleus-emitter\"");
html_body.push_str(">");
html_body.push_str("</div>");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" class=\"core-stats\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" class=\"stat-row\"");
html_body.push_str(">");
html_body.push_str("<span");
html_body.push_str(" class=\"stat-label\"");
html_body.push_str(">");
html_body.push_str("FPS");
html_body.push_str("</span>");
html_body.push_str("<span");
html_body.push_str(" class=\"stat-val highlight\"");
html_body.push_str(" id=\"nucleus-fps\"");
html_body.push_str(">");
html_body.push_str("0");
html_body.push_str("</span>");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" class=\"stat-row\"");
html_body.push_str(">");
html_body.push_str("<span");
html_body.push_str(" class=\"stat-label\"");
html_body.push_str(">");
html_body.push_str("Ops/sec");
html_body.push_str("</span>");
html_body.push_str("<span");
html_body.push_str(" class=\"stat-val\"");
html_body.push_str(" id=\"nucleus-ops\"");
html_body.push_str(">");
html_body.push_str("0");
html_body.push_str("</span>");
html_body.push_str("</div>");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" class=\"core-status\"");
html_body.push_str(">");
html_body.push_str("Idle");
html_body.push_str("</div>");
html_body.push_str("</div>");
html_body.push_str("<!-- Next.js Core -->");
html_body.push_str("<div");
html_body.push_str(" class=\"framework-core\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" class=\"core-header\"");
html_body.push_str(">");
html_body.push_str("<span");
html_body.push_str(" class=\"core-logo\"");
html_body.push_str(">");
html_body.push_str("‚ñ≤");
html_body.push_str("</span>");
html_body.push_str("<span");
html_body.push_str(" class=\"core-name\"");
html_body.push_str(">");
html_body.push_str("Next.js");
html_body.push_str("</span>");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" class=\"core-visual visual-slow\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" class=\"reactor-ring ring-1\"");
html_body.push_str(">");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" class=\"reactor-ring ring-2\"");
html_body.push_str(">");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" class=\"reactor-center\"");
html_body.push_str(">");
html_body.push_str("</div>");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" class=\"core-stats\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" class=\"stat-row\"");
html_body.push_str(">");
html_body.push_str("<span");
html_body.push_str(" class=\"stat-label\"");
html_body.push_str(">");
html_body.push_str("FPS");
html_body.push_str("</span>");
html_body.push_str("<span");
html_body.push_str(" class=\"stat-val\"");
html_body.push_str(" id=\"nextjs-fps\"");
html_body.push_str(">");
html_body.push_str("0");
html_body.push_str("</span>");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" class=\"stat-row\"");
html_body.push_str(">");
html_body.push_str("<span");
html_body.push_str(" class=\"stat-label\"");
html_body.push_str(">");
html_body.push_str("Ops/sec");
html_body.push_str("</span>");
html_body.push_str("<span");
html_body.push_str(" class=\"stat-val\"");
html_body.push_str(" id=\"nextjs-ops\"");
html_body.push_str(">");
html_body.push_str("0");
html_body.push_str("</span>");
html_body.push_str("</div>");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" class=\"core-status\"");
html_body.push_str(">");
html_body.push_str("Idle");
html_body.push_str("</div>");
html_body.push_str("</div>");
html_body.push_str("<!-- Remix Core -->");
html_body.push_str("<div");
html_body.push_str(" class=\"framework-core\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" class=\"core-header\"");
html_body.push_str(">");
html_body.push_str("<span");
html_body.push_str(" class=\"core-logo\"");
html_body.push_str(">");
html_body.push_str("üíø");
html_body.push_str("</span>");
html_body.push_str("<span");
html_body.push_str(" class=\"core-name\"");
html_body.push_str(">");
html_body.push_str("Remix");
html_body.push_str("</span>");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" class=\"core-visual visual-slow\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" class=\"reactor-ring ring-1\"");
html_body.push_str(">");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" class=\"reactor-ring ring-2\"");
html_body.push_str(">");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" class=\"reactor-center\"");
html_body.push_str(">");
html_body.push_str("</div>");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" class=\"core-stats\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" class=\"stat-row\"");
html_body.push_str(">");
html_body.push_str("<span");
html_body.push_str(" class=\"stat-label\"");
html_body.push_str(">");
html_body.push_str("FPS");
html_body.push_str("</span>");
html_body.push_str("<span");
html_body.push_str(" class=\"stat-val\"");
html_body.push_str(" id=\"remix-fps\"");
html_body.push_str(">");
html_body.push_str("0");
html_body.push_str("</span>");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" class=\"stat-row\"");
html_body.push_str(">");
html_body.push_str("<span");
html_body.push_str(" class=\"stat-label\"");
html_body.push_str(">");
html_body.push_str("Ops/sec");
html_body.push_str("</span>");
html_body.push_str("<span");
html_body.push_str(" class=\"stat-val\"");
html_body.push_str(" id=\"remix-ops\"");
html_body.push_str(">");
html_body.push_str("0");
html_body.push_str("</span>");
html_body.push_str("</div>");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" class=\"core-status\"");
html_body.push_str(">");
html_body.push_str("Idle");
html_body.push_str("</div>");
html_body.push_str("</div>");
html_body.push_str("<!-- FastAPI Core -->");
html_body.push_str("<div");
html_body.push_str(" class=\"framework-core\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" class=\"core-header\"");
html_body.push_str(">");
html_body.push_str("<span");
html_body.push_str(" class=\"core-logo\"");
html_body.push_str(">");
html_body.push_str("üêç");
html_body.push_str("</span>");
html_body.push_str("<span");
html_body.push_str(" class=\"core-name\"");
html_body.push_str(">");
html_body.push_str("FastAPI");
html_body.push_str("</span>");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" class=\"core-visual visual-slow\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" class=\"reactor-ring ring-1\"");
html_body.push_str(">");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" class=\"reactor-ring ring-2\"");
html_body.push_str(">");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" class=\"reactor-center\"");
html_body.push_str(">");
html_body.push_str("</div>");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" class=\"core-stats\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" class=\"stat-row\"");
html_body.push_str(">");
html_body.push_str("<span");
html_body.push_str(" class=\"stat-label\"");
html_body.push_str(">");
html_body.push_str("FPS");
html_body.push_str("</span>");
html_body.push_str("<span");
html_body.push_str(" class=\"stat-val\"");
html_body.push_str(" id=\"fastapi-fps\"");
html_body.push_str(">");
html_body.push_str("0");
html_body.push_str("</span>");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" class=\"stat-row\"");
html_body.push_str(">");
html_body.push_str("<span");
html_body.push_str(" class=\"stat-label\"");
html_body.push_str(">");
html_body.push_str("Ops/sec");
html_body.push_str("</span>");
html_body.push_str("<span");
html_body.push_str(" class=\"stat-val\"");
html_body.push_str(" id=\"fastapi-ops\"");
html_body.push_str(">");
html_body.push_str("0");
html_body.push_str("</span>");
html_body.push_str("</div>");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" class=\"core-status\"");
html_body.push_str(">");
html_body.push_str("Idle");
html_body.push_str("</div>");
html_body.push_str("</div>");
html_body.push_str("</div>");
html_body.push_str("</div>");
html_body.push_str("</div>");
html_body.push_str("</section>");
html_body.push_str("<!-- Benchmarks Section -->");
html_body.push_str("<section");
html_body.push_str(" id=\"benchmarks\"");
html_body.push_str(" class=\"benchmarks\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" class=\"container\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" class=\"benchmark-grid\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(">");
html_body.push_str("<p");
html_body.push_str(" class=\"section-label\"");
html_body.push_str(">");
html_body.push_str("Performance");
html_body.push_str("</p>");
html_body.push_str("<h2");
html_body.push_str(" class=\"section-title\"");
html_body.push_str(">");
html_body.push_str("Faster than you think possible.");
html_body.push_str("</h2>");
html_body.push_str("<p");
html_body.push_str(" class=\"section-desc\"");
html_body.push_str(" style=\"margin-bottom: 48px;\"");
html_body.push_str(">");
html_body.push_str("Nucleus handles more traffic on a $5 droplet than Node.js handles on a dedicated server.\n                ");
html_body.push_str("</p>");
html_body.push_str("<div");
html_body.push_str(" class=\"benchmark-bars\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" class=\"benchmark-item\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" class=\"benchmark-label\"");
html_body.push_str(">");
html_body.push_str("<span");
html_body.push_str(" class=\"font-medium\"");
html_body.push_str(">");
html_body.push_str("Nucleus");
html_body.push_str("</span>");
html_body.push_str("<span");
html_body.push_str(" class=\"text-accent font-semibold\"");
html_body.push_str(">");
html_body.push_str("20,400 req/s");
html_body.push_str("</span>");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" class=\"benchmark-bar\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" class=\"benchmark-fill nucleus\"");
html_body.push_str(">");
html_body.push_str("</div>");
html_body.push_str("</div>");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" class=\"benchmark-item\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" class=\"benchmark-label\"");
html_body.push_str(">");
html_body.push_str("<span");
html_body.push_str(" class=\"text-secondary\"");
html_body.push_str(">");
html_body.push_str("Node.js (Fastify)");
html_body.push_str("</span>");
html_body.push_str("<span");
html_body.push_str(" class=\"text-secondary\"");
html_body.push_str(">");
html_body.push_str("8,200 req/s");
html_body.push_str("</span>");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" class=\"benchmark-bar\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" class=\"benchmark-fill node\"");
html_body.push_str(">");
html_body.push_str("</div>");
html_body.push_str("</div>");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" class=\"benchmark-item\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" class=\"benchmark-label\"");
html_body.push_str(">");
html_body.push_str("<span");
html_body.push_str(" class=\"text-secondary\"");
html_body.push_str(">");
html_body.push_str("Python (FastAPI)");
html_body.push_str("</span>");
html_body.push_str("<span");
html_body.push_str(" class=\"text-secondary\"");
html_body.push_str(">");
html_body.push_str("4,500 req/s");
html_body.push_str("</span>");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" class=\"benchmark-bar\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" class=\"benchmark-fill python\"");
html_body.push_str(">");
html_body.push_str("</div>");
html_body.push_str("</div>");
html_body.push_str("</div>");
html_body.push_str("</div>");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" class=\"hero-code\"");
html_body.push_str(" style=\"padding: 32px;\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" style=\"margin-bottom: 24px; padding-bottom: 16px; border-bottom: 1px solid rgba(255,255,255,0.1);\"");
html_body.push_str(">");
html_body.push_str("<span");
html_body.push_str(" class=\"font-semibold\"");
html_body.push_str(">");
html_body.push_str("Benchmark Configuration");
html_body.push_str("</span>");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" style=\"display: flex; flex-direction: column; gap: 12px; font-size: 14px;\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" style=\"display: flex; justify-content: space-between;\"");
html_body.push_str(">");
html_body.push_str("<span");
html_body.push_str(" class=\"text-secondary\"");
html_body.push_str(">");
html_body.push_str("CPU");
html_body.push_str("</span>");
html_body.push_str("<span");
html_body.push_str(">");
html_body.push_str("1 vCPU");
html_body.push_str("</span>");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" style=\"display: flex; justify-content: space-between;\"");
html_body.push_str(">");
html_body.push_str("<span");
html_body.push_str(" class=\"text-secondary\"");
html_body.push_str(">");
html_body.push_str("Memory");
html_body.push_str("</span>");
html_body.push_str("<span");
html_body.push_str(">");
html_body.push_str("512 MB");
html_body.push_str("</span>");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" style=\"display: flex; justify-content: space-between;\"");
html_body.push_str(">");
html_body.push_str("<span");
html_body.push_str(" class=\"text-secondary\"");
html_body.push_str(">");
html_body.push_str("Connections");
html_body.push_str("</span>");
html_body.push_str("<span");
html_body.push_str(">");
html_body.push_str("256 concurrent");
html_body.push_str("</span>");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" style=\"display: flex; justify-content: space-between;\"");
html_body.push_str(">");
html_body.push_str("<span");
html_body.push_str(" class=\"text-secondary\"");
html_body.push_str(">");
html_body.push_str("Latency (p99)");
html_body.push_str("</span>");
html_body.push_str("<span");
html_body.push_str(" class=\"text-accent\"");
html_body.push_str(">");
html_body.push_str("0.8ms");
html_body.push_str("</span>");
html_body.push_str("</div>");
html_body.push_str("</div>");
html_body.push_str("</div>");
html_body.push_str("</div>");
html_body.push_str("</div>");
html_body.push_str("</section>");
html_body.push_str("<!-- Feature Comparison Section -->");
html_body.push_str("<section");
html_body.push_str(" id=\"comparison\"");
html_body.push_str(" class=\"comparison\"");
html_body.push_str(" style=\"padding: 100px 0; background: linear-gradient(180deg, var(--bg-secondary) 0%, var(--bg-primary) 100%);\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" class=\"container\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" class=\"section-header\"");
html_body.push_str(" style=\"text-align: center; margin-bottom: 60px;\"");
html_body.push_str(">");
html_body.push_str("<p");
html_body.push_str(" class=\"section-label\"");
html_body.push_str(">");
html_body.push_str("Framework Comparison");
html_body.push_str("</p>");
html_body.push_str("<h2");
html_body.push_str(" class=\"section-title\"");
html_body.push_str(">");
html_body.push_str("How Nucleus stacks up");
html_body.push_str("</h2>");
html_body.push_str("<p");
html_body.push_str(" class=\"section-desc\"");
html_body.push_str(" style=\"max-width: 600px; margin: 0 auto;\"");
html_body.push_str(">");
html_body.push_str("A complete fullstack framework that rivals the best in every category.\n            ");
html_body.push_str("</p>");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" class=\"comparison-table-wrapper\"");
html_body.push_str(" style=\"overflow-x: auto; border-radius: 20px; background: rgba(255,255,255,0.02); border: 1px solid rgba(255,255,255,0.06);\"");
html_body.push_str(">");
html_body.push_str("<table");
html_body.push_str(" class=\"comparison-table\"");
html_body.push_str(" style=\"width: 100%; border-collapse: collapse; font-size: 14px; min-width: 800px;\"");
html_body.push_str(">");
html_body.push_str("<thead");
html_body.push_str(">");
html_body.push_str("<tr");
html_body.push_str(" style=\"border-bottom: 1px solid rgba(255,255,255,0.1);\"");
html_body.push_str(">");
html_body.push_str("<th");
html_body.push_str(" style=\"padding: 20px 24px; text-align: left; font-weight: 600;\"");
html_body.push_str(">");
html_body.push_str("Feature");
html_body.push_str("</th>");
html_body.push_str("<th");
html_body.push_str(" style=\"padding: 20px 16px; text-align: center; background: rgba(130,100,255,0.1); border-radius: 16px 16px 0 0;\"");
html_body.push_str(">");
html_body.push_str("<span");
html_body.push_str(" style=\"color: var(--accent-primary);\"");
html_body.push_str(">");
html_body.push_str("‚öõ\u{fe0f} Nucleus");
html_body.push_str("</span>");
html_body.push_str("</th>");
html_body.push_str("<th");
html_body.push_str(" style=\"padding: 20px 16px; text-align: center; color: var(--text-secondary);\"");
html_body.push_str(">");
html_body.push_str("Next.js");
html_body.push_str("</th>");
html_body.push_str("<th");
html_body.push_str(" style=\"padding: 20px 16px; text-align: center; color: var(--text-secondary);\"");
html_body.push_str(">");
html_body.push_str("Rails");
html_body.push_str("</th>");
html_body.push_str("<th");
html_body.push_str(" style=\"padding: 20px 16px; text-align: center; color: var(--text-secondary);\"");
html_body.push_str(">");
html_body.push_str("Django");
html_body.push_str("</th>");
html_body.push_str("<th");
html_body.push_str(" style=\"padding: 20px 16px; text-align: center; color: var(--text-secondary);\"");
html_body.push_str(">");
html_body.push_str("Laravel");
html_body.push_str("</th>");
html_body.push_str("</tr>");
html_body.push_str("</thead>");
html_body.push_str("<tbody");
html_body.push_str(">");
html_body.push_str("<tr");
html_body.push_str(" style=\"border-bottom: 1px solid rgba(255,255,255,0.05);\"");
html_body.push_str(">");
html_body.push_str("<td");
html_body.push_str(" style=\"padding: 16px 24px;\"");
html_body.push_str(">");
html_body.push_str("Language");
html_body.push_str("</td>");
html_body.push_str("<td");
html_body.push_str(" style=\"padding: 16px; text-align: center; background: rgba(130,100,255,0.05);\"");
html_body.push_str(">");
html_body.push_str("<span");
html_body.push_str(" style=\"color: #f97316;\"");
html_body.push_str(">");
html_body.push_str("Rust");
html_body.push_str("</span>");
html_body.push_str("</td>");
html_body.push_str("<td");
html_body.push_str(" style=\"padding: 16px; text-align: center; color: var(--text-secondary);\"");
html_body.push_str(">");
html_body.push_str("JS/TS");
html_body.push_str("</td>");
html_body.push_str("<td");
html_body.push_str(" style=\"padding: 16px; text-align: center; color: var(--text-secondary);\"");
html_body.push_str(">");
html_body.push_str("Ruby");
html_body.push_str("</td>");
html_body.push_str("<td");
html_body.push_str(" style=\"padding: 16px; text-align: center; color: var(--text-secondary);\"");
html_body.push_str(">");
html_body.push_str("Python");
html_body.push_str("</td>");
html_body.push_str("<td");
html_body.push_str(" style=\"padding: 16px; text-align: center; color: var(--text-secondary);\"");
html_body.push_str(">");
html_body.push_str("PHP");
html_body.push_str("</td>");
html_body.push_str("</tr>");
html_body.push_str("<tr");
html_body.push_str(" style=\"border-bottom: 1px solid rgba(255,255,255,0.05);\"");
html_body.push_str(">");
html_body.push_str("<td");
html_body.push_str(" style=\"padding: 16px 24px;\"");
html_body.push_str(">");
html_body.push_str("Type Safety");
html_body.push_str("</td>");
html_body.push_str("<td");
html_body.push_str(" style=\"padding: 16px; text-align: center; background: rgba(130,100,255,0.05);\"");
html_body.push_str(">");
html_body.push_str("‚úÖ Full");
html_body.push_str("</td>");
html_body.push_str("<td");
html_body.push_str(" style=\"padding: 16px; text-align: center;\"");
html_body.push_str(">");
html_body.push_str("‚ö†\u{fe0f} Optional");
html_body.push_str("</td>");
html_body.push_str("<td");
html_body.push_str(" style=\"padding: 16px; text-align: center;\"");
html_body.push_str(">");
html_body.push_str("‚ùå");
html_body.push_str("</td>");
html_body.push_str("<td");
html_body.push_str(" style=\"padding: 16px; text-align: center;\"");
html_body.push_str(">");
html_body.push_str("‚ö†\u{fe0f} Optional");
html_body.push_str("</td>");
html_body.push_str("<td");
html_body.push_str(" style=\"padding: 16px; text-align: center;\"");
html_body.push_str(">");
html_body.push_str("‚ö†\u{fe0f} Optional");
html_body.push_str("</td>");
html_body.push_str("</tr>");
html_body.push_str("<tr");
html_body.push_str(" style=\"border-bottom: 1px solid rgba(255,255,255,0.05);\"");
html_body.push_str(">");
html_body.push_str("<td");
html_body.push_str(" style=\"padding: 16px 24px;\"");
html_body.push_str(">");
html_body.push_str("Memory Safety");
html_body.push_str("</td>");
html_body.push_str("<td");
html_body.push_str(" style=\"padding: 16px; text-align: center; background: rgba(130,100,255,0.05);\"");
html_body.push_str(">");
html_body.push_str("‚úÖ Guaranteed");
html_body.push_str("</td>");
html_body.push_str("<td");
html_body.push_str(" style=\"padding: 16px; text-align: center;\"");
html_body.push_str(">");
html_body.push_str("‚ùå GC");
html_body.push_str("</td>");
html_body.push_str("<td");
html_body.push_str(" style=\"padding: 16px; text-align: center;\"");
html_body.push_str(">");
html_body.push_str("‚ùå GC");
html_body.push_str("</td>");
html_body.push_str("<td");
html_body.push_str(" style=\"padding: 16px; text-align: center;\"");
html_body.push_str(">");
html_body.push_str("‚ùå GC");
html_body.push_str("</td>");
html_body.push_str("<td");
html_body.push_str(" style=\"padding: 16px; text-align: center;\"");
html_body.push_str(">");
html_body.push_str("‚ùå GC");
html_body.push_str("</td>");
html_body.push_str("</tr>");
html_body.push_str("<tr");
html_body.push_str(" style=\"border-bottom: 1px solid rgba(255,255,255,0.05);\"");
html_body.push_str(">");
html_body.push_str("<td");
html_body.push_str(" style=\"padding: 16px 24px;\"");
html_body.push_str(">");
html_body.push_str("Built-in ORM");
html_body.push_str("</td>");
html_body.push_str("<td");
html_body.push_str(" style=\"padding: 16px; text-align: center; background: rgba(130,100,255,0.05);\"");
html_body.push_str(">");
html_body.push_str("‚úÖ Photon");
html_body.push_str("</td>");
html_body.push_str("<td");
html_body.push_str(" style=\"padding: 16px; text-align: center;\"");
html_body.push_str(">");
html_body.push_str("‚ùå Prisma*");
html_body.push_str("</td>");
html_body.push_str("<td");
html_body.push_str(" style=\"padding: 16px; text-align: center;\"");
html_body.push_str(">");
html_body.push_str("‚úÖ ActiveRecord");
html_body.push_str("</td>");
html_body.push_str("<td");
html_body.push_str(" style=\"padding: 16px; text-align: center;\"");
html_body.push_str(">");
html_body.push_str("‚úÖ Django ORM");
html_body.push_str("</td>");
html_body.push_str("<td");
html_body.push_str(" style=\"padding: 16px; text-align: center;\"");
html_body.push_str(">");
html_body.push_str("‚úÖ Eloquent");
html_body.push_str("</td>");
html_body.push_str("</tr>");
html_body.push_str("<tr");
html_body.push_str(" style=\"border-bottom: 1px solid rgba(255,255,255,0.05);\"");
html_body.push_str(">");
html_body.push_str("<td");
html_body.push_str(" style=\"padding: 16px 24px;\"");
html_body.push_str(">");
html_body.push_str("Built-in Auth");
html_body.push_str("</td>");
html_body.push_str("<td");
html_body.push_str(" style=\"padding: 16px; text-align: center; background: rgba(130,100,255,0.05);\"");
html_body.push_str(">");
html_body.push_str("‚úÖ Fortress");
html_body.push_str("</td>");
html_body.push_str("<td");
html_body.push_str(" style=\"padding: 16px; text-align: center;\"");
html_body.push_str(">");
html_body.push_str("‚ùå NextAuth*");
html_body.push_str("</td>");
html_body.push_str("<td");
html_body.push_str(" style=\"padding: 16px; text-align: center;\"");
html_body.push_str(">");
html_body.push_str("‚úÖ Devise*");
html_body.push_str("</td>");
html_body.push_str("<td");
html_body.push_str(" style=\"padding: 16px; text-align: center;\"");
html_body.push_str(">");
html_body.push_str("‚úÖ Built-in");
html_body.push_str("</td>");
html_body.push_str("<td");
html_body.push_str(" style=\"padding: 16px; text-align: center;\"");
html_body.push_str(">");
html_body.push_str("‚úÖ Jetstream*");
html_body.push_str("</td>");
html_body.push_str("</tr>");
html_body.push_str("<tr");
html_body.push_str(" style=\"border-bottom: 1px solid rgba(255,255,255,0.05);\"");
html_body.push_str(">");
html_body.push_str("<td");
html_body.push_str(" style=\"padding: 16px 24px;\"");
html_body.push_str(">");
html_body.push_str("Real-time WebSockets");
html_body.push_str("</td>");
html_body.push_str("<td");
html_body.push_str(" style=\"padding: 16px; text-align: center; background: rgba(130,100,255,0.05);\"");
html_body.push_str(">");
html_body.push_str("‚úÖ Stream");
html_body.push_str("</td>");
html_body.push_str("<td");
html_body.push_str(" style=\"padding: 16px; text-align: center;\"");
html_body.push_str(">");
html_body.push_str("‚ùå Pusher*");
html_body.push_str("</td>");
html_body.push_str("<td");
html_body.push_str(" style=\"padding: 16px; text-align: center;\"");
html_body.push_str(">");
html_body.push_str("‚úÖ ActionCable");
html_body.push_str("</td>");
html_body.push_str("<td");
html_body.push_str(" style=\"padding: 16px; text-align: center;\"");
html_body.push_str(">");
html_body.push_str("‚ùå Channels*");
html_body.push_str("</td>");
html_body.push_str("<td");
html_body.push_str(" style=\"padding: 16px; text-align: center;\"");
html_body.push_str(">");
html_body.push_str("‚úÖ Broadcasting");
html_body.push_str("</td>");
html_body.push_str("</tr>");
html_body.push_str("<tr");
html_body.push_str(" style=\"border-bottom: 1px solid rgba(255,255,255,0.05);\"");
html_body.push_str(">");
html_body.push_str("<td");
html_body.push_str(" style=\"padding: 16px 24px;\"");
html_body.push_str(">");
html_body.push_str("Background Jobs");
html_body.push_str("</td>");
html_body.push_str("<td");
html_body.push_str(" style=\"padding: 16px; text-align: center; background: rgba(130,100,255,0.05);\"");
html_body.push_str(">");
html_body.push_str("‚úÖ Pulse");
html_body.push_str("</td>");
html_body.push_str("<td");
html_body.push_str(" style=\"padding: 16px; text-align: center;\"");
html_body.push_str(">");
html_body.push_str("‚ùå Bull*");
html_body.push_str("</td>");
html_body.push_str("<td");
html_body.push_str(" style=\"padding: 16px; text-align: center;\"");
html_body.push_str(">");
html_body.push_str("‚úÖ Sidekiq*");
html_body.push_str("</td>");
html_body.push_str("<td");
html_body.push_str(" style=\"padding: 16px; text-align: center;\"");
html_body.push_str(">");
html_body.push_str("‚ùå Celery*");
html_body.push_str("</td>");
html_body.push_str("<td");
html_body.push_str(" style=\"padding: 16px; text-align: center;\"");
html_body.push_str(">");
html_body.push_str("‚úÖ Queues");
html_body.push_str("</td>");
html_body.push_str("</tr>");
html_body.push_str("<tr");
html_body.push_str(" style=\"border-bottom: 1px solid rgba(255,255,255,0.05);\"");
html_body.push_str(">");
html_body.push_str("<td");
html_body.push_str(" style=\"padding: 16px 24px;\"");
html_body.push_str(">");
html_body.push_str("Cron Scheduler");
html_body.push_str("</td>");
html_body.push_str("<td");
html_body.push_str(" style=\"padding: 16px; text-align: center; background: rgba(130,100,255,0.05);\"");
html_body.push_str(">");
html_body.push_str("‚úÖ Built-in");
html_body.push_str("</td>");
html_body.push_str("<td");
html_body.push_str(" style=\"padding: 16px; text-align: center;\"");
html_body.push_str(">");
html_body.push_str("‚ùå");
html_body.push_str("</td>");
html_body.push_str("<td");
html_body.push_str(" style=\"padding: 16px; text-align: center;\"");
html_body.push_str(">");
html_body.push_str("‚ùå Whenever*");
html_body.push_str("</td>");
html_body.push_str("<td");
html_body.push_str(" style=\"padding: 16px; text-align: center;\"");
html_body.push_str(">");
html_body.push_str("‚ùå django-cron*");
html_body.push_str("</td>");
html_body.push_str("<td");
html_body.push_str(" style=\"padding: 16px; text-align: center;\"");
html_body.push_str(">");
html_body.push_str("‚úÖ Scheduler");
html_body.push_str("</td>");
html_body.push_str("</tr>");
html_body.push_str("<tr");
html_body.push_str(" style=\"border-bottom: 1px solid rgba(255,255,255,0.05);\"");
html_body.push_str(">");
html_body.push_str("<td");
html_body.push_str(" style=\"padding: 16px 24px;\"");
html_body.push_str(">");
html_body.push_str("AI/LLM Integration");
html_body.push_str("</td>");
html_body.push_str("<td");
html_body.push_str(" style=\"padding: 16px; text-align: center; background: rgba(130,100,255,0.05);\"");
html_body.push_str(">");
html_body.push_str("‚úÖ Neural");
html_body.push_str("</td>");
html_body.push_str("<td");
html_body.push_str(" style=\"padding: 16px; text-align: center;\"");
html_body.push_str(">");
html_body.push_str("‚ùå");
html_body.push_str("</td>");
html_body.push_str("<td");
html_body.push_str(" style=\"padding: 16px; text-align: center;\"");
html_body.push_str(">");
html_body.push_str("‚ùå");
html_body.push_str("</td>");
html_body.push_str("<td");
html_body.push_str(" style=\"padding: 16px; text-align: center;\"");
html_body.push_str(">");
html_body.push_str("‚ùå");
html_body.push_str("</td>");
html_body.push_str("<td");
html_body.push_str(" style=\"padding: 16px; text-align: center;\"");
html_body.push_str(">");
html_body.push_str("‚ùå");
html_body.push_str("</td>");
html_body.push_str("</tr>");
html_body.push_str("<tr");
html_body.push_str(" style=\"border-bottom: 1px solid rgba(255,255,255,0.05);\"");
html_body.push_str(">");
html_body.push_str("<td");
html_body.push_str(" style=\"padding: 16px 24px;\"");
html_body.push_str(">");
html_body.push_str("MCP Support");
html_body.push_str("</td>");
html_body.push_str("<td");
html_body.push_str(" style=\"padding: 16px; text-align: center; background: rgba(130,100,255,0.05);\"");
html_body.push_str(">");
html_body.push_str("‚úÖ Native");
html_body.push_str("</td>");
html_body.push_str("<td");
html_body.push_str(" style=\"padding: 16px; text-align: center;\"");
html_body.push_str(">");
html_body.push_str("‚ùå");
html_body.push_str("</td>");
html_body.push_str("<td");
html_body.push_str(" style=\"padding: 16px; text-align: center;\"");
html_body.push_str(">");
html_body.push_str("‚ùå");
html_body.push_str("</td>");
html_body.push_str("<td");
html_body.push_str(" style=\"padding: 16px; text-align: center;\"");
html_body.push_str(">");
html_body.push_str("‚ùå");
html_body.push_str("</td>");
html_body.push_str("<td");
html_body.push_str(" style=\"padding: 16px; text-align: center;\"");
html_body.push_str(">");
html_body.push_str("‚ùå");
html_body.push_str("</td>");
html_body.push_str("</tr>");
html_body.push_str("<tr");
html_body.push_str(" style=\"border-bottom: 1px solid rgba(255,255,255,0.05);\"");
html_body.push_str(">");
html_body.push_str("<td");
html_body.push_str(" style=\"padding: 16px 24px;\"");
html_body.push_str(">");
html_body.push_str("Image Processing");
html_body.push_str("</td>");
html_body.push_str("<td");
html_body.push_str(" style=\"padding: 16px; text-align: center; background: rgba(130,100,255,0.05);\"");
html_body.push_str(">");
html_body.push_str("‚úÖ Lens");
html_body.push_str("</td>");
html_body.push_str("<td");
html_body.push_str(" style=\"padding: 16px; text-align: center;\"");
html_body.push_str(">");
html_body.push_str("‚ùå Sharp*");
html_body.push_str("</td>");
html_body.push_str("<td");
html_body.push_str(" style=\"padding: 16px; text-align: center;\"");
html_body.push_str(">");
html_body.push_str("‚ùå ImageMagick*");
html_body.push_str("</td>");
html_body.push_str("<td");
html_body.push_str(" style=\"padding: 16px; text-align: center;\"");
html_body.push_str(">");
html_body.push_str("‚ùå Pillow*");
html_body.push_str("</td>");
html_body.push_str("<td");
html_body.push_str(" style=\"padding: 16px; text-align: center;\"");
html_body.push_str(">");
html_body.push_str("‚ùå Intervention*");
html_body.push_str("</td>");
html_body.push_str("</tr>");
html_body.push_str("<tr");
html_body.push_str(" style=\"border-bottom: 1px solid rgba(255,255,255,0.05);\"");
html_body.push_str(">");
html_body.push_str("<td");
html_body.push_str(" style=\"padding: 16px 24px;\"");
html_body.push_str(">");
html_body.push_str("Full-text Search");
html_body.push_str("</td>");
html_body.push_str("<td");
html_body.push_str(" style=\"padding: 16px; text-align: center; background: rgba(130,100,255,0.05);\"");
html_body.push_str(">");
html_body.push_str("‚úÖ Sonar");
html_body.push_str("</td>");
html_body.push_str("<td");
html_body.push_str(" style=\"padding: 16px; text-align: center;\"");
html_body.push_str(">");
html_body.push_str("‚ùå Algolia*");
html_body.push_str("</td>");
html_body.push_str("<td");
html_body.push_str(" style=\"padding: 16px; text-align: center;\"");
html_body.push_str(">");
html_body.push_str("‚ùå Searchkick*");
html_body.push_str("</td>");
html_body.push_str("<td");
html_body.push_str(" style=\"padding: 16px; text-align: center;\"");
html_body.push_str(">");
html_body.push_str("‚ùå Haystack*");
html_body.push_str("</td>");
html_body.push_str("<td");
html_body.push_str(" style=\"padding: 16px; text-align: center;\"");
html_body.push_str(">");
html_body.push_str("‚ùå Scout*");
html_body.push_str("</td>");
html_body.push_str("</tr>");
html_body.push_str("<tr");
html_body.push_str(" style=\"border-bottom: 1px solid rgba(255,255,255,0.05);\"");
html_body.push_str(">");
html_body.push_str("<td");
html_body.push_str(" style=\"padding: 16px 24px;\"");
html_body.push_str(">");
html_body.push_str("Email Sending");
html_body.push_str("</td>");
html_body.push_str("<td");
html_body.push_str(" style=\"padding: 16px; text-align: center; background: rgba(130,100,255,0.05);\"");
html_body.push_str(">");
html_body.push_str("‚úÖ Postman");
html_body.push_str("</td>");
html_body.push_str("<td");
html_body.push_str(" style=\"padding: 16px; text-align: center;\"");
html_body.push_str(">");
html_body.push_str("‚ùå Nodemailer*");
html_body.push_str("</td>");
html_body.push_str("<td");
html_body.push_str(" style=\"padding: 16px; text-align: center;\"");
html_body.push_str(">");
html_body.push_str("‚úÖ ActionMailer");
html_body.push_str("</td>");
html_body.push_str("<td");
html_body.push_str(" style=\"padding: 16px; text-align: center;\"");
html_body.push_str(">");
html_body.push_str("‚úÖ Built-in");
html_body.push_str("</td>");
html_body.push_str("<td");
html_body.push_str(" style=\"padding: 16px; text-align: center;\"");
html_body.push_str(">");
html_body.push_str("‚úÖ Mailable");
html_body.push_str("</td>");
html_body.push_str("</tr>");
html_body.push_str("<tr");
html_body.push_str(" style=\"border-bottom: 1px solid rgba(255,255,255,0.05);\"");
html_body.push_str(">");
html_body.push_str("<td");
html_body.push_str(" style=\"padding: 16px 24px;\"");
html_body.push_str(">");
html_body.push_str("Rate Limiting");
html_body.push_str("</td>");
html_body.push_str("<td");
html_body.push_str(" style=\"padding: 16px; text-align: center; background: rgba(130,100,255,0.05);\"");
html_body.push_str(">");
html_body.push_str("‚úÖ Fortress");
html_body.push_str("</td>");
html_body.push_str("<td");
html_body.push_str(" style=\"padding: 16px; text-align: center;\"");
html_body.push_str(">");
html_body.push_str("‚ùå");
html_body.push_str("</td>");
html_body.push_str("<td");
html_body.push_str(" style=\"padding: 16px; text-align: center;\"");
html_body.push_str(">");
html_body.push_str("‚ùå Rack::Attack*");
html_body.push_str("</td>");
html_body.push_str("<td");
html_body.push_str(" style=\"padding: 16px; text-align: center;\"");
html_body.push_str(">");
html_body.push_str("‚ùå django-ratelimit*");
html_body.push_str("</td>");
html_body.push_str("<td");
html_body.push_str(" style=\"padding: 16px; text-align: center;\"");
html_body.push_str(">");
html_body.push_str("‚úÖ Throttle");
html_body.push_str("</td>");
html_body.push_str("</tr>");
html_body.push_str("<tr");
html_body.push_str(" style=\"border-bottom: 1px solid rgba(255,255,255,0.05);\"");
html_body.push_str(">");
html_body.push_str("<td");
html_body.push_str(" style=\"padding: 16px 24px;\"");
html_body.push_str(">");
html_body.push_str("Health Checks");
html_body.push_str("</td>");
html_body.push_str("<td");
html_body.push_str(" style=\"padding: 16px; text-align: center; background: rgba(130,100,255,0.05);\"");
html_body.push_str(">");
html_body.push_str("‚úÖ Built-in");
html_body.push_str("</td>");
html_body.push_str("<td");
html_body.push_str(" style=\"padding: 16px; text-align: center;\"");
html_body.push_str(">");
html_body.push_str("‚ùå");
html_body.push_str("</td>");
html_body.push_str("<td");
html_body.push_str(" style=\"padding: 16px; text-align: center;\"");
html_body.push_str(">");
html_body.push_str("‚ùå health_check*");
html_body.push_str("</td>");
html_body.push_str("<td");
html_body.push_str(" style=\"padding: 16px; text-align: center;\"");
html_body.push_str(">");
html_body.push_str("‚ùå django-health*");
html_body.push_str("</td>");
html_body.push_str("<td");
html_body.push_str(" style=\"padding: 16px; text-align: center;\"");
html_body.push_str(">");
html_body.push_str("‚ùå");
html_body.push_str("</td>");
html_body.push_str("</tr>");
html_body.push_str("<tr");
html_body.push_str(" style=\"border-bottom: 1px solid rgba(255,255,255,0.05);\"");
html_body.push_str(">");
html_body.push_str("<td");
html_body.push_str(" style=\"padding: 16px 24px;\"");
html_body.push_str(">");
html_body.push_str("Static Export (SSG)");
html_body.push_str("</td>");
html_body.push_str("<td");
html_body.push_str(" style=\"padding: 16px; text-align: center; background: rgba(130,100,255,0.05);\"");
html_body.push_str(">");
html_body.push_str("‚úÖ Unified");
html_body.push_str("</td>");
html_body.push_str("<td");
html_body.push_str(" style=\"padding: 16px; text-align: center;\"");
html_body.push_str(">");
html_body.push_str("‚úÖ");
html_body.push_str("</td>");
html_body.push_str("<td");
html_body.push_str(" style=\"padding: 16px; text-align: center;\"");
html_body.push_str(">");
html_body.push_str("‚ùå");
html_body.push_str("</td>");
html_body.push_str("<td");
html_body.push_str(" style=\"padding: 16px; text-align: center;\"");
html_body.push_str(">");
html_body.push_str("‚ùå");
html_body.push_str("</td>");
html_body.push_str("<td");
html_body.push_str(" style=\"padding: 16px; text-align: center;\"");
html_body.push_str(">");
html_body.push_str("‚ùå");
html_body.push_str("</td>");
html_body.push_str("</tr>");
html_body.push_str("<tr");
html_body.push_str(" style=\"border-bottom: 1px solid rgba(255,255,255,0.05);\"");
html_body.push_str(">");
html_body.push_str("<td");
html_body.push_str(" style=\"padding: 16px 24px;\"");
html_body.push_str(">");
html_body.push_str("Zero Runtime");
html_body.push_str("</td>");
html_body.push_str("<td");
html_body.push_str(" style=\"padding: 16px; text-align: center; background: rgba(130,100,255,0.05);\"");
html_body.push_str(">");
html_body.push_str("‚úÖ Yes");
html_body.push_str("</td>");
html_body.push_str("<td");
html_body.push_str(" style=\"padding: 16px; text-align: center;\"");
html_body.push_str(">");
html_body.push_str("‚ùå Node.js");
html_body.push_str("</td>");
html_body.push_str("<td");
html_body.push_str(" style=\"padding: 16px; text-align: center;\"");
html_body.push_str(">");
html_body.push_str("‚ùå Ruby");
html_body.push_str("</td>");
html_body.push_str("<td");
html_body.push_str(" style=\"padding: 16px; text-align: center;\"");
html_body.push_str(">");
html_body.push_str("‚ùå Python");
html_body.push_str("</td>");
html_body.push_str("<td");
html_body.push_str(" style=\"padding: 16px; text-align: center;\"");
html_body.push_str(">");
html_body.push_str("‚ùå PHP");
html_body.push_str("</td>");
html_body.push_str("</tr>");
html_body.push_str("<tr");
html_body.push_str(" style=\"border-bottom: 1px solid rgba(255,255,255,0.05);\"");
html_body.push_str(">");
html_body.push_str("<td");
html_body.push_str(" style=\"padding: 16px 24px;\"");
html_body.push_str(">");
html_body.push_str("Development Tools");
html_body.push_str("</td>");
html_body.push_str("<td");
html_body.push_str(" style=\"padding: 16px; text-align: center; background: rgba(130,100,255,0.05);\"");
html_body.push_str(">");
html_body.push_str("‚úÖ Console + GUI");
html_body.push_str("</td>");
html_body.push_str("<td");
html_body.push_str(" style=\"padding: 16px; text-align: center;\"");
html_body.push_str(">");
html_body.push_str("‚ö†\u{fe0f} Basic");
html_body.push_str("</td>");
html_body.push_str("<td");
html_body.push_str(" style=\"padding: 16px; text-align: center;\"");
html_body.push_str(">");
html_body.push_str("‚úÖ Console");
html_body.push_str("</td>");
html_body.push_str("<td");
html_body.push_str(" style=\"padding: 16px; text-align: center;\"");
html_body.push_str(">");
html_body.push_str("‚úÖ Shell");
html_body.push_str("</td>");
html_body.push_str("<td");
html_body.push_str(" style=\"padding: 16px; text-align: center;\"");
html_body.push_str(">");
html_body.push_str("‚úÖ Tinker");
html_body.push_str("</td>");
html_body.push_str("</tr>");
html_body.push_str("<tr");
html_body.push_str(" style=\"border-bottom: 1px solid rgba(255,255,255,0.05);\"");
html_body.push_str(">");
html_body.push_str("<td");
html_body.push_str(" style=\"padding: 16px 24px;\"");
html_body.push_str(">");
html_body.push_str("Interactive REPL");
html_body.push_str("</td>");
html_body.push_str("<td");
html_body.push_str(" style=\"padding: 16px; text-align: center; background: rgba(130,100,255,0.05);\"");
html_body.push_str(">");
html_body.push_str("‚úÖ Console");
html_body.push_str("</td>");
html_body.push_str("<td");
html_body.push_str(" style=\"padding: 16px; text-align: center;\"");
html_body.push_str(">");
html_body.push_str("‚ùå");
html_body.push_str("</td>");
html_body.push_str("<td");
html_body.push_str(" style=\"padding: 16px; text-align: center;\"");
html_body.push_str(">");
html_body.push_str("‚úÖ Console");
html_body.push_str("</td>");
html_body.push_str("<td");
html_body.push_str(" style=\"padding: 16px; text-align: center;\"");
html_body.push_str(">");
html_body.push_str("‚úÖ Shell");
html_body.push_str("</td>");
html_body.push_str("<td");
html_body.push_str(" style=\"padding: 16px; text-align: center;\"");
html_body.push_str(">");
html_body.push_str("‚úÖ Tinker");
html_body.push_str("</td>");
html_body.push_str("</tr>");
html_body.push_str("<tr");
html_body.push_str(" style=\"border-bottom: 1px solid rgba(255,255,255,0.05);\"");
html_body.push_str(">");
html_body.push_str("<td");
html_body.push_str(" style=\"padding: 16px 24px;\"");
html_body.push_str(">");
html_body.push_str("Database Studio (GUI)");
html_body.push_str("</td>");
html_body.push_str("<td");
html_body.push_str(" style=\"padding: 16px; text-align: center; background: rgba(130,100,255,0.05);\"");
html_body.push_str(">");
html_body.push_str("‚úÖ Studio");
html_body.push_str("</td>");
html_body.push_str("<td");
html_body.push_str(" style=\"padding: 16px; text-align: center;\"");
html_body.push_str(">");
html_body.push_str("‚ùå");
html_body.push_str("</td>");
html_body.push_str("<td");
html_body.push_str(" style=\"padding: 16px; text-align: center;\"");
html_body.push_str(">");
html_body.push_str("‚ùå");
html_body.push_str("</td>");
html_body.push_str("<td");
html_body.push_str(" style=\"padding: 16px; text-align: center;\"");
html_body.push_str(">");
html_body.push_str("‚úÖ Admin");
html_body.push_str("</td>");
html_body.push_str("<td");
html_body.push_str(" style=\"padding: 16px; text-align: center;\"");
html_body.push_str(">");
html_body.push_str("‚ùå");
html_body.push_str("</td>");
html_body.push_str("</tr>");
html_body.push_str("<tr");
html_body.push_str(" style=\"border-bottom: 1px solid rgba(255,255,255,0.05);\"");
html_body.push_str(">");
html_body.push_str("<td");
html_body.push_str(" style=\"padding: 16px 24px;\"");
html_body.push_str(">");
html_body.push_str("Live Profiler");
html_body.push_str("</td>");
html_body.push_str("<td");
html_body.push_str(" style=\"padding: 16px; text-align: center; background: rgba(130,100,255,0.05);\"");
html_body.push_str(">");
html_body.push_str("‚úÖ Built-in");
html_body.push_str("</td>");
html_body.push_str("<td");
html_body.push_str(" style=\"padding: 16px; text-align: center;\"");
html_body.push_str(">");
html_body.push_str("‚ùå");
html_body.push_str("</td>");
html_body.push_str("<td");
html_body.push_str(" style=\"padding: 16px; text-align: center;\"");
html_body.push_str(">");
html_body.push_str("‚ùå MiniProfiler*");
html_body.push_str("</td>");
html_body.push_str("<td");
html_body.push_str(" style=\"padding: 16px; text-align: center;\"");
html_body.push_str(">");
html_body.push_str("‚ùå DebugTbar*");
html_body.push_str("</td>");
html_body.push_str("<td");
html_body.push_str(" style=\"padding: 16px; text-align: center;\"");
html_body.push_str(">");
html_body.push_str("‚ùå Telescope*");
html_body.push_str("</td>");
html_body.push_str("</tr>");
html_body.push_str("<tr");
html_body.push_str(">");
html_body.push_str("<td");
html_body.push_str(" style=\"padding: 16px 24px; font-weight: 600;\"");
html_body.push_str(">");
html_body.push_str("Throughput");
html_body.push_str("</td>");
html_body.push_str("<td");
html_body.push_str(" style=\"padding: 16px; text-align: center; background: rgba(130,100,255,0.05);\"");
html_body.push_str(">");
html_body.push_str("<span");
html_body.push_str(" style=\"color: #22c55e; font-weight: 600;\"");
html_body.push_str(">");
html_body.push_str("20,400 req/s");
html_body.push_str("</span>");
html_body.push_str("</td>");
html_body.push_str("<td");
html_body.push_str(" style=\"padding: 16px; text-align: center; color: var(--text-secondary);\"");
html_body.push_str(">");
html_body.push_str("~3,500");
html_body.push_str("</td>");
html_body.push_str("<td");
html_body.push_str(" style=\"padding: 16px; text-align: center; color: var(--text-secondary);\"");
html_body.push_str(">");
html_body.push_str("~2,000");
html_body.push_str("</td>");
html_body.push_str("<td");
html_body.push_str(" style=\"padding: 16px; text-align: center; color: var(--text-secondary);\"");
html_body.push_str(">");
html_body.push_str("~1,500");
html_body.push_str("</td>");
html_body.push_str("<td");
html_body.push_str(" style=\"padding: 16px; text-align: center; color: var(--text-secondary);\"");
html_body.push_str(">");
html_body.push_str("~2,500");
html_body.push_str("</td>");
html_body.push_str("</tr>");
html_body.push_str("</tbody>");
html_body.push_str("</table>");
html_body.push_str("</div>");
html_body.push_str("<p");
html_body.push_str(" style=\"text-align: center; margin-top: 20px; font-size: 13px; color: var(--text-tertiary);\"");
html_body.push_str(">");
html_body.push_str("* Requires third-party package. ‚úÖ = Built-in, ‚ö†\u{fe0f} = Partial/Optional, ‚ùå = Requires external package\n        ");
html_body.push_str("</p>");
html_body.push_str("</div>");
html_body.push_str("</section>");
html_body.push_str("<!-- Newsletter Section -->");
html_body.push_str("<section");
html_body.push_str(" class=\"newsletter\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" class=\"container newsletter-content\"");
html_body.push_str(">");
html_body.push_str("<h2");
html_body.push_str(" class=\"newsletter-title\"");
html_body.push_str(">");
html_body.push_str("Stay Updated");
html_body.push_str("</h2>");
html_body.push_str("<p");
html_body.push_str(" class=\"newsletter-desc\"");
html_body.push_str(">");
html_body.push_str("Get the latest Nucleus news, tutorials, and releases.");
html_body.push_str("</p>");
html_body.push_str("<form");
html_body.push_str(" class=\"newsletter-form\"");
html_body.push_str(" method=\"POST\"");
html_body.push_str(">");
html_body.push_str("<input");
html_body.push_str(" type=\"email\"");
html_body.push_str(" name=\"email\"");
html_body.push_str(" id=\"newsletter-email\"");
html_body.push_str(" autocomplete=\"email\"");
html_body.push_str(" placeholder=\"you@example.com\"");
html_body.push_str(" class=\"newsletter-input\"");
html_body.push_str(" required=\"true\"");
html_body.push_str(">");
html_body.push_str("</input>");
html_body.push_str("<button");
html_body.push_str(" type=\"submit\"");
html_body.push_str(" class=\"btn btn-gradient\"");
html_body.push_str(">");
html_body.push_str("Subscribe");
html_body.push_str("</button>");
html_body.push_str("</form>");
html_body.push_str("<p");
html_body.push_str(" class=\"newsletter-note\"");
html_body.push_str(">");
html_body.push_str("No spam. Unsubscribe anytime.");
html_body.push_str("</p>");
html_body.push_str("</div>");
html_body.push_str("</section>");
html_body.push_str("<!-- CTA Section -->");
html_body.push_str("<section");
html_body.push_str(" class=\"cta\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" class=\"cta-bg\"");
html_body.push_str(">");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" class=\"container cta-content\"");
html_body.push_str(">");
html_body.push_str("<h2");
html_body.push_str(" class=\"cta-title\"");
html_body.push_str(">");
html_body.push_str("Ready to build");
html_body.push_str("<br");
html_body.push_str(">");
html_body.push_str("</br>");
html_body.push_str("<span");
html_body.push_str(" class=\"gradient-text\"");
html_body.push_str(">");
html_body.push_str("something amazing?");
html_body.push_str("</span>");
html_body.push_str("</h2>");
html_body.push_str("<p");
html_body.push_str(" class=\"section-desc\"");
html_body.push_str(" style=\"margin-bottom: 40px;\"");
html_body.push_str(">");
html_body.push_str("Join thousands of developers shipping faster with Nucleus.");
html_body.push_str("</p>");
html_body.push_str("<div");
html_body.push_str(" class=\"flex gap-4 justify-center\"");
html_body.push_str(">");
html_body.push_str("<a href=\"/docs\" data-nucleus-link=\"true\">");
html_body.push_str("Get Started");
html_body.push_str("</a>");
html_body.push_str("<a");
html_body.push_str(" href=\"https://github.com/nucleus-fire/nucleus-fire\"");
html_body.push_str(" class=\"btn btn-secondary\"");
html_body.push_str(">");
html_body.push_str("Star on GitHub");
html_body.push_str("</a>");
html_body.push_str("</div>");
html_body.push_str("</div>");
html_body.push_str("</section>");
html_body.push_str("<!-- Footer -->");
html_body.push_str("<footer");
html_body.push_str(" class=\"footer\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" class=\"container footer-inner\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" class=\"text-muted text-sm\"");
html_body.push_str(">");
html_body.push_str("¬© 2026 Nucleus Framework. MIT Licensed.");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" class=\"footer-links\"");
html_body.push_str(">");
html_body.push_str("<a href=\"/docs\" data-nucleus-link=\"true\">");
html_body.push_str("Documentation");
html_body.push_str("</a>");
html_body.push_str("<a");
html_body.push_str(" href=\"https://github.com/nucleus-fire/nucleus-fire\"");
html_body.push_str(" class=\"footer-link\"");
html_body.push_str(">");
html_body.push_str("GitHub");
html_body.push_str("</a>");
html_body.push_str("<a");
html_body.push_str(" href=\"https://twitter.com\"");
html_body.push_str(" class=\"footer-link\"");
html_body.push_str(">");
html_body.push_str("Twitter");
html_body.push_str("</a>");
html_body.push_str("<a");
html_body.push_str(" href=\"https://discord.com\"");
html_body.push_str(" class=\"footer-link\"");
html_body.push_str(">");
html_body.push_str("Discord");
html_body.push_str("</a>");
html_body.push_str("</div>");
html_body.push_str("</div>");
html_body.push_str("</footer>");
html_body.push_str("<!-- Scripts -->");
html_body.push_str("<!-- Scoped Animations -->");
html_body.push_str("<style>
    /* ===== PREMIUM HERO SECTION ===== */
    .hero-premium {
        background: #030303;
        color: white;
    }
    
    /* Hero Content Layout */
    .hero-content-wrapper {
        position: relative;
        z-index: 20;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        text-align: center;
        min-height: 100vh;
        padding: 6rem 1.5rem 10rem;
        max-width: 64rem;
        margin: 0 auto;
    }
    
    .hero-headline {
        font-size: clamp(2.5rem, 8vw, 5rem);
        font-weight: 900;
        letter-spacing: -0.02em;
        line-height: 1.1;
        margin-bottom: 1.5rem;
    }
    
    .hero-headline .hero-gradient-text {
        font-size: clamp(3rem, 10vw, 7rem);
    }
    
    .hero-tagline {
        font-size: clamp(1rem, 2.5vw, 1.25rem);
        color: rgba(148, 163, 184, 0.9);
        max-width: 36rem;
        margin: 0 auto 2.5rem;
        line-height: 1.7;
    }
    
    .hero-cta-wrapper {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 1rem;
    }
    
    @media (min-width: 640px) {
        .hero-cta-wrapper {
            flex-direction: row;
            gap: 1.25rem;
        }
    }
    
    /* Stats Container - Fixed at Bottom */
    .hero-stats-container {
        position: absolute;
        bottom: 0;
        left: 0;
        right: 0;
        z-index: 30;
        padding: 1.5rem;
        background: linear-gradient(180deg, transparent 0%, rgba(0, 0, 0, 0.9) 100%);
    }
    
    .hero-stats-bar {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        gap: 0.75rem;
        max-width: 64rem;
        margin: 0 auto;
    }
    
    @media (min-width: 768px) {
        .hero-stats-bar {
            gap: 1.5rem;
        }
    }
    
    /* Animated Gradient Orb */
    .hero-orb {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        width: 500px;
        height: 500px;
        background: radial-gradient(circle at 30% 30%, 
            rgba(96, 165, 250, 0.4) 0%,
            rgba(139, 92, 246, 0.3) 30%,
            rgba(168, 85, 247, 0.2) 50%,
            rgba(59, 130, 246, 0.1) 70%,
            transparent 100%
        );
        border-radius: 50%;
        filter: blur(60px);
        animation: orbPulse 8s ease-in-out infinite, orbFloat 12s ease-in-out infinite;
        z-index: 1;
    }
    
    .hero-orb-glow {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        width: 700px;
        height: 700px;
        background: radial-gradient(circle, 
            rgba(139, 92, 246, 0.15) 0%,
            rgba(59, 130, 246, 0.08) 40%,
            transparent 70%
        );
        border-radius: 50%;
        filter: blur(80px);
        animation: orbPulse 10s ease-in-out infinite reverse;
        z-index: 0;
    }
    
    @keyframes orbPulse {
        0%, 100% { transform: translate(-50%, -50%) scale(1); opacity: 0.8; }
        50% { transform: translate(-50%, -50%) scale(1.15); opacity: 1; }
    }
    
    @keyframes orbFloat {
        0%, 100% { transform: translate(-50%, -50%); }
        25% { transform: translate(-48%, -52%); }
        50% { transform: translate(-52%, -48%); }
        75% { transform: translate(-50%, -50%); }
    }
    
    /* Grid Overlay */
    .hero-grid {
        position: absolute;
        inset: 0;
        background-image: 
            linear-gradient(rgba(255,255,255,0.02) 1px, transparent 1px),
            linear-gradient(90deg, rgba(255,255,255,0.02) 1px, transparent 1px);
        background-size: 60px 60px;
        z-index: 2;
        pointer-events: none;
        mask-image: radial-gradient(ellipse at center, transparent 20%, black 80%);
        -webkit-mask-image: radial-gradient(ellipse at center, transparent 20%, black 80%);
    }
    
    /* Floating Code Snippets */
    .floating-code {
        position: absolute;
        font-family: ui-monospace, SFMono-Regular, monospace;
        font-size: 0.75rem;
        padding: 0.5rem 1rem;
        background: rgba(255, 255, 255, 0.03);
        border: 1px solid rgba(255, 255, 255, 0.06);
        border-radius: 0.5rem;
        backdrop-filter: blur(8px);
        color: rgba(255, 255, 255, 0.4);
        z-index: 15;
        animation: floatCode 20s ease-in-out infinite;
        opacity: 0.6;
    }
    
    .floating-code-1 { top: 15%; left: 8%; animation-delay: 0s; }
    .floating-code-2 { top: 25%; left: 5%; animation-delay: -3s; }
    .floating-code-3 { top: 70%; left: 10%; animation-delay: -6s; }
    .floating-code-4 { top: 20%; right: 8%; animation-delay: -2s; }
    .floating-code-5 { top: 60%; right: 5%; animation-delay: -8s; }
    .floating-code-6 { top: 75%; right: 12%; animation-delay: -4s; }
    
    .code-bracket { color: rgba(96, 165, 250, 0.7); }
    .code-key { color: rgba(168, 85, 247, 0.8); }
    .code-string { color: rgba(52, 211, 153, 0.8); }
    .code-fn { color: rgba(251, 191, 36, 0.8); }
    .code-comment { color: rgba(100, 116, 139, 0.7); font-style: italic; }
    
    @keyframes floatCode {
        0%, 100% { transform: translateY(0) rotate(0deg); }
        25% { transform: translateY(-10px) rotate(1deg); }
        50% { transform: translateY(5px) rotate(-1deg); }
        75% { transform: translateY(-5px) rotate(0.5deg); }
    }
    
    /* Hero Badge */
    .hero-badge {
        background: linear-gradient(135deg, rgba(59, 130, 246, 0.1) 0%, rgba(139, 92, 246, 0.1) 100%);
        border: 1px solid rgba(59, 130, 246, 0.2);
        backdrop-filter: blur(12px);
    }
    
    /* Hero Animated Gradient Text */
    .hero-gradient-text {
        background: linear-gradient(135deg, #60a5fa 0%, #c084fc 25%, #f472b6 50%, #c084fc 75%, #60a5fa 100%);
        background-size: 300% 300%;
        -webkit-background-clip: text;
        background-clip: text;
        -webkit-text-fill-color: transparent;
        animation: gradientShift 6s ease infinite;
        line-height: 1.1;
    }
    
    @keyframes gradientShift {
        0%, 100% { background-position: 0% 50%; }
        50% { background-position: 100% 50%; }
    }
    
    /* Hero Primary Button with Glow */
    .hero-btn-primary {
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        padding: 0.875rem 2rem;
        background: linear-gradient(135deg, #3b82f6 0%, #8b5cf6 100%);
        color: white;
        font-weight: 700;
        border-radius: 0.75rem;
        transition: all 0.3s ease;
        box-shadow: 0 0 30px rgba(139, 92, 246, 0.3);
    }
    
    .hero-btn-primary:hover {
        transform: translateY(-2px);
        box-shadow: 0 0 50px rgba(139, 92, 246, 0.5), 0 10px 40px rgba(59, 130, 246, 0.3);
    }
    
    /* Hero Secondary Button */
    .hero-btn-secondary {
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        padding: 0.875rem 1.75rem;
        background: rgba(255, 255, 255, 0.05);
        border: 1px solid rgba(255, 255, 255, 0.1);
        color: white;
        font-weight: 600;
        border-radius: 0.75rem;
        transition: all 0.3s ease;
        backdrop-filter: blur(12px);
    }
    
    .hero-btn-secondary:hover {
        background: rgba(255, 255, 255, 0.1);
        border-color: rgba(255, 255, 255, 0.2);
        transform: translateY(-2px);
    }
    
    /* Stats Bar (Glassmorphic) */
    .hero-stats-bar {
        background: linear-gradient(180deg, transparent 0%, rgba(0, 0, 0, 0.8) 100%);
        border-top: 1px solid rgba(255, 255, 255, 0.05);
        backdrop-filter: blur(20px);
    }
    
    /* Stat Cards */
    .hero-stat-card {
        display: flex;
        align-items: center;
        gap: 0.75rem;
        padding: 0.875rem 1.5rem;
        background: rgba(255, 255, 255, 0.03);
        border: 1px solid rgba(255, 255, 255, 0.06);
        border-radius: 1rem;
        backdrop-filter: blur(12px);
        transition: all 0.3s ease;
    }
    
    .hero-stat-card:hover {
        background: rgba(255, 255, 255, 0.06);
        border-color: rgba(139, 92, 246, 0.3);
        transform: translateY(-4px);
        box-shadow: 0 12px 40px rgba(139, 92, 246, 0.15);
    }
    
    .hero-stat-icon {
        font-size: 1.25rem;
    }
    
    .hero-stat-content {
        display: flex;
        flex-direction: column;
    }
    
    .hero-stat-value {
        font-family: ui-monospace, monospace;
        font-size: 1.25rem;
        font-weight: 800;
        background: linear-gradient(135deg, #60a5fa 0%, #c084fc 100%);
        -webkit-background-clip: text;
        background-clip: text;
        -webkit-text-fill-color: transparent;
    }
    
    .hero-stat-label {
        font-size: 0.7rem;
        color: rgba(148, 163, 184, 0.7);
        text-transform: uppercase;
        letter-spacing: 0.1em;
    }
    
    /* Hero Stats - Glassmorphic Cards with Pulse */
    .hero-stat {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 0.25rem;
        padding: 0.75rem 1.25rem;
        background: rgba(255, 255, 255, 0.04);
        border: 1px solid rgba(255, 255, 255, 0.08);
        border-radius: 0.75rem;
        backdrop-filter: blur(12px);
        transition: all 0.3s ease;
    }
    
    .hero-stat:hover {
        background: rgba(255, 255, 255, 0.08);
        border-color: rgba(139, 92, 246, 0.3);
        transform: translateY(-2px);
        box-shadow: 0 8px 32px rgba(139, 92, 246, 0.15);
    }
    
    .hero-stat-value {
        font-family: ui-monospace, monospace;
        font-size: 1.5rem;
        font-weight: 800;
        background: linear-gradient(135deg, #60a5fa 0%, #a78bfa 100%);
        -webkit-background-clip: text;
        background-clip: text;
        -webkit-text-fill-color: transparent;
        animation: statPulse 3s ease infinite;
    }
    
    @keyframes statPulse {
        0%, 100% { opacity: 1; }
        50% { opacity: 0.8; }
    }
    
    .hero-stat-label {
        font-size: 0.65rem;
        color: rgba(148, 163, 184, 0.7);
        text-transform: uppercase;
        letter-spacing: 0.1em;
        letter-spacing: 0.05em;
    }
    
    /* Scroll Hint Animation */
    @keyframes scrollHint {
        0%, 100% { transform: translateY(0); opacity: 1; }
        50% { transform: translateY(6px); opacity: 0.5; }
    }
    
    .animate-scroll-hint {
        animation: scrollHint 2s ease infinite;
    }
    
    /* Fade In Up Animation */
    @keyframes fadeInUp {
        from { opacity: 0; transform: translateY(20px); }
        to { opacity: 1; transform: translateY(0); }
    }
    .animate-fade-in-up {
        opacity: 0;
        animation: fadeInUp 0.8s cubic-bezier(0.16, 1, 0.3, 1) forwards;
    }
    .delay-100 { animation-delay: 0.1s; }
    .delay-200 { animation-delay: 0.2s; }
    .delay-300 { animation-delay: 0.3s; }
    .delay-400 { animation-delay: 0.4s; }
    .delay-500 { animation-delay: 0.5s; }
    
    .animate-bounce-slow {
        animation: bounce 3s infinite;
    }
    @keyframes bounce {
        0%, 100% { transform: translate(-50%, 0); }
        50% { transform: translate(-50%, 10px); }
    }
</style>");
html_body.push_str("<!-- Hero Canvas Animation -->");
html_body.push_str("<script");
html_body.push_str(" src=\"/assets/hero.js\"");
html_body.push_str(">");
html_body.push_str("");
html_body.push_str("</script>");
html_body.push_str("<script");
html_body.push_str(" src=\"/assets/home.js\"");
html_body.push_str(">");
html_body.push_str("");
html_body.push_str("</script>");
html_body.push_str("</n:layout>");
html_body.push_str("<!-- Nucleus Client-Side Router for SPA-like navigation -->");
html_body.push_str("<script");
html_body.push_str(" src=\"/assets/router.js?v=4\"");
html_body.push_str(" defer=\"true\"");
html_body.push_str(">");
html_body.push_str("");
html_body.push_str("</script>");
html_body.push_str("<!-- Docs Script -->");
html_body.push_str("<script");
html_body.push_str(" src=\"/assets/docs.js?v=9\"");
html_body.push_str(" defer=\"true\"");
html_body.push_str(">");
html_body.push_str("");
html_body.push_str("</script>");
html_body.push_str("</body>");
html_body.push_str("</html>");

    axum::response::Html(html_body).into_response()
}

#[allow(non_snake_case, unreachable_code, unused_variables)]
async fn handle_action_index(headers: axum::http::HeaderMap, Form(params): Form<std::collections::HashMap<String, String>>) -> impl axum::response::IntoResponse {
    
        use nucleus_std::photon::query::query;
        
        let email = params.get("email").unwrap_or(&"".to_string()).clone();
        if !email.is_empty() && email.contains('@') {
            // Use Photon query builder instead of raw SQL
            match query("subscribers")
                .insert()
                .value("email", email.clone())
                .execute()
                .await
            {
                Ok(_) => println!("‚úÖ New Subscriber: {}", email),
                Err(e) => {
                    // Handle duplicate (UNIQUE constraint) gracefully
                    if e.to_string().contains("UNIQUE") {
                        println!("‚ÑπÔ∏è  Subscriber already exists: {}", email);
                    } else {
                        eprintln!("‚ùå Failed to save subscriber: {}", e);
                    }
                }
            }
        }
    
    axum::response::Html("Action Completed").into_response()
}

#[allow(non_snake_case, unreachable_code, unused_variables)]
async fn handle_admin(headers: axum::http::HeaderMap, Query(params): Query<std::collections::HashMap<String, String>>) -> impl axum::response::IntoResponse {
    let mut html_body = String::new();
html_body.push_str("<!DOCTYPE html>");
html_body.push_str("<html");
html_body.push_str(" lang=\"en\"");
html_body.push_str(">");
html_body.push_str("<head");
html_body.push_str(">");
html_body.push_str("<meta");
html_body.push_str(" charset=\"UTF-8\"");
html_body.push_str(">");
html_body.push_str("</meta>");
html_body.push_str("<meta");
html_body.push_str(" name=\"viewport\"");
html_body.push_str(" content=\"width=device-width, initial-scale=1.0\"");
html_body.push_str(">");
html_body.push_str("</meta>");
html_body.push_str("<title");
html_body.push_str(">");
html_body.push_str("Nucleus | The Hyper-Optimized Framework");
html_body.push_str("</title>");
html_body.push_str("<meta");
html_body.push_str(" name=\"description\"");
html_body.push_str(" content=\"Build high-performance full-stack apps with Rust. Zero-compromise speed, developer experience, and safety.\"");
html_body.push_str(">");
html_body.push_str("</meta>");
html_body.push_str("<!-- DNS Prefetch & Preconnect for External Resources -->");
html_body.push_str("<link");
html_body.push_str(" rel=\"dns-prefetch\"");
html_body.push_str(" href=\"//fonts.googleapis.com\"");
html_body.push_str(">");
html_body.push_str("</link>");
html_body.push_str("<link");
html_body.push_str(" rel=\"dns-prefetch\"");
html_body.push_str(" href=\"//fonts.gstatic.com\"");
html_body.push_str(">");
html_body.push_str("</link>");
html_body.push_str("<link");
html_body.push_str(" rel=\"preconnect\"");
html_body.push_str(" href=\"https://fonts.googleapis.com\"");
html_body.push_str(">");
html_body.push_str("</link>");
html_body.push_str("<link");
html_body.push_str(" rel=\"preconnect\"");
html_body.push_str(" href=\"https://fonts.gstatic.com\"");
html_body.push_str(" crossorigin=\"true\"");
html_body.push_str(">");
html_body.push_str("</link>");
html_body.push_str("<!-- Favicon -->");
html_body.push_str("<link");
html_body.push_str(" rel=\"icon\"");
html_body.push_str(" href=\"data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>‚ö°</text></svg>\"");
html_body.push_str(">");
html_body.push_str("</link>");
html_body.push_str("<!-- Critical CSS (inlined for render performance) -->");
html_body.push_str("<style");
html_body.push_str(" critical=\"true\"");
html_body.push_str(">");
html_body.push_str("\n        /* Critical above-the-fold styles */\n        body { margin: 0; background: #000; color: #ededed; font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif; }\n        .nav { position: fixed; top: 0; left: 0; right: 0; z-index: 100; padding: 16px 0; background: rgba(0,0,0,0.8); backdrop-filter: blur(20px); }\n    ");
html_body.push_str("</style>");
html_body.push_str("<!-- Main Stylesheet (non-blocking with media swap) -->");
html_body.push_str("<link");
html_body.push_str(" href=\"/assets/output.css\"");
html_body.push_str(" rel=\"stylesheet\"");
html_body.push_str(">");
html_body.push_str("</link>");
html_body.push_str("<!-- Accessibility Styles (WCAG 2.1 AA) -->");
html_body.push_str("<link");
html_body.push_str(" href=\"/assets/accessibility.css\"");
html_body.push_str(" rel=\"stylesheet\"");
html_body.push_str(">");
html_body.push_str("</link>");
html_body.push_str("<!-- Highlight.js for syntax highlighting (Local) -->");
html_body.push_str("<link");
html_body.push_str(" rel=\"stylesheet\"");
html_body.push_str(" href=\"/assets/highlight.css?v=4\"");
html_body.push_str(">");
html_body.push_str("</link>");
html_body.push_str("<script");
html_body.push_str(" src=\"/assets/highlight.min.js?v=4\"");
html_body.push_str(">");
html_body.push_str("");
html_body.push_str("</script>");
html_body.push_str("<!-- Google Fonts with font-display: swap (non-render-blocking) -->");
html_body.push_str("<link");
html_body.push_str(" href=\"https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap\"");
html_body.push_str(" rel=\"stylesheet\"");
html_body.push_str(" media=\"print\"");
html_body.push_str(" onload=\"this.media='all'\"");
html_body.push_str(">");
html_body.push_str("</link>");
html_body.push_str("<noscript");
html_body.push_str(">");
html_body.push_str("<link");
html_body.push_str(" href=\"https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap\"");
html_body.push_str(" rel=\"stylesheet\"");
html_body.push_str(">");
html_body.push_str("</link>");
html_body.push_str("</noscript>");
html_body.push_str("<link");
html_body.push_str(" rel=\"preconnect\"");
html_body.push_str(" href=\"https://fonts.googleapis.com\"");
html_body.push_str(">");
html_body.push_str("</link>");
html_body.push_str("<link");
html_body.push_str(" rel=\"preconnect\"");
html_body.push_str(" href=\"https://fonts.gstatic.com\"");
html_body.push_str(">");
html_body.push_str("</link>");
html_body.push_str("</head>");
html_body.push_str("<body");
html_body.push_str(">");
html_body.push_str("<!-- Skip Link for Keyboard Navigation (WCAG 2.4.1) -->");
html_body.push_str("<a");
html_body.push_str(" href=\"#main-content\"");
html_body.push_str(" class=\"skip-link\"");
html_body.push_str(">");
html_body.push_str("Skip to main content");
html_body.push_str("</a>");
html_body.push_str("<!-- Screen Reader Announcements (WCAG 4.1.3) -->");
html_body.push_str("<div");
html_body.push_str(" id=\"a11y-announcer\"");
html_body.push_str(" class=\"sr-only\"");
html_body.push_str(" aria-live=\"polite\"");
html_body.push_str(" aria-atomic=\"true\"");
html_body.push_str(">");
html_body.push_str("</div>");
html_body.push_str("<n:layout");
html_body.push_str(" name=\"layout\"");
html_body.push_str(">");
html_body.push_str("<link");
html_body.push_str(" rel=\"stylesheet\"");
html_body.push_str(" href=\"/static/css/style-c9845a64716d9a22.css\"");
html_body.push_str(">");
html_body.push_str("</link>");
html_body.push_str("<div");
html_body.push_str(" class=\"dashboard-grid\"");
html_body.push_str(">");
for model in [crate::controllers::newsletter::fetch_admin_data().await] {
html_body.push_str("<!-- SIDEBAR -->");
html_body.push_str("<aside");
html_body.push_str(" class=\"sidebar\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" class=\"sidebar-header\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" class=\"logo-mark\"");
html_body.push_str(">");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" style=\"font-weight: 700; font-size: 1.2rem; letter-spacing: -0.5px;\"");
html_body.push_str(">");
html_body.push_str("Nucleus Admin");
html_body.push_str("</div>");
html_body.push_str("</div>");
html_body.push_str("<nav");
html_body.push_str(" class=\"nav-list\"");
html_body.push_str(">");
html_body.push_str("<button");
html_body.push_str(" class=\"nav-item active\"");
html_body.push_str(" onclick=\"switchTab('dashboard')\"");
html_body.push_str(">");
html_body.push_str("<svg");
html_body.push_str(" fill=\"none\"");
html_body.push_str(" viewBox=\"0 0 24 24\"");
html_body.push_str(" stroke=\"currentColor\"");
html_body.push_str(">");
html_body.push_str("<path");
html_body.push_str(" stroke-linecap=\"round\"");
html_body.push_str(" stroke-linejoin=\"round\"");
html_body.push_str(" stroke-width=\"2\"");
html_body.push_str(" d=\"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z\"");
html_body.push_str(">");
html_body.push_str("</path>");
html_body.push_str("</svg>");
html_body.push_str("Dashboard\n                ");
html_body.push_str("</button>");
html_body.push_str("<button");
html_body.push_str(" class=\"nav-item\"");
html_body.push_str(" onclick=\"switchTab('subscribers')\"");
html_body.push_str(">");
html_body.push_str("<svg");
html_body.push_str(" fill=\"none\"");
html_body.push_str(" viewBox=\"0 0 24 24\"");
html_body.push_str(" stroke=\"currentColor\"");
html_body.push_str(">");
html_body.push_str("<path");
html_body.push_str(" stroke-linecap=\"round\"");
html_body.push_str(" stroke-linejoin=\"round\"");
html_body.push_str(" stroke-width=\"2\"");
html_body.push_str(" d=\"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z\"");
html_body.push_str(">");
html_body.push_str("</path>");
html_body.push_str("</svg>");
html_body.push_str("Subscribers\n                ");
html_body.push_str("</button>");
html_body.push_str("<button");
html_body.push_str(" class=\"nav-item\"");
html_body.push_str(" onclick=\"switchTab('templates')\"");
html_body.push_str(">");
html_body.push_str("<svg");
html_body.push_str(" fill=\"none\"");
html_body.push_str(" viewBox=\"0 0 24 24\"");
html_body.push_str(" stroke=\"currentColor\"");
html_body.push_str(">");
html_body.push_str("<path");
html_body.push_str(" stroke-linecap=\"round\"");
html_body.push_str(" stroke-linejoin=\"round\"");
html_body.push_str(" stroke-width=\"2\"");
html_body.push_str(" d=\"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z\"");
html_body.push_str(">");
html_body.push_str("</path>");
html_body.push_str("</svg>");
html_body.push_str("Templates\n                ");
html_body.push_str("</button>");
html_body.push_str("<button");
html_body.push_str(" class=\"nav-item\"");
html_body.push_str(" onclick=\"switchTab('broadcast')\"");
html_body.push_str(">");
html_body.push_str("<svg");
html_body.push_str(" fill=\"none\"");
html_body.push_str(" viewBox=\"0 0 24 24\"");
html_body.push_str(" stroke=\"currentColor\"");
html_body.push_str(">");
html_body.push_str("<path");
html_body.push_str(" stroke-linecap=\"round\"");
html_body.push_str(" stroke-linejoin=\"round\"");
html_body.push_str(" stroke-width=\"2\"");
html_body.push_str(" d=\"M12 19l9 2-9-18-9 18 9-2zm0 0v-8\"");
html_body.push_str(">");
html_body.push_str("</path>");
html_body.push_str("</svg>");
html_body.push_str("Broadcast\n                ");
html_body.push_str("</button>");
html_body.push_str("</nav>");
html_body.push_str("<div");
html_body.push_str(" style=\"padding-top: 1rem; border-top: 1px solid var(--border-color);\"");
html_body.push_str(">");
html_body.push_str("<form");
html_body.push_str(" action=\"/admin\"");
html_body.push_str(" method=\"POST\"");
html_body.push_str(" style=\"margin: 0;\"");
html_body.push_str(">");
html_body.push_str("<input");
html_body.push_str(" type=\"hidden\"");
html_body.push_str(" name=\"action\"");
html_body.push_str(" value=\"logout\"");
html_body.push_str(">");
html_body.push_str("</input>");
html_body.push_str("<button");
html_body.push_str(" type=\"submit\"");
html_body.push_str(" class=\"nav-item\"");
html_body.push_str(" style=\"color: #ef4444; width: 100%; text-align: left; justify-content: flex-start; cursor: pointer; background: transparent; border: none; font-size: 0.95rem; font-family: inherit;\"");
html_body.push_str(">");
html_body.push_str("<svg");
html_body.push_str(" fill=\"none\"");
html_body.push_str(" viewBox=\"0 0 24 24\"");
html_body.push_str(" stroke=\"currentColor\"");
html_body.push_str(" style=\"width: 20px; height: 20px; margin-right: 0.75rem;\"");
html_body.push_str(">");
html_body.push_str("<path");
html_body.push_str(" stroke-linecap=\"round\"");
html_body.push_str(" stroke-linejoin=\"round\"");
html_body.push_str(" stroke-width=\"2\"");
html_body.push_str(" d=\"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1\"");
html_body.push_str(">");
html_body.push_str("</path>");
html_body.push_str("</svg>");
html_body.push_str("Logout\n                    ");
html_body.push_str("</button>");
html_body.push_str("</form>");
html_body.push_str("</div>");
html_body.push_str("</aside>");
html_body.push_str("<!-- MAIN CONTENT -->");
html_body.push_str("<main");
html_body.push_str(" class=\"main-content\"");
html_body.push_str(">");
html_body.push_str("<!-- VIEW: DASHBOARD -->");
html_body.push_str("<div");
html_body.push_str(" id=\"tab-dashboard\"");
html_body.push_str(" class=\"tab-content active\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" class=\"page-header\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(">");
html_body.push_str("<h1");
html_body.push_str(" class=\"page-title\"");
html_body.push_str(">");
html_body.push_str("Dashboard");
html_body.push_str("</h1>");
html_body.push_str("<p");
html_body.push_str(" style=\"margin: 0.25rem 0 0; color: var(--text-dim); font-size: 0.9rem;\"");
html_body.push_str(">");
html_body.push_str("Welcome back! Here's your newsletter overview.");
html_body.push_str("</p>");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" style=\"display: flex; gap: 0.75rem;\"");
html_body.push_str(">");
html_body.push_str("<button");
html_body.push_str(" class=\"btn btn-secondary\"");
html_body.push_str(" onclick=\"switchTab('subscribers')\"");
html_body.push_str(">");
html_body.push_str("<svg");
html_body.push_str(" width=\"16\"");
html_body.push_str(" height=\"16\"");
html_body.push_str(" viewBox=\"0 0 24 24\"");
html_body.push_str(" fill=\"none\"");
html_body.push_str(" stroke=\"currentColor\"");
html_body.push_str(" stroke-width=\"2\"");
html_body.push_str(">");
html_body.push_str("<path");
html_body.push_str(" d=\"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2\"");
html_body.push_str(">");
html_body.push_str("</path>");
html_body.push_str("<circle");
html_body.push_str(" cx=\"9\"");
html_body.push_str(" cy=\"7\"");
html_body.push_str(" r=\"4\"");
html_body.push_str(">");
html_body.push_str("</circle>");
html_body.push_str("<path");
html_body.push_str(" d=\"M23 21v-2a4 4 0 0 0-3-3.87\"");
html_body.push_str(">");
html_body.push_str("</path>");
html_body.push_str("<path");
html_body.push_str(" d=\"M16 3.13a4 4 0 0 1 0 7.75\"");
html_body.push_str(">");
html_body.push_str("</path>");
html_body.push_str("</svg>");
html_body.push_str("Subscribers\n                        ");
html_body.push_str("</button>");
html_body.push_str("<button");
html_body.push_str(" class=\"btn btn-primary\"");
html_body.push_str(" onclick=\"switchTab('broadcast')\"");
html_body.push_str(">");
html_body.push_str("<svg");
html_body.push_str(" width=\"16\"");
html_body.push_str(" height=\"16\"");
html_body.push_str(" viewBox=\"0 0 24 24\"");
html_body.push_str(" fill=\"none\"");
html_body.push_str(" stroke=\"currentColor\"");
html_body.push_str(" stroke-width=\"2\"");
html_body.push_str(">");
html_body.push_str("<path");
html_body.push_str(" d=\"M22 2L11 13\"");
html_body.push_str(">");
html_body.push_str("</path>");
html_body.push_str("<path");
html_body.push_str(" d=\"M22 2l-7 20-4-9-9-4 20-7z\"");
html_body.push_str(">");
html_body.push_str("</path>");
html_body.push_str("</svg>");
html_body.push_str("New Broadcast\n                        ");
html_body.push_str("</button>");
html_body.push_str("</div>");
html_body.push_str("</div>");
html_body.push_str("<!-- Stats Grid -->");
html_body.push_str("<div");
html_body.push_str(" class=\"stat-grid\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" class=\"glass-panel stat-card\"");
html_body.push_str(" onclick=\"switchTab('subscribers')\"");
html_body.push_str(" style=\"cursor: pointer;\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" style=\"display: flex; justify-content: space-between; align-items: flex-start;\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(">");
html_body.push_str("<span");
html_body.push_str(" class=\"stat-val\"");
html_body.push_str(">");
html_body.push_str(&format!("{}", model.subscribers.len()));
html_body.push_str("</span>");
html_body.push_str("<span");
html_body.push_str(" class=\"stat-label\"");
html_body.push_str(">");
html_body.push_str("Total Subscribers");
html_body.push_str("</span>");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" style=\"width: 48px; height: 48px; background: linear-gradient(135deg, rgba(16, 185, 129, 0.2), rgba(16, 185, 129, 0.1)); border-radius: 12px; display: flex; align-items: center; justify-content: center;\"");
html_body.push_str(">");
html_body.push_str("<svg");
html_body.push_str(" width=\"24\"");
html_body.push_str(" height=\"24\"");
html_body.push_str(" viewBox=\"0 0 24 24\"");
html_body.push_str(" fill=\"none\"");
html_body.push_str(" stroke=\"#10b981\"");
html_body.push_str(" stroke-width=\"2\"");
html_body.push_str(">");
html_body.push_str("<path");
html_body.push_str(" d=\"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2\"");
html_body.push_str(">");
html_body.push_str("</path>");
html_body.push_str("<circle");
html_body.push_str(" cx=\"9\"");
html_body.push_str(" cy=\"7\"");
html_body.push_str(" r=\"4\"");
html_body.push_str(">");
html_body.push_str("</circle>");
html_body.push_str("<path");
html_body.push_str(" d=\"M23 21v-2a4 4 0 0 0-3-3.87\"");
html_body.push_str(">");
html_body.push_str("</path>");
html_body.push_str("<path");
html_body.push_str(" d=\"M16 3.13a4 4 0 0 1 0 7.75\"");
html_body.push_str(">");
html_body.push_str("</path>");
html_body.push_str("</svg>");
html_body.push_str("</div>");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" style=\"margin-top: 1rem; font-size: 0.8rem; color: var(--accent-success);\"");
html_body.push_str(">");
html_body.push_str("<span");
html_body.push_str(" style=\"display: inline-flex; align-items: center; gap: 0.25rem;\"");
html_body.push_str(">");
html_body.push_str("<svg");
html_body.push_str(" width=\"12\"");
html_body.push_str(" height=\"12\"");
html_body.push_str(" viewBox=\"0 0 24 24\"");
html_body.push_str(" fill=\"none\"");
html_body.push_str(" stroke=\"currentColor\"");
html_body.push_str(" stroke-width=\"2\"");
html_body.push_str(">");
html_body.push_str("<path");
html_body.push_str(" d=\"M23 6l-9.5 9.5-5-5L1 18\"");
html_body.push_str(">");
html_body.push_str("</path>");
html_body.push_str("</svg>");
html_body.push_str("Growing\n                            ");
html_body.push_str("</span>");
html_body.push_str("</div>");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" class=\"glass-panel stat-card\"");
html_body.push_str(" onclick=\"switchTab('templates')\"");
html_body.push_str(" style=\"cursor: pointer;\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" style=\"display: flex; justify-content: space-between; align-items: flex-start;\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(">");
html_body.push_str("<span");
html_body.push_str(" class=\"stat-val\"");
html_body.push_str(">");
html_body.push_str(&format!("{}", model.templates.len()));
html_body.push_str("</span>");
html_body.push_str("<span");
html_body.push_str(" class=\"stat-label\"");
html_body.push_str(">");
html_body.push_str("Email Templates");
html_body.push_str("</span>");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" style=\"width: 48px; height: 48px; background: linear-gradient(135deg, rgba(139, 92, 246, 0.2), rgba(139, 92, 246, 0.1)); border-radius: 12px; display: flex; align-items: center; justify-content: center;\"");
html_body.push_str(">");
html_body.push_str("<svg");
html_body.push_str(" width=\"24\"");
html_body.push_str(" height=\"24\"");
html_body.push_str(" viewBox=\"0 0 24 24\"");
html_body.push_str(" fill=\"none\"");
html_body.push_str(" stroke=\"#8b5cf6\"");
html_body.push_str(" stroke-width=\"2\"");
html_body.push_str(">");
html_body.push_str("<path");
html_body.push_str(" d=\"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z\"");
html_body.push_str(">");
html_body.push_str("</path>");
html_body.push_str("<polyline");
html_body.push_str(" points=\"22,6 12,13 2,6\"");
html_body.push_str(">");
html_body.push_str("</polyline>");
html_body.push_str("</svg>");
html_body.push_str("</div>");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" style=\"margin-top: 1rem; font-size: 0.8rem; color: var(--text-dim);\"");
html_body.push_str(">");
html_body.push_str("Click to manage ‚Üí");
html_body.push_str("</div>");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" class=\"glass-panel stat-card\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" style=\"display: flex; justify-content: space-between; align-items: flex-start;\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(">");
html_body.push_str("<span");
html_body.push_str(" class=\"stat-val\"");
html_body.push_str(">");
html_body.push_str("‚Äî");
html_body.push_str("</span>");
html_body.push_str("<span");
html_body.push_str(" class=\"stat-label\"");
html_body.push_str(">");
html_body.push_str("Emails Sent");
html_body.push_str("</span>");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" style=\"width: 48px; height: 48px; background: linear-gradient(135deg, rgba(6, 182, 212, 0.2), rgba(6, 182, 212, 0.1)); border-radius: 12px; display: flex; align-items: center; justify-content: center;\"");
html_body.push_str(">");
html_body.push_str("<svg");
html_body.push_str(" width=\"24\"");
html_body.push_str(" height=\"24\"");
html_body.push_str(" viewBox=\"0 0 24 24\"");
html_body.push_str(" fill=\"none\"");
html_body.push_str(" stroke=\"#06b6d4\"");
html_body.push_str(" stroke-width=\"2\"");
html_body.push_str(">");
html_body.push_str("<path");
html_body.push_str(" d=\"M22 2L11 13\"");
html_body.push_str(">");
html_body.push_str("</path>");
html_body.push_str("<path");
html_body.push_str(" d=\"M22 2l-7 20-4-9-9-4 20-7z\"");
html_body.push_str(">");
html_body.push_str("</path>");
html_body.push_str("</svg>");
html_body.push_str("</div>");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" style=\"margin-top: 1rem; font-size: 0.8rem; color: var(--text-dim);\"");
html_body.push_str(">");
html_body.push_str("Send your first broadcast!");
html_body.push_str("</div>");
html_body.push_str("</div>");
html_body.push_str("</div>");
html_body.push_str("<!-- Quick Actions & Recent Activity -->");
html_body.push_str("<div");
html_body.push_str(" style=\"display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem;\"");
html_body.push_str(">");
html_body.push_str("<!-- Quick Actions -->");
html_body.push_str("<div");
html_body.push_str(" class=\"glass-panel\"");
html_body.push_str(" style=\"padding: 1.5rem;\"");
html_body.push_str(">");
html_body.push_str("<h3");
html_body.push_str(" style=\"margin: 0 0 1.25rem; font-size: 1rem; font-weight: 600; display: flex; align-items: center; gap: 0.5rem;\"");
html_body.push_str(">");
html_body.push_str("<svg");
html_body.push_str(" width=\"18\"");
html_body.push_str(" height=\"18\"");
html_body.push_str(" viewBox=\"0 0 24 24\"");
html_body.push_str(" fill=\"none\"");
html_body.push_str(" stroke=\"currentColor\"");
html_body.push_str(" stroke-width=\"2\"");
html_body.push_str(">");
html_body.push_str("<polygon");
html_body.push_str(" points=\"13 2 3 14 12 14 11 22 21 10 12 10 13 2\"");
html_body.push_str(">");
html_body.push_str("</polygon>");
html_body.push_str("</svg>");
html_body.push_str("Quick Actions\n                        ");
html_body.push_str("</h3>");
html_body.push_str("<div");
html_body.push_str(" style=\"display: flex; flex-direction: column; gap: 0.75rem;\"");
html_body.push_str(">");
html_body.push_str("<button");
html_body.push_str(" class=\"btn btn-secondary\"");
html_body.push_str(" onclick=\"switchTab('templates'); setTimeout(() => resetTemplateForm(), 100);\"");
html_body.push_str(" style=\"justify-content: flex-start; width: 100%;\"");
html_body.push_str(">");
html_body.push_str("<svg");
html_body.push_str(" width=\"16\"");
html_body.push_str(" height=\"16\"");
html_body.push_str(" viewBox=\"0 0 24 24\"");
html_body.push_str(" fill=\"none\"");
html_body.push_str(" stroke=\"currentColor\"");
html_body.push_str(" stroke-width=\"2\"");
html_body.push_str(">");
html_body.push_str("<line");
html_body.push_str(" x1=\"12\"");
html_body.push_str(" y1=\"5\"");
html_body.push_str(" x2=\"12\"");
html_body.push_str(" y2=\"19\"");
html_body.push_str(">");
html_body.push_str("</line>");
html_body.push_str("<line");
html_body.push_str(" x1=\"5\"");
html_body.push_str(" y1=\"12\"");
html_body.push_str(" x2=\"19\"");
html_body.push_str(" y2=\"12\"");
html_body.push_str(">");
html_body.push_str("</line>");
html_body.push_str("</svg>");
html_body.push_str("Create New Template\n                            ");
html_body.push_str("</button>");
html_body.push_str("<button");
html_body.push_str(" class=\"btn btn-secondary\"");
html_body.push_str(" onclick=\"switchTab('broadcast')\"");
html_body.push_str(" style=\"justify-content: flex-start; width: 100%;\"");
html_body.push_str(">");
html_body.push_str("<svg");
html_body.push_str(" width=\"16\"");
html_body.push_str(" height=\"16\"");
html_body.push_str(" viewBox=\"0 0 24 24\"");
html_body.push_str(" fill=\"none\"");
html_body.push_str(" stroke=\"currentColor\"");
html_body.push_str(" stroke-width=\"2\"");
html_body.push_str(">");
html_body.push_str("<path");
html_body.push_str(" d=\"M22 2L11 13\"");
html_body.push_str(">");
html_body.push_str("</path>");
html_body.push_str("<path");
html_body.push_str(" d=\"M22 2l-7 20-4-9-9-4 20-7z\"");
html_body.push_str(">");
html_body.push_str("</path>");
html_body.push_str("</svg>");
html_body.push_str("Send Broadcast\n                            ");
html_body.push_str("</button>");
html_body.push_str("<a");
html_body.push_str(" href=\"/api/newsletter/export\"");
html_body.push_str(" class=\"btn btn-secondary\"");
html_body.push_str(" style=\"justify-content: flex-start; width: 100%; text-decoration: none;\"");
html_body.push_str(">");
html_body.push_str("<svg");
html_body.push_str(" width=\"16\"");
html_body.push_str(" height=\"16\"");
html_body.push_str(" viewBox=\"0 0 24 24\"");
html_body.push_str(" fill=\"none\"");
html_body.push_str(" stroke=\"currentColor\"");
html_body.push_str(" stroke-width=\"2\"");
html_body.push_str(">");
html_body.push_str("<path");
html_body.push_str(" d=\"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4\"");
html_body.push_str(">");
html_body.push_str("</path>");
html_body.push_str("<polyline");
html_body.push_str(" points=\"7 10 12 15 17 10\"");
html_body.push_str(">");
html_body.push_str("</polyline>");
html_body.push_str("<line");
html_body.push_str(" x1=\"12\"");
html_body.push_str(" y1=\"15\"");
html_body.push_str(" x2=\"12\"");
html_body.push_str(" y2=\"3\"");
html_body.push_str(">");
html_body.push_str("</line>");
html_body.push_str("</svg>");
html_body.push_str("Export Subscribers\n                            ");
html_body.push_str("</a>");
html_body.push_str("</div>");
html_body.push_str("</div>");
html_body.push_str("<!-- Getting Started -->");
html_body.push_str("<div");
html_body.push_str(" class=\"glass-panel\"");
html_body.push_str(" style=\"padding: 1.5rem;\"");
html_body.push_str(">");
html_body.push_str("<h3");
html_body.push_str(" style=\"margin: 0 0 1.25rem; font-size: 1rem; font-weight: 600; display: flex; align-items: center; gap: 0.5rem;\"");
html_body.push_str(">");
html_body.push_str("<svg");
html_body.push_str(" width=\"18\"");
html_body.push_str(" height=\"18\"");
html_body.push_str(" viewBox=\"0 0 24 24\"");
html_body.push_str(" fill=\"none\"");
html_body.push_str(" stroke=\"currentColor\"");
html_body.push_str(" stroke-width=\"2\"");
html_body.push_str(">");
html_body.push_str("<circle");
html_body.push_str(" cx=\"12\"");
html_body.push_str(" cy=\"12\"");
html_body.push_str(" r=\"10\"");
html_body.push_str(">");
html_body.push_str("</circle>");
html_body.push_str("<path");
html_body.push_str(" d=\"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3\"");
html_body.push_str(">");
html_body.push_str("</path>");
html_body.push_str("<line");
html_body.push_str(" x1=\"12\"");
html_body.push_str(" y1=\"17\"");
html_body.push_str(" x2=\"12.01\"");
html_body.push_str(" y2=\"17\"");
html_body.push_str(">");
html_body.push_str("</line>");
html_body.push_str("</svg>");
html_body.push_str("Getting Started\n                        ");
html_body.push_str("</h3>");
html_body.push_str("<div");
html_body.push_str(" style=\"display: flex; flex-direction: column; gap: 0.75rem;\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" style=\"display: flex; align-items: center; gap: 0.75rem; padding: 0.75rem; background: var(--glass-strong); border-radius: 8px;\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" style=\"width: 24px; height: 24px; background: var(--accent-success); border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0;\"");
html_body.push_str(">");
html_body.push_str("<svg");
html_body.push_str(" width=\"14\"");
html_body.push_str(" height=\"14\"");
html_body.push_str(" viewBox=\"0 0 24 24\"");
html_body.push_str(" fill=\"none\"");
html_body.push_str(" stroke=\"white\"");
html_body.push_str(" stroke-width=\"3\"");
html_body.push_str(">");
html_body.push_str("<polyline");
html_body.push_str(" points=\"20 6 9 17 4 12\"");
html_body.push_str(">");
html_body.push_str("</polyline>");
html_body.push_str("</svg>");
html_body.push_str("</div>");
html_body.push_str("<span");
html_body.push_str(" style=\"font-size: 0.875rem;\"");
html_body.push_str(">");
html_body.push_str("Create your first template");
html_body.push_str("</span>");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" style=\"display: flex; align-items: center; gap: 0.75rem; padding: 0.75rem; background: var(--glass-strong); border-radius: 8px;\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" style=\"width: 24px; height: 24px; background: var(--border-color); border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0; color: var(--text-dim);\"");
html_body.push_str(">");
html_body.push_str("2");
html_body.push_str("</div>");
html_body.push_str("<span");
html_body.push_str(" style=\"font-size: 0.875rem; color: var(--text-muted);\"");
html_body.push_str(">");
html_body.push_str("Grow your subscriber list");
html_body.push_str("</span>");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" style=\"display: flex; align-items: center; gap: 0.75rem; padding: 0.75rem; background: var(--glass-strong); border-radius: 8px;\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" style=\"width: 24px; height: 24px; background: var(--border-color); border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0; color: var(--text-dim);\"");
html_body.push_str(">");
html_body.push_str("3");
html_body.push_str("</div>");
html_body.push_str("<span");
html_body.push_str(" style=\"font-size: 0.875rem; color: var(--text-muted);\"");
html_body.push_str(">");
html_body.push_str("Send your first broadcast");
html_body.push_str("</span>");
html_body.push_str("</div>");
html_body.push_str("</div>");
html_body.push_str("</div>");
html_body.push_str("</div>");
html_body.push_str("</div>");
html_body.push_str("<!-- VIEW: SUBSCRIBERS -->");
html_body.push_str("<div");
html_body.push_str(" id=\"tab-subscribers\"");
html_body.push_str(" class=\"tab-content hidden\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" class=\"page-header\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(">");
html_body.push_str("<h1");
html_body.push_str(" class=\"page-title\"");
html_body.push_str(">");
html_body.push_str("Subscribers");
html_body.push_str("</h1>");
html_body.push_str("<p");
html_body.push_str(" style=\"margin: 0.25rem 0 0; color: var(--text-dim); font-size: 0.9rem;\"");
html_body.push_str(">");
html_body.push_str("Manage your newsletter audience");
html_body.push_str("</p>");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" style=\"display: flex; gap: 0.75rem;\"");
html_body.push_str(">");
html_body.push_str("<a");
html_body.push_str(" href=\"/api/newsletter/export\"");
html_body.push_str(" class=\"btn btn-secondary\"");
html_body.push_str(">");
html_body.push_str("<svg");
html_body.push_str(" width=\"16\"");
html_body.push_str(" height=\"16\"");
html_body.push_str(" viewBox=\"0 0 24 24\"");
html_body.push_str(" fill=\"none\"");
html_body.push_str(" stroke=\"currentColor\"");
html_body.push_str(" stroke-width=\"2\"");
html_body.push_str(">");
html_body.push_str("<path");
html_body.push_str(" d=\"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4\"");
html_body.push_str(">");
html_body.push_str("</path>");
html_body.push_str("<polyline");
html_body.push_str(" points=\"7 10 12 15 17 10\"");
html_body.push_str(">");
html_body.push_str("</polyline>");
html_body.push_str("<line");
html_body.push_str(" x1=\"12\"");
html_body.push_str(" y1=\"15\"");
html_body.push_str(" x2=\"12\"");
html_body.push_str(" y2=\"3\"");
html_body.push_str(">");
html_body.push_str("</line>");
html_body.push_str("</svg>");
html_body.push_str("Export CSV\n                        ");
html_body.push_str("</a>");
html_body.push_str("</div>");
html_body.push_str("</div>");
html_body.push_str("<!-- Stats Row -->");
html_body.push_str("<div");
html_body.push_str(" style=\"display: grid; grid-template-columns: repeat(3, 1fr); gap: 1rem; margin-bottom: 1.5rem;\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" class=\"glass-panel\"");
html_body.push_str(" style=\"padding: 1rem; display: flex; align-items: center; gap: 1rem;\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" style=\"width: 40px; height: 40px; background: linear-gradient(135deg, rgba(16, 185, 129, 0.2), rgba(16, 185, 129, 0.1)); border-radius: 10px; display: flex; align-items: center; justify-content: center;\"");
html_body.push_str(">");
html_body.push_str("<svg");
html_body.push_str(" width=\"20\"");
html_body.push_str(" height=\"20\"");
html_body.push_str(" viewBox=\"0 0 24 24\"");
html_body.push_str(" fill=\"none\"");
html_body.push_str(" stroke=\"#10b981\"");
html_body.push_str(" stroke-width=\"2\"");
html_body.push_str(">");
html_body.push_str("<path");
html_body.push_str(" d=\"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2\"");
html_body.push_str(">");
html_body.push_str("</path>");
html_body.push_str("<circle");
html_body.push_str(" cx=\"9\"");
html_body.push_str(" cy=\"7\"");
html_body.push_str(" r=\"4\"");
html_body.push_str(">");
html_body.push_str("</circle>");
html_body.push_str("</svg>");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" style=\"font-size: 1.25rem; font-weight: 700;\"");
html_body.push_str(">");
html_body.push_str(&format!("{}", model.subscribers.len()));
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" style=\"font-size: 0.75rem; color: var(--text-dim); text-transform: uppercase; letter-spacing: 0.05em;\"");
html_body.push_str(">");
html_body.push_str("Total");
html_body.push_str("</div>");
html_body.push_str("</div>");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" class=\"glass-panel\"");
html_body.push_str(" style=\"padding: 1rem; display: flex; align-items: center; gap: 1rem;\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" style=\"width: 40px; height: 40px; background: linear-gradient(135deg, rgba(139, 92, 246, 0.2), rgba(139, 92, 246, 0.1)); border-radius: 10px; display: flex; align-items: center; justify-content: center;\"");
html_body.push_str(">");
html_body.push_str("<svg");
html_body.push_str(" width=\"20\"");
html_body.push_str(" height=\"20\"");
html_body.push_str(" viewBox=\"0 0 24 24\"");
html_body.push_str(" fill=\"none\"");
html_body.push_str(" stroke=\"#8b5cf6\"");
html_body.push_str(" stroke-width=\"2\"");
html_body.push_str(">");
html_body.push_str("<polyline");
html_body.push_str(" points=\"23 6 13.5 15.5 8.5 10.5 1 18\"");
html_body.push_str(">");
html_body.push_str("</polyline>");
html_body.push_str("<polyline");
html_body.push_str(" points=\"17 6 23 6 23 12\"");
html_body.push_str(">");
html_body.push_str("</polyline>");
html_body.push_str("</svg>");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" style=\"font-size: 1.25rem; font-weight: 700;\"");
html_body.push_str(">");
html_body.push_str("‚Äî");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" style=\"font-size: 0.75rem; color: var(--text-dim); text-transform: uppercase; letter-spacing: 0.05em;\"");
html_body.push_str(">");
html_body.push_str("This Week");
html_body.push_str("</div>");
html_body.push_str("</div>");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" class=\"glass-panel\"");
html_body.push_str(" style=\"padding: 1rem; display: flex; align-items: center; gap: 1rem;\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" style=\"width: 40px; height: 40px; background: linear-gradient(135deg, rgba(6, 182, 212, 0.2), rgba(6, 182, 212, 0.1)); border-radius: 10px; display: flex; align-items: center; justify-content: center;\"");
html_body.push_str(">");
html_body.push_str("<svg");
html_body.push_str(" width=\"20\"");
html_body.push_str(" height=\"20\"");
html_body.push_str(" viewBox=\"0 0 24 24\"");
html_body.push_str(" fill=\"none\"");
html_body.push_str(" stroke=\"#06b6d4\"");
html_body.push_str(" stroke-width=\"2\"");
html_body.push_str(">");
html_body.push_str("<path");
html_body.push_str(" d=\"M22 11.08V12a10 10 0 1 1-5.93-9.14\"");
html_body.push_str(">");
html_body.push_str("</path>");
html_body.push_str("<polyline");
html_body.push_str(" points=\"22 4 12 14.01 9 11.01\"");
html_body.push_str(">");
html_body.push_str("</polyline>");
html_body.push_str("</svg>");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" style=\"font-size: 1.25rem; font-weight: 700;\"");
html_body.push_str(">");
html_body.push_str("100%");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" style=\"font-size: 0.75rem; color: var(--text-dim); text-transform: uppercase; letter-spacing: 0.05em;\"");
html_body.push_str(">");
html_body.push_str("Active");
html_body.push_str("</div>");
html_body.push_str("</div>");
html_body.push_str("</div>");
html_body.push_str("</div>");
html_body.push_str("<!-- Search Bar -->");
html_body.push_str("<div");
html_body.push_str(" style=\"margin-bottom: 1rem;\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" style=\"position: relative; max-width: 400px;\"");
html_body.push_str(">");
html_body.push_str("<svg");
html_body.push_str(" width=\"18\"");
html_body.push_str(" height=\"18\"");
html_body.push_str(" viewBox=\"0 0 24 24\"");
html_body.push_str(" fill=\"none\"");
html_body.push_str(" stroke=\"currentColor\"");
html_body.push_str(" stroke-width=\"2\"");
html_body.push_str(" style=\"position: absolute; left: 1rem; top: 50%; transform: translateY(-50%); color: var(--text-dim);\"");
html_body.push_str(">");
html_body.push_str("<circle");
html_body.push_str(" cx=\"11\"");
html_body.push_str(" cy=\"11\"");
html_body.push_str(" r=\"8\"");
html_body.push_str(">");
html_body.push_str("</circle>");
html_body.push_str("<line");
html_body.push_str(" x1=\"21\"");
html_body.push_str(" y1=\"21\"");
html_body.push_str(" x2=\"16.65\"");
html_body.push_str(" y2=\"16.65\"");
html_body.push_str(">");
html_body.push_str("</line>");
html_body.push_str("</svg>");
html_body.push_str("<input");
html_body.push_str(" type=\"text\"");
html_body.push_str(" id=\"subscriber-search\"");
html_body.push_str(" class=\"form-input\"");
html_body.push_str(" placeholder=\"Search subscribers...\"");
html_body.push_str(" style=\"padding-left: 2.75rem;\"");
html_body.push_str(" oninput=\"filterSubscribers(this.value)\"");
html_body.push_str(">");
html_body.push_str("</input>");
html_body.push_str("</div>");
html_body.push_str("</div>");
html_body.push_str("<!-- Table -->");
html_body.push_str("<div");
html_body.push_str(" class=\"glass-panel\"");
html_body.push_str(" style=\"overflow: hidden;\"");
html_body.push_str(">");
if model.subscribers.is_empty() {
html_body.push_str("<!-- Empty State -->");
html_body.push_str("<div");
html_body.push_str(" style=\"padding: 4rem 2rem; text-align: center;\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" style=\"width: 80px; height: 80px; margin: 0 auto 1.5rem; background: linear-gradient(135deg, rgba(139, 92, 246, 0.15), rgba(6, 182, 212, 0.15)); border-radius: 50%; display: flex; align-items: center; justify-content: center;\"");
html_body.push_str(">");
html_body.push_str("<svg");
html_body.push_str(" width=\"40\"");
html_body.push_str(" height=\"40\"");
html_body.push_str(" viewBox=\"0 0 24 24\"");
html_body.push_str(" fill=\"none\"");
html_body.push_str(" stroke=\"var(--accent-primary)\"");
html_body.push_str(" stroke-width=\"1.5\"");
html_body.push_str(">");
html_body.push_str("<path");
html_body.push_str(" d=\"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2\"");
html_body.push_str(">");
html_body.push_str("</path>");
html_body.push_str("<circle");
html_body.push_str(" cx=\"9\"");
html_body.push_str(" cy=\"7\"");
html_body.push_str(" r=\"4\"");
html_body.push_str(">");
html_body.push_str("</circle>");
html_body.push_str("<path");
html_body.push_str(" d=\"M23 21v-2a4 4 0 0 0-3-3.87\"");
html_body.push_str(">");
html_body.push_str("</path>");
html_body.push_str("<path");
html_body.push_str(" d=\"M16 3.13a4 4 0 0 1 0 7.75\"");
html_body.push_str(">");
html_body.push_str("</path>");
html_body.push_str("</svg>");
html_body.push_str("</div>");
html_body.push_str("<h3");
html_body.push_str(" style=\"margin: 0 0 0.5rem; font-size: 1.25rem; font-weight: 600;\"");
html_body.push_str(">");
html_body.push_str("No subscribers yet");
html_body.push_str("</h3>");
html_body.push_str("<p");
html_body.push_str(" style=\"margin: 0 0 1.5rem; color: var(--text-muted); max-width: 400px; margin-left: auto; margin-right: auto;\"");
html_body.push_str(">");
html_body.push_str("Start growing your audience! Share your newsletter signup form and watch your community grow.\n                        ");
html_body.push_str("</p>");
html_body.push_str("<button");
html_body.push_str(" class=\"btn btn-primary\"");
html_body.push_str(" onclick=\"navigator.clipboard.writeText(window.location.origin + '/'); showToast('Homepage URL copied!');\"");
html_body.push_str(">");
html_body.push_str("<svg");
html_body.push_str(" width=\"16\"");
html_body.push_str(" height=\"16\"");
html_body.push_str(" viewBox=\"0 0 24 24\"");
html_body.push_str(" fill=\"none\"");
html_body.push_str(" stroke=\"currentColor\"");
html_body.push_str(" stroke-width=\"2\"");
html_body.push_str(">");
html_body.push_str("<rect");
html_body.push_str(" x=\"9\"");
html_body.push_str(" y=\"9\"");
html_body.push_str(" width=\"13\"");
html_body.push_str(" height=\"13\"");
html_body.push_str(" rx=\"2\"");
html_body.push_str(" ry=\"2\"");
html_body.push_str(">");
html_body.push_str("</rect>");
html_body.push_str("<path");
html_body.push_str(" d=\"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1\"");
html_body.push_str(">");
html_body.push_str("</path>");
html_body.push_str("</svg>");
html_body.push_str("Copy Signup Link\n                        ");
html_body.push_str("</button>");
html_body.push_str("</div>");
}
if !model.subscribers.is_empty() {
html_body.push_str("<div");
html_body.push_str(" style=\"overflow-x: auto;\"");
html_body.push_str(">");
html_body.push_str("<table");
html_body.push_str(" id=\"subscribers-table\"");
html_body.push_str(">");
html_body.push_str("<thead");
html_body.push_str(">");
html_body.push_str("<tr");
html_body.push_str(">");
html_body.push_str("<th");
html_body.push_str(" style=\"width: 50px;\"");
html_body.push_str(">");
html_body.push_str("</th>");
html_body.push_str("<th");
html_body.push_str(">");
html_body.push_str("Email");
html_body.push_str("</th>");
html_body.push_str("<th");
html_body.push_str(">");
html_body.push_str("Joined");
html_body.push_str("</th>");
html_body.push_str("<th");
html_body.push_str(" style=\"width: 100px; text-align: center;\"");
html_body.push_str(">");
html_body.push_str("Status");
html_body.push_str("</th>");
html_body.push_str("<th");
html_body.push_str(" style=\"width: 100px; text-align: right;\"");
html_body.push_str(">");
html_body.push_str("Actions");
html_body.push_str("</th>");
html_body.push_str("</tr>");
html_body.push_str("</thead>");
html_body.push_str("<tbody");
html_body.push_str(">");
for sub in &model.subscribers {
html_body.push_str("<tr");
html_body.push_str(" class=\"subscriber-row\"");
html_body.push_str(&format!(" data-email=\"{}\"", sub.email));
html_body.push_str(">");
html_body.push_str("<td");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" style=\"width: 36px; height: 36px; background: linear-gradient(135deg, #8b5cf6, #06b6d4); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 600; font-size: 0.8rem; color: white; text-transform: uppercase;\"");
html_body.push_str(">");
html_body.push_str(&format!("{}", sub.email.chars().next().unwrap_or('?')));
html_body.push_str("</div>");
html_body.push_str("</td>");
html_body.push_str("<td");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" style=\"font-weight: 500;\"");
html_body.push_str(">");
html_body.push_str(&format!("{}", sub.email));
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" style=\"font-size: 0.75rem; color: var(--text-dim);\"");
html_body.push_str(">");
html_body.push_str("#");
html_body.push_str(&format!("{}", sub.id));
html_body.push_str("</div>");
html_body.push_str("</td>");
html_body.push_str("<td");
html_body.push_str(" style=\"color: var(--text-muted); font-size: 0.875rem;\"");
html_body.push_str(">");
html_body.push_str(&format!("{}", sub.created_at));
html_body.push_str("</td>");
html_body.push_str("<td");
html_body.push_str(" style=\"text-align: center;\"");
html_body.push_str(">");
html_body.push_str("<span");
html_body.push_str(" style=\"display: inline-flex; align-items: center; gap: 0.25rem; padding: 0.25rem 0.5rem; background: rgba(16, 185, 129, 0.15); color: #10b981; border-radius: 9999px; font-size: 0.7rem; font-weight: 600; text-transform: uppercase;\"");
html_body.push_str(">");
html_body.push_str("<span");
html_body.push_str(" style=\"width: 6px; height: 6px; background: currentColor; border-radius: 50%;\"");
html_body.push_str(">");
html_body.push_str("</span>");
html_body.push_str("Active\n                                        ");
html_body.push_str("</span>");
html_body.push_str("</td>");
html_body.push_str("<td");
html_body.push_str(" style=\"text-align: right;\"");
html_body.push_str(">");
html_body.push_str("<form");
html_body.push_str(" method=\"POST\"");
html_body.push_str(" onsubmit=\"return confirmFormSubmit(this, 'Remove Subscriber', 'Are you sure you want to remove this subscriber? This action cannot be undone.');\"");
html_body.push_str(" style=\"display:inline;\"");
html_body.push_str(">");
html_body.push_str("<input");
html_body.push_str(" type=\"hidden\"");
html_body.push_str(" name=\"action\"");
html_body.push_str(" value=\"delete_subscriber\"");
html_body.push_str(">");
html_body.push_str("</input>");
html_body.push_str("<input");
html_body.push_str(" type=\"hidden\"");
html_body.push_str(" name=\"id\"");
html_body.push_str(&format!(" value=\"{}\"", sub.id));
html_body.push_str(">");
html_body.push_str("</input>");
html_body.push_str("<button");
html_body.push_str(" type=\"submit\"");
html_body.push_str(" class=\"btn btn-ghost\"");
html_body.push_str(" style=\"padding: 0.4rem; color: var(--text-muted);\"");
html_body.push_str(" title=\"Remove subscriber\"");
html_body.push_str(">");
html_body.push_str("<svg");
html_body.push_str(" width=\"16\"");
html_body.push_str(" height=\"16\"");
html_body.push_str(" viewBox=\"0 0 24 24\"");
html_body.push_str(" fill=\"none\"");
html_body.push_str(" stroke=\"currentColor\"");
html_body.push_str(" stroke-width=\"2\"");
html_body.push_str(">");
html_body.push_str("<polyline");
html_body.push_str(" points=\"3 6 5 6 21 6\"");
html_body.push_str(">");
html_body.push_str("</polyline>");
html_body.push_str("<path");
html_body.push_str(" d=\"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2\"");
html_body.push_str(">");
html_body.push_str("</path>");
html_body.push_str("</svg>");
html_body.push_str("</button>");
html_body.push_str("</form>");
html_body.push_str("</td>");
html_body.push_str("</tr>");
}
html_body.push_str("</tbody>");
html_body.push_str("</table>");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" style=\"padding: 1rem 1.25rem; border-top: 1px solid var(--border-color); display: flex; justify-content: space-between; align-items: center; font-size: 0.85rem; color: var(--text-muted);\"");
html_body.push_str(">");
html_body.push_str("<span");
html_body.push_str(">");
html_body.push_str("Showing ");
html_body.push_str("<strong");
html_body.push_str(" style=\"color: var(--text-main);\"");
html_body.push_str(">");
html_body.push_str(&format!("{}", model.subscribers.len()));
html_body.push_str("</strong>");
html_body.push_str("subscribers");
html_body.push_str("</span>");
html_body.push_str("<span");
html_body.push_str(" id=\"search-results-count\"");
html_body.push_str(">");
html_body.push_str("</span>");
html_body.push_str("</div>");
}
html_body.push_str("</div>");
html_body.push_str("</div>");
html_body.push_str("<!-- VIEW: TEMPLATES STUDIO -->");
html_body.push_str("<div");
html_body.push_str(" id=\"tab-templates\"");
html_body.push_str(" class=\"tab-content hidden\"");
html_body.push_str(" style=\"height: 100%; display: flex; flex-direction: column;\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" class=\"studio-container\"");
html_body.push_str(">");
html_body.push_str("<!-- STUDIO SIDEBAR: LIST -->");
html_body.push_str("<div");
html_body.push_str(" class=\"studio-sidebar\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" style=\"margin-bottom: 1rem; display: flex; justify-content: space-between; align-items: center;\"");
html_body.push_str(">");
html_body.push_str("<h2");
html_body.push_str(" style=\"font-size: 1rem; margin: 0; color:white;\"");
html_body.push_str(">");
html_body.push_str("Templates");
html_body.push_str("</h2>");
html_body.push_str("<button");
html_body.push_str(" class=\"btn btn-primary\"");
html_body.push_str(" onclick=\"resetTemplateForm()\"");
html_body.push_str(" style=\"font-size: 0.7rem; padding: 0.3rem 0.6rem;\"");
html_body.push_str(">");
html_body.push_str("+ New");
html_body.push_str("</button>");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" style=\"overflow-y: auto; flex: 1; display:flex; flex-direction:column; gap:0.5rem;\"");
html_body.push_str(">");
for tmpl in &model.templates {
html_body.push_str("<div");
html_body.push_str(" class=\"template-item\"");
html_body.push_str(&format!(" onclick=\"loadTemplate(`{}`, `{}`, `{}`)\"", tmpl.name, tmpl.subject, nucleus_std::utils::url_encode(&tmpl.body)));
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" style=\"display: flex; justify-content: space-between; align-items: center;\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" style=\"font-weight: 500; font-size: 0.9rem; color: #e4e4e7;\"");
html_body.push_str(">");
html_body.push_str(&format!("{}", tmpl.name));
html_body.push_str("</div>");
html_body.push_str("<form");
html_body.push_str(" method=\"POST\"");
html_body.push_str(" onsubmit=\"event.stopPropagation(); return confirmFormSubmit(this, 'Delete Template', 'Are you sure you want to delete this template? This action cannot be undone.');\"");
html_body.push_str(">");
html_body.push_str("<input");
html_body.push_str(" type=\"hidden\"");
html_body.push_str(" name=\"action\"");
html_body.push_str(" value=\"delete_template\"");
html_body.push_str(">");
html_body.push_str("</input>");
html_body.push_str("<input");
html_body.push_str(" type=\"hidden\"");
html_body.push_str(" name=\"id\"");
html_body.push_str(&format!(" value=\"{}\"", tmpl.id));
html_body.push_str(">");
html_body.push_str("</input>");
html_body.push_str("<button");
html_body.push_str(" class=\"btn btn-danger\"");
html_body.push_str(" style=\"padding: 1px 5px; font-size: 0.6rem; opacity:0.7;\"");
html_body.push_str(">");
html_body.push_str("√ó");
html_body.push_str("</button>");
html_body.push_str("</form>");
html_body.push_str("</div>");
html_body.push_str("</div>");
}
html_body.push_str("</div>");
html_body.push_str("<!-- Presets -->");
html_body.push_str("<div");
html_body.push_str(" style=\"margin-top: 1rem; padding-top:1rem; border-top:1px solid var(--border-color);\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" style=\"font-size:0.7rem; color:var(--text-dim); margin-bottom:0.75rem; text-transform:uppercase; letter-spacing:1px; font-weight:600;\"");
html_body.push_str(">");
html_body.push_str("Quick Start");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" style=\"display:flex; flex-direction:column; gap:0.5rem;\"");
html_body.push_str(">");
html_body.push_str("<button");
html_body.push_str(" class=\"btn btn-secondary\"");
html_body.push_str(" onclick=\"loadPreset('welcome')\"");
html_body.push_str(" style=\"font-size:0.75rem; justify-content:flex-start; padding:0.5rem 0.75rem;\"");
html_body.push_str(">");
html_body.push_str("üéâ Welcome Email");
html_body.push_str("</button>");
html_body.push_str("<button");
html_body.push_str(" class=\"btn btn-secondary\"");
html_body.push_str(" onclick=\"loadPreset('newsletter')\"");
html_body.push_str(" style=\"font-size:0.75rem; justify-content:flex-start; padding:0.5rem 0.75rem;\"");
html_body.push_str(">");
html_body.push_str("üì∞ Newsletter");
html_body.push_str("</button>");
html_body.push_str("<button");
html_body.push_str(" class=\"btn btn-secondary\"");
html_body.push_str(" onclick=\"loadPreset('promotional')\"");
html_body.push_str(" style=\"font-size:0.75rem; justify-content:flex-start; padding:0.5rem 0.75rem;\"");
html_body.push_str(">");
html_body.push_str("üè∑\u{fe0f} Promotional");
html_body.push_str("</button>");
html_body.push_str("</div>");
html_body.push_str("</div>");
html_body.push_str("</div>");
html_body.push_str("<!-- STUDIO MAIN: SPLIT PANE -->");
html_body.push_str("<div");
html_body.push_str(" class=\"studio-main\"");
html_body.push_str(">");
html_body.push_str("<!-- EDITOR -->");
html_body.push_str("<div");
html_body.push_str(" class=\"code-editor-container\"");
html_body.push_str(">");
html_body.push_str("<!-- Editor Toolbar -->");
html_body.push_str("<div");
html_body.push_str(" style=\"height: 48px; background: #2d2d2d; border-bottom: 1px solid #333; display: flex; align-items: center; padding: 0 1rem; justify-content: space-between;\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" class=\"form-group\"");
html_body.push_str(" style=\"margin:0; flex:1; max-width:200px;\"");
html_body.push_str(">");
html_body.push_str("<input");
html_body.push_str(" type=\"text\"");
html_body.push_str(" id=\"tmpl-name\"");
html_body.push_str(" class=\"form-input\"");
html_body.push_str(" placeholder=\"Template Name\"");
html_body.push_str(" style=\"margin:0; border:none; background:transparent; font-size:0.9rem; padding:0.2rem;\"");
html_body.push_str(" required=\"true\"");
html_body.push_str(">");
html_body.push_str("</input>");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" class=\"form-group\"");
html_body.push_str(" style=\"margin:0; flex:1; max-width:300px; margin-left:1rem;\"");
html_body.push_str(">");
html_body.push_str("<input");
html_body.push_str(" type=\"text\"");
html_body.push_str(" id=\"tmpl-subject\"");
html_body.push_str(" class=\"form-input\"");
html_body.push_str(" placeholder=\"Subject Line\"");
html_body.push_str(" style=\"margin:0; border:none; background:transparent; font-size:0.9rem; padding:0.2rem; color:#a1a1aa;\"");
html_body.push_str(" required=\"true\"");
html_body.push_str(">");
html_body.push_str("</input>");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" style=\"display:flex; align-items:center; gap:0.5rem;\"");
html_body.push_str(">");
html_body.push_str("<span");
html_body.push_str(" id=\"save-status\"");
html_body.push_str(" style=\"font-size:0.8rem; color:var(--text-muted); margin-right:0.5rem;\"");
html_body.push_str(">");
html_body.push_str("</span>");
html_body.push_str("<button");
html_body.push_str(" class=\"btn btn-primary\"");
html_body.push_str(" onclick=\"saveTemplate()\"");
html_body.push_str(" style=\"padding:0.4rem 1rem; font-size:0.8rem;\"");
html_body.push_str(">");
html_body.push_str("Save");
html_body.push_str("</button>");
html_body.push_str("</div>");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" class=\"editor-workspace\"");
html_body.push_str(">");
html_body.push_str("<textarea");
html_body.push_str(" id=\"mjml-editor\"");
html_body.push_str(" class=\"monaco-textarea\"");
html_body.push_str(" spellcheck=\"false\"");
html_body.push_str(" placeholder=\"<mjml>...\"");
html_body.push_str(">");
html_body.push_str("</textarea>");
html_body.push_str("</div>");
html_body.push_str("</div>");
html_body.push_str("<!-- PREVIEW -->");
html_body.push_str("<div");
html_body.push_str(" class=\"preview-container\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" class=\"preview-toolbar\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" style=\"font-weight:600; font-size:0.9rem; color:#334155;\"");
html_body.push_str(">");
html_body.push_str("Live Preview");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" class=\"device-toggle\"");
html_body.push_str(">");
html_body.push_str("<button");
html_body.push_str(" class=\"device-btn active\"");
html_body.push_str(" onclick=\"setDevice('desktop')\"");
html_body.push_str(">");
html_body.push_str("Desktop");
html_body.push_str("</button>");
html_body.push_str("<button");
html_body.push_str(" class=\"device-btn\"");
html_body.push_str(" onclick=\"setDevice('mobile')\"");
html_body.push_str(">");
html_body.push_str("Mobile");
html_body.push_str("</button>");
html_body.push_str("</div>");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" class=\"preview-frame-wrapper\"");
html_body.push_str(">");
html_body.push_str("<iframe");
html_body.push_str(" id=\"preview-frame\"");
html_body.push_str(" class=\"preview-frame desktop\"");
html_body.push_str(">");
html_body.push_str("</iframe>");
html_body.push_str("</div>");
html_body.push_str("</div>");
html_body.push_str("</div>");
html_body.push_str("</div>");
html_body.push_str("</div>");
html_body.push_str("<!-- VIEW: BROADCAST -->");
html_body.push_str("<div");
html_body.push_str(" id=\"tab-broadcast\"");
html_body.push_str(" class=\"tab-content hidden\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" class=\"page-header\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(">");
html_body.push_str("<h1");
html_body.push_str(" class=\"page-title\"");
html_body.push_str(">");
html_body.push_str("Send Broadcast");
html_body.push_str("</h1>");
html_body.push_str("<p");
html_body.push_str(" style=\"margin: 0.25rem 0 0; color: var(--text-dim); font-size: 0.9rem;\"");
html_body.push_str(">");
html_body.push_str("Send emails to your subscribers");
html_body.push_str("</p>");
html_body.push_str("</div>");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" style=\"display: grid; grid-template-columns: 1fr 380px; gap: 2rem; max-width: 1200px;\"");
html_body.push_str(">");
html_body.push_str("<!-- Main Content -->");
html_body.push_str("<div");
html_body.push_str(">");
html_body.push_str("<!-- Step 1: Select Template -->");
html_body.push_str("<div");
html_body.push_str(" class=\"glass-panel\"");
html_body.push_str(" style=\"padding: 1.5rem; margin-bottom: 1.5rem;\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" style=\"display: flex; align-items: center; gap: 1rem; margin-bottom: 1.25rem;\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" style=\"width: 32px; height: 32px; background: linear-gradient(135deg, var(--accent-primary), #7c3aed); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 700; font-size: 0.875rem;\"");
html_body.push_str(">");
html_body.push_str("1");
html_body.push_str("</div>");
html_body.push_str("<h3");
html_body.push_str(" style=\"margin: 0; font-size: 1.1rem; font-weight: 600;\"");
html_body.push_str(">");
html_body.push_str("Select Template");
html_body.push_str("</h3>");
html_body.push_str("</div>");
if model.templates.is_empty() {
html_body.push_str("<div");
html_body.push_str(" style=\"padding: 2rem; text-align: center; background: var(--glass-strong); border-radius: 12px; border: 1px dashed var(--border-color);\"");
html_body.push_str(">");
html_body.push_str("<svg");
html_body.push_str(" width=\"40\"");
html_body.push_str(" height=\"40\"");
html_body.push_str(" viewBox=\"0 0 24 24\"");
html_body.push_str(" fill=\"none\"");
html_body.push_str(" stroke=\"var(--text-dim)\"");
html_body.push_str(" stroke-width=\"1.5\"");
html_body.push_str(" style=\"margin-bottom: 1rem;\"");
html_body.push_str(">");
html_body.push_str("<path");
html_body.push_str(" d=\"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z\"");
html_body.push_str(">");
html_body.push_str("</path>");
html_body.push_str("<polyline");
html_body.push_str(" points=\"22,6 12,13 2,6\"");
html_body.push_str(">");
html_body.push_str("</polyline>");
html_body.push_str("</svg>");
html_body.push_str("<p");
html_body.push_str(" style=\"margin: 0 0 1rem; color: var(--text-muted);\"");
html_body.push_str(">");
html_body.push_str("No templates available. Create one first!");
html_body.push_str("</p>");
html_body.push_str("<button");
html_body.push_str(" class=\"btn btn-primary\"");
html_body.push_str(" onclick=\"switchTab('templates')\"");
html_body.push_str(">");
html_body.push_str("Create Template");
html_body.push_str("</button>");
html_body.push_str("</div>");
}
if !model.templates.is_empty() {
html_body.push_str("<div");
html_body.push_str(" style=\"display: grid; gap: 0.75rem;\"");
html_body.push_str(">");
for tmpl in &model.templates {
html_body.push_str("<label");
html_body.push_str(" style=\"display: flex; align-items: center; gap: 1rem; padding: 1rem; background: var(--glass-strong); border: 2px solid var(--border-color); border-radius: 12px; cursor: pointer; transition: all 0.2s;\"");
html_body.push_str(" class=\"template-radio\"");
html_body.push_str(&format!(" onclick=\"selectBroadcastTemplate({}, '{}', '{}')\"", tmpl.id, tmpl.name, tmpl.subject));
html_body.push_str(">");
html_body.push_str("<input");
html_body.push_str(" type=\"radio\"");
html_body.push_str(" name=\"broadcast_template\"");
html_body.push_str(&format!(" value=\"{}\"", tmpl.id));
html_body.push_str(&format!(" aria-label=\"Select {} template\"", tmpl.name));
html_body.push_str(" style=\"width: 18px; height: 18px; accent-color: var(--accent-primary);\"");
html_body.push_str(">");
html_body.push_str("</input>");
html_body.push_str("<div");
html_body.push_str(" style=\"flex: 1;\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" style=\"font-weight: 600; margin-bottom: 0.25rem;\"");
html_body.push_str(">");
html_body.push_str(&format!("{}", tmpl.name));
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" style=\"font-size: 0.8rem; color: var(--text-dim);\"");
html_body.push_str(">");
html_body.push_str("Subject: ");
html_body.push_str(&format!("{}", tmpl.subject));
html_body.push_str("</div>");
html_body.push_str("</div>");
html_body.push_str("<svg");
html_body.push_str(" width=\"20\"");
html_body.push_str(" height=\"20\"");
html_body.push_str(" viewBox=\"0 0 24 24\"");
html_body.push_str(" fill=\"none\"");
html_body.push_str(" stroke=\"var(--text-dim)\"");
html_body.push_str(" stroke-width=\"2\"");
html_body.push_str(">");
html_body.push_str("<polyline");
html_body.push_str(" points=\"9 18 15 12 9 6\"");
html_body.push_str(">");
html_body.push_str("</polyline>");
html_body.push_str("</svg>");
html_body.push_str("</label>");
}
html_body.push_str("</div>");
}
html_body.push_str("</div>");
html_body.push_str("<!-- Step 2: Review & Send -->");
html_body.push_str("<div");
html_body.push_str(" class=\"glass-panel\"");
html_body.push_str(" style=\"padding: 1.5rem;\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" style=\"display: flex; align-items: center; gap: 1rem; margin-bottom: 1.25rem;\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" style=\"width: 32px; height: 32px; background: var(--glass-strong); border: 2px solid var(--border-color); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 700; font-size: 0.875rem; color: var(--text-dim);\"");
html_body.push_str(">");
html_body.push_str("2");
html_body.push_str("</div>");
html_body.push_str("<h3");
html_body.push_str(" style=\"margin: 0; font-size: 1.1rem; font-weight: 600; color: var(--text-muted);\"");
html_body.push_str(">");
html_body.push_str("Review & Send");
html_body.push_str("</h3>");
html_body.push_str("</div>");
html_body.push_str("<form");
html_body.push_str(" method=\"POST\"");
html_body.push_str(" id=\"broadcast-form\"");
html_body.push_str(" onsubmit=\"return confirmBroadcast();\"");
html_body.push_str(">");
html_body.push_str("<input");
html_body.push_str(" type=\"hidden\"");
html_body.push_str(" name=\"action\"");
html_body.push_str(" value=\"broadcast\"");
html_body.push_str(">");
html_body.push_str("</input>");
html_body.push_str("<input");
html_body.push_str(" type=\"hidden\"");
html_body.push_str(" name=\"template_id\"");
html_body.push_str(" id=\"broadcast-template-id\"");
html_body.push_str(" value=\"\"");
html_body.push_str(">");
html_body.push_str("</input>");
html_body.push_str("<div");
html_body.push_str(" style=\"padding: 1.5rem; background: var(--glass-strong); border-radius: 12px; margin-bottom: 1.5rem;\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" style=\"display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;\"");
html_body.push_str(">");
html_body.push_str("<span");
html_body.push_str(" style=\"color: var(--text-muted);\"");
html_body.push_str(">");
html_body.push_str("Template");
html_body.push_str("</span>");
html_body.push_str("<span");
html_body.push_str(" id=\"broadcast-template-name\"");
html_body.push_str(" style=\"font-weight: 500;\"");
html_body.push_str(">");
html_body.push_str("Not selected");
html_body.push_str("</span>");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" style=\"display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;\"");
html_body.push_str(">");
html_body.push_str("<span");
html_body.push_str(" style=\"color: var(--text-muted);\"");
html_body.push_str(">");
html_body.push_str("Subject");
html_body.push_str("</span>");
html_body.push_str("<span");
html_body.push_str(" id=\"broadcast-subject\"");
html_body.push_str(" style=\"font-weight: 500;\"");
html_body.push_str(">");
html_body.push_str("‚Äî");
html_body.push_str("</span>");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" style=\"display: flex; justify-content: space-between; align-items: center;\"");
html_body.push_str(">");
html_body.push_str("<span");
html_body.push_str(" style=\"color: var(--text-muted);\"");
html_body.push_str(">");
html_body.push_str("Recipients");
html_body.push_str("</span>");
html_body.push_str("<span");
html_body.push_str(" style=\"font-weight: 600; color: var(--accent-primary);\"");
html_body.push_str(">");
html_body.push_str(&format!("{}", model.subscribers.len()));
html_body.push_str("subscribers");
html_body.push_str("</span>");
html_body.push_str("</div>");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" style=\"display: flex; gap: 0.75rem;\"");
html_body.push_str(">");
html_body.push_str("<button");
html_body.push_str(" type=\"button\"");
html_body.push_str(" class=\"btn btn-secondary\"");
html_body.push_str(" style=\"flex: 1;\"");
html_body.push_str(" onclick=\"sendTestEmail()\"");
html_body.push_str(">");
html_body.push_str("<svg");
html_body.push_str(" width=\"16\"");
html_body.push_str(" height=\"16\"");
html_body.push_str(" viewBox=\"0 0 24 24\"");
html_body.push_str(" fill=\"none\"");
html_body.push_str(" stroke=\"currentColor\"");
html_body.push_str(" stroke-width=\"2\"");
html_body.push_str(">");
html_body.push_str("<path");
html_body.push_str(" d=\"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z\"");
html_body.push_str(">");
html_body.push_str("</path>");
html_body.push_str("<polyline");
html_body.push_str(" points=\"22,6 12,13 2,6\"");
html_body.push_str(">");
html_body.push_str("</polyline>");
html_body.push_str("</svg>");
html_body.push_str("Send Test\n                                    ");
html_body.push_str("</button>");
html_body.push_str("<button");
html_body.push_str(" type=\"submit\"");
html_body.push_str(" class=\"btn btn-primary\"");
html_body.push_str(" style=\"flex: 2;\"");
html_body.push_str(" id=\"send-broadcast-btn\"");
html_body.push_str(" disabled=\"true\"");
html_body.push_str(">");
html_body.push_str("<svg");
html_body.push_str(" width=\"16\"");
html_body.push_str(" height=\"16\"");
html_body.push_str(" viewBox=\"0 0 24 24\"");
html_body.push_str(" fill=\"none\"");
html_body.push_str(" stroke=\"currentColor\"");
html_body.push_str(" stroke-width=\"2\"");
html_body.push_str(">");
html_body.push_str("<path");
html_body.push_str(" d=\"M22 2L11 13\"");
html_body.push_str(">");
html_body.push_str("</path>");
html_body.push_str("<path");
html_body.push_str(" d=\"M22 2l-7 20-4-9-9-4 20-7z\"");
html_body.push_str(">");
html_body.push_str("</path>");
html_body.push_str("</svg>");
html_body.push_str("Send to All Subscribers\n                                    ");
html_body.push_str("</button>");
html_body.push_str("</div>");
html_body.push_str("</form>");
html_body.push_str("</div>");
html_body.push_str("</div>");
html_body.push_str("<!-- Sidebar: Summary -->");
html_body.push_str("<div");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" class=\"glass-panel\"");
html_body.push_str(" style=\"padding: 1.5rem; position: sticky; top: 2rem;\"");
html_body.push_str(">");
html_body.push_str("<h4");
html_body.push_str(" style=\"margin: 0 0 1.25rem; font-size: 0.9rem; font-weight: 600; display: flex; align-items: center; gap: 0.5rem;\"");
html_body.push_str(">");
html_body.push_str("<svg");
html_body.push_str(" width=\"18\"");
html_body.push_str(" height=\"18\"");
html_body.push_str(" viewBox=\"0 0 24 24\"");
html_body.push_str(" fill=\"none\"");
html_body.push_str(" stroke=\"currentColor\"");
html_body.push_str(" stroke-width=\"2\"");
html_body.push_str(">");
html_body.push_str("<circle");
html_body.push_str(" cx=\"12\"");
html_body.push_str(" cy=\"12\"");
html_body.push_str(" r=\"10\"");
html_body.push_str(">");
html_body.push_str("</circle>");
html_body.push_str("<line");
html_body.push_str(" x1=\"12\"");
html_body.push_str(" y1=\"16\"");
html_body.push_str(" x2=\"12\"");
html_body.push_str(" y2=\"12\"");
html_body.push_str(">");
html_body.push_str("</line>");
html_body.push_str("<line");
html_body.push_str(" x1=\"12\"");
html_body.push_str(" y1=\"8\"");
html_body.push_str(" x2=\"12.01\"");
html_body.push_str(" y2=\"8\"");
html_body.push_str(">");
html_body.push_str("</line>");
html_body.push_str("</svg>");
html_body.push_str("Broadcast Summary\n                            ");
html_body.push_str("</h4>");
html_body.push_str("<div");
html_body.push_str(" style=\"margin-bottom: 1.5rem;\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" style=\"display: flex; align-items: center; gap: 1rem; padding: 1rem; background: linear-gradient(135deg, rgba(16, 185, 129, 0.1), rgba(16, 185, 129, 0.05)); border-radius: 12px; margin-bottom: 0.75rem;\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" style=\"width: 48px; height: 48px; background: rgba(16, 185, 129, 0.2); border-radius: 12px; display: flex; align-items: center; justify-content: center;\"");
html_body.push_str(">");
html_body.push_str("<svg");
html_body.push_str(" width=\"24\"");
html_body.push_str(" height=\"24\"");
html_body.push_str(" viewBox=\"0 0 24 24\"");
html_body.push_str(" fill=\"none\"");
html_body.push_str(" stroke=\"#10b981\"");
html_body.push_str(" stroke-width=\"2\"");
html_body.push_str(">");
html_body.push_str("<path");
html_body.push_str(" d=\"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2\"");
html_body.push_str(">");
html_body.push_str("</path>");
html_body.push_str("<circle");
html_body.push_str(" cx=\"9\"");
html_body.push_str(" cy=\"7\"");
html_body.push_str(" r=\"4\"");
html_body.push_str(">");
html_body.push_str("</circle>");
html_body.push_str("<path");
html_body.push_str(" d=\"M23 21v-2a4 4 0 0 0-3-3.87\"");
html_body.push_str(">");
html_body.push_str("</path>");
html_body.push_str("<path");
html_body.push_str(" d=\"M16 3.13a4 4 0 0 1 0 7.75\"");
html_body.push_str(">");
html_body.push_str("</path>");
html_body.push_str("</svg>");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" style=\"font-size: 1.75rem; font-weight: 800; line-height: 1;\"");
html_body.push_str(">");
html_body.push_str(&format!("{}", model.subscribers.len()));
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" style=\"font-size: 0.75rem; color: var(--text-dim); text-transform: uppercase; letter-spacing: 0.05em;\"");
html_body.push_str(">");
html_body.push_str("Recipients");
html_body.push_str("</div>");
html_body.push_str("</div>");
html_body.push_str("</div>");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" style=\"font-size: 0.85rem; color: var(--text-muted); line-height: 1.6;\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" style=\"display: flex; align-items: flex-start; gap: 0.5rem; margin-bottom: 0.5rem;\"");
html_body.push_str(">");
html_body.push_str("<svg");
html_body.push_str(" width=\"16\"");
html_body.push_str(" height=\"16\"");
html_body.push_str(" viewBox=\"0 0 24 24\"");
html_body.push_str(" fill=\"none\"");
html_body.push_str(" stroke=\"var(--accent-success)\"");
html_body.push_str(" stroke-width=\"2\"");
html_body.push_str(" style=\"flex-shrink: 0; margin-top: 2px;\"");
html_body.push_str(">");
html_body.push_str("<polyline");
html_body.push_str(" points=\"20 6 9 17 4 12\"");
html_body.push_str(">");
html_body.push_str("</polyline>");
html_body.push_str("</svg>");
html_body.push_str("<span");
html_body.push_str(">");
html_body.push_str("Emails will be sent instantly");
html_body.push_str("</span>");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" style=\"display: flex; align-items: flex-start; gap: 0.5rem; margin-bottom: 0.5rem;\"");
html_body.push_str(">");
html_body.push_str("<svg");
html_body.push_str(" width=\"16\"");
html_body.push_str(" height=\"16\"");
html_body.push_str(" viewBox=\"0 0 24 24\"");
html_body.push_str(" fill=\"none\"");
html_body.push_str(" stroke=\"var(--accent-success)\"");
html_body.push_str(" stroke-width=\"2\"");
html_body.push_str(" style=\"flex-shrink: 0; margin-top: 2px;\"");
html_body.push_str(">");
html_body.push_str("<polyline");
html_body.push_str(" points=\"20 6 9 17 4 12\"");
html_body.push_str(">");
html_body.push_str("</polyline>");
html_body.push_str("</svg>");
html_body.push_str("<span");
html_body.push_str(">");
html_body.push_str("MJML templates auto-compiled");
html_body.push_str("</span>");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" style=\"display: flex; align-items: flex-start; gap: 0.5rem;\"");
html_body.push_str(">");
html_body.push_str("<svg");
html_body.push_str(" width=\"16\"");
html_body.push_str(" height=\"16\"");
html_body.push_str(" viewBox=\"0 0 24 24\"");
html_body.push_str(" fill=\"none\"");
html_body.push_str(" stroke=\"var(--accent-success)\"");
html_body.push_str(" stroke-width=\"2\"");
html_body.push_str(" style=\"flex-shrink: 0; margin-top: 2px;\"");
html_body.push_str(">");
html_body.push_str("<polyline");
html_body.push_str(" points=\"20 6 9 17 4 12\"");
html_body.push_str(">");
html_body.push_str("</polyline>");
html_body.push_str("</svg>");
html_body.push_str("<span");
html_body.push_str(">");
html_body.push_str("Mobile-responsive design");
html_body.push_str("</span>");
html_body.push_str("</div>");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" style=\"margin-top: 1.5rem; padding-top: 1.5rem; border-top: 1px solid var(--border-color);\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" style=\"display: flex; align-items: center; gap: 0.5rem; color: var(--text-dim); font-size: 0.8rem;\"");
html_body.push_str(">");
html_body.push_str("<svg");
html_body.push_str(" width=\"14\"");
html_body.push_str(" height=\"14\"");
html_body.push_str(" viewBox=\"0 0 24 24\"");
html_body.push_str(" fill=\"none\"");
html_body.push_str(" stroke=\"currentColor\"");
html_body.push_str(" stroke-width=\"2\"");
html_body.push_str(">");
html_body.push_str("<path");
html_body.push_str(" d=\"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z\"");
html_body.push_str(">");
html_body.push_str("</path>");
html_body.push_str("</svg>");
html_body.push_str("Powered by MJML\n                                ");
html_body.push_str("</div>");
html_body.push_str("</div>");
html_body.push_str("</div>");
html_body.push_str("</div>");
html_body.push_str("</div>");
html_body.push_str("</div>");
html_body.push_str("<!-- TOAST CONTAINER -->");
html_body.push_str("<div");
html_body.push_str(" id=\"toast-container\"");
html_body.push_str(" class=\"toast-container\"");
html_body.push_str(">");
html_body.push_str("</div>");
html_body.push_str("</main>");
}
html_body.push_str("</div>");
html_body.push_str("<!-- Preview Modal -->");
html_body.push_str("<div");
html_body.push_str(" id=\"preview-modal\"");
html_body.push_str(" style=\"display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 200; align-items: center; justify-content: center;\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" style=\"background: white; width: 80%; height: 80%; border-radius: 8px; overflow: hidden; display: flex; flex-direction: column;\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" style=\"padding: 1rem; border-bottom: 1px solid #ddd; display: flex; justify-content: space-between; background: #f4f4f5; color: black;\"");
html_body.push_str(">");
html_body.push_str("<strong");
html_body.push_str(">");
html_body.push_str("HTML Preview");
html_body.push_str("</strong>");
html_body.push_str("<button");
html_body.push_str(" onclick=\"document.getElementById('preview-modal').style.display='none'\"");
html_body.push_str(" style=\"background:none; border:none; cursor:pointer; font-size: 1.2rem;\"");
html_body.push_str(">");
html_body.push_str("&times;");
html_body.push_str("</button>");
html_body.push_str("</div>");
html_body.push_str("<iframe");
html_body.push_str(" id=\"preview-frame\"");
html_body.push_str(" style=\"flex: 1; border: none; width: 100%; height: 100%;\"");
html_body.push_str(">");
html_body.push_str("</iframe>");
html_body.push_str("</div>");
html_body.push_str("</div>");
html_body.push_str("<!-- Confirmation Modal -->");
html_body.push_str("<div");
html_body.push_str(" id=\"confirm-modal\"");
html_body.push_str(" class=\"confirm-modal-overlay\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" class=\"confirm-modal\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" class=\"confirm-modal-header\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" class=\"confirm-modal-icon\"");
html_body.push_str(" id=\"confirm-modal-icon\"");
html_body.push_str(">");
html_body.push_str("<svg");
html_body.push_str(" width=\"24\"");
html_body.push_str(" height=\"24\"");
html_body.push_str(" viewBox=\"0 0 24 24\"");
html_body.push_str(" fill=\"none\"");
html_body.push_str(" stroke=\"currentColor\"");
html_body.push_str(" stroke-width=\"2\"");
html_body.push_str(">");
html_body.push_str("<path");
html_body.push_str(" d=\"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z\"");
html_body.push_str(">");
html_body.push_str("</path>");
html_body.push_str("<line");
html_body.push_str(" x1=\"12\"");
html_body.push_str(" y1=\"9\"");
html_body.push_str(" x2=\"12\"");
html_body.push_str(" y2=\"13\"");
html_body.push_str(">");
html_body.push_str("</line>");
html_body.push_str("<line");
html_body.push_str(" x1=\"12\"");
html_body.push_str(" y1=\"17\"");
html_body.push_str(" x2=\"12.01\"");
html_body.push_str(" y2=\"17\"");
html_body.push_str(">");
html_body.push_str("</line>");
html_body.push_str("</svg>");
html_body.push_str("</div>");
html_body.push_str("<h3");
html_body.push_str(" class=\"confirm-modal-title\"");
html_body.push_str(" id=\"confirm-modal-title\"");
html_body.push_str(">");
html_body.push_str("Confirm Action");
html_body.push_str("</h3>");
html_body.push_str("</div>");
html_body.push_str("<p");
html_body.push_str(" class=\"confirm-modal-message\"");
html_body.push_str(" id=\"confirm-modal-message\"");
html_body.push_str(">");
html_body.push_str("Are you sure you want to proceed?");
html_body.push_str("</p>");
html_body.push_str("<div");
html_body.push_str(" class=\"confirm-modal-actions\"");
html_body.push_str(">");
html_body.push_str("<button");
html_body.push_str(" class=\"btn btn-secondary\"");
html_body.push_str(" id=\"confirm-modal-cancel\"");
html_body.push_str(" onclick=\"closeConfirmModal(false)\"");
html_body.push_str(">");
html_body.push_str("Cancel");
html_body.push_str("</button>");
html_body.push_str("<button");
html_body.push_str(" class=\"btn btn-primary\"");
html_body.push_str(" id=\"confirm-modal-confirm\"");
html_body.push_str(" onclick=\"closeConfirmModal(true)\"");
html_body.push_str(">");
html_body.push_str("Confirm");
html_body.push_str("</button>");
html_body.push_str("</div>");
html_body.push_str("</div>");
html_body.push_str("</div>");
html_body.push_str("<link");
html_body.push_str(" rel=\"stylesheet\"");
html_body.push_str(" href=\"/static/css/style-320c818d6afca7c8.css\"");
html_body.push_str(">");
html_body.push_str("</link>");
html_body.push_str("<script");
html_body.push_str(" src=\"/static/js/script-78dd800172958cda.js\"");
html_body.push_str(" defer=\"true\"");
html_body.push_str(">");
html_body.push_str("</script>");
html_body.push_str("<link");
html_body.push_str(" rel=\"stylesheet\"");
html_body.push_str(" href=\"/static/css/style-57458f0b28585c3.css\"");
html_body.push_str(">");
html_body.push_str("</link>");
html_body.push_str("</n:layout>");
html_body.push_str("<!-- Nucleus Client-Side Router for SPA-like navigation -->");
html_body.push_str("<script");
html_body.push_str(" src=\"/assets/router.js?v=4\"");
html_body.push_str(" defer=\"true\"");
html_body.push_str(">");
html_body.push_str("");
html_body.push_str("</script>");
html_body.push_str("<!-- Docs Script -->");
html_body.push_str("<script");
html_body.push_str(" src=\"/assets/docs.js?v=9\"");
html_body.push_str(" defer=\"true\"");
html_body.push_str(">");
html_body.push_str("");
html_body.push_str("</script>");
html_body.push_str("</body>");
html_body.push_str("</html>");

    axum::response::Html(html_body).into_response()
}

#[allow(non_snake_case, unreachable_code, unused_variables)]
async fn handle_action_admin(headers: axum::http::HeaderMap, Form(params): Form<std::collections::HashMap<String, String>>) -> impl axum::response::IntoResponse {
    
        use crate::controllers::newsletter;
        use axum::http::header::{COOKIE, SET_COOKIE, LOCATION};
        use axum::response::{Html, Redirect, IntoResponse};

        let config = nucleus_std::config::Config::load();
        
        // --- 1. Authenticaton Logic (Cookie-based) ---
        let cookie_header = headers.get(COOKIE).and_then(|h| h.to_str().ok()).unwrap_or("");
        let is_authenticated = cookie_header.contains("admin_session=true");

        // Action Handling
        let action = params.get("action").map(|s| s.as_str()).unwrap_or("");
        
        if action == "login" {
             let username = params.get("username").map(|s| s.as_str()).unwrap_or("");
             let password = params.get("password").map(|s| s.as_str()).unwrap_or("");
             
             // Check against config (defaulting checks if config missing)
             let valid_user = !config.app.admin_username.is_empty() && username == config.app.admin_username;
             let valid_pass = password == config.app.admin_password;

             if valid_user && valid_pass {
                 // Set Cookie and Redirect
                 let cookie_val = "admin_session=true; HttpOnly; Path=/; Max-Age=86400; SameSite=Strict";
                 return (
                     [(SET_COOKIE, cookie_val)],
                     Redirect::to("/admin")
                 ).into_response();
             } else {
                 // Return Login with Error
                 return Redirect::to("/admin?error=Invalid Credentials").into_response();
             }
        }

        if action == "logout" {
             let cookie_val = "admin_session=true; HttpOnly; Path=/; Max-Age=0";
             return (
                 [(SET_COOKIE, cookie_val)],
                 Redirect::to("/admin")
             ).into_response();
        }

        // --- 2. Security Guard ---
        // If not authenticated, STOP here and show Login Form. 
        // Do NOT process any other actions or render the dashboard.
        if !is_authenticated {
            let error = params.get("error").map(|s| s.as_str()).unwrap_or("");
            let err_html = if !error.is_empty() {
                format!("<div style='color: #ef4444; margin-bottom: 1rem; text-align: center;'>{}</div>", error)
            } else { String::new() };

            let login_html = format!(r#"
            <!DOCTYPE html>
            <html>
            <head>
                <title>Admin Login | Nucleus</title>
                <style>
                    body {{ background: #09090b; color: #f4f4f5; font-family: system-ui, sans-serif; display: flex; align-items: center; justify-content: center; height: 100vh; margin: 0; }}
                    .login-box {{ background: #18181b; padding: 2.5rem; border-radius: 12px; border: 1px solid rgba(255,255,255,0.08); width: 100%; max-width: 320px; box-shadow: 0 20px 25px -5px rgba(0,0,0,0.3); }}
                    h2 {{ margin: 0 0 1.5rem 0; text-align: center; font-weight: 600; font-size: 1.5rem; }}
                    input {{ display: block; width: 100%; padding: 0.75rem; margin-bottom: 1rem; background: #27272a; border: 1px solid #3f3f46; color: white; border-radius: 6px; box-sizing: border-box; }}
                    input:focus {{ outline: 2px solid #8b5cf6; border-color: transparent; }}
                    button {{ width: 100%; padding: 0.75rem; background: #8b5cf6; color: white; border: none; border-radius: 6px; font-weight: 600; cursor: pointer; transition: opacity 0.2s; }}
                    button:hover {{ opacity: 0.9; }}
                </style>
            </head>
            <body>
                <div class="login-box">
                    <h2>Nucleus Admin</h2>
                    {}
                    <form action="/admin" method="POST">
                        <input type="hidden" name="action" value="login">
                        <input type="text" name="username" placeholder="Username" required autofocus>
                        <input type="password" name="password" placeholder="Password" required>
                        <button type="submit">Sign In</button>
                    </form>
                </div>
            </body>
            </html>
            "#, err_html);
            
            return Html(login_html).into_response();
        }

        // --- 3. Authenticated Actions ---
        // Only reachable if authenticated
        
        if !action.is_empty() {
            match action {
                "delete_subscriber" => {
                    if let Some(id_str) = params.get("id") {
                        if let Ok(id) = id_str.parse::<i64>() {
                            let _ = newsletter::delete_subscriber(id).await;
                        }
                    }
                },
                "create_template" => {
                    let name = params.get("name").unwrap_or(&"Untitled".to_string()).clone();
                    let subject = params.get("subject").unwrap_or(&"".to_string()).clone();
                    let body = params.get("body").unwrap_or(&"".to_string()).clone();
                    
                    let _ = newsletter::create_template(name, subject, body).await;
                },
                "delete_template" => {
                    if let Some(id_str) = params.get("id") {
                         if let Ok(id) = id_str.parse::<i64>() {
                            let _ = newsletter::delete_template(id).await;
                         }
                    }
                },
                "broadcast" => {
                    if let Some(id_str) = params.get("template_id") {
                         if let Ok(tmpl_id) = id_str.parse::<i64>() {
                             match newsletter::broadcast_template(tmpl_id).await {
                                 Ok(msg) => {
                                      let encoded = nucleus_std::utils::url_encode(&msg);
                                      return Redirect::to(&format!("/admin?msg={}", encoded)).into_response();
                                 },
                                 Err(e) => {
                                      let encoded = nucleus_std::utils::url_encode(&e);
                                      return Redirect::to(&format!("/admin?error={}", encoded)).into_response();
                                 }
                             }
                         }
                    }
                },
                _ => {}
            }
            
            // Redirect to get fresh state (PRG pattern)
            return Redirect::to("/admin").into_response();
        }
    
    axum::response::Html("Action Completed").into_response()
}

#[allow(non_snake_case, unreachable_code, unused_variables)]
async fn handle_clean_layout(headers: axum::http::HeaderMap, Query(params): Query<std::collections::HashMap<String, String>>) -> impl axum::response::IntoResponse {
    let mut html_body = String::new();
html_body.push_str("<!DOCTYPE html>");
html_body.push_str("<html");
html_body.push_str(" lang=\"en\"");
html_body.push_str(">");
html_body.push_str("<head");
html_body.push_str(">");
html_body.push_str("<meta");
html_body.push_str(" charset=\"UTF-8\"");
html_body.push_str(">");
html_body.push_str("</meta>");
html_body.push_str("<meta");
html_body.push_str(" name=\"viewport\"");
html_body.push_str(" content=\"width=device-width, initial-scale=1.0\"");
html_body.push_str(">");
html_body.push_str("</meta>");
html_body.push_str("<title");
html_body.push_str(">");
html_body.push_str("Nucleus | The Hyper-Optimized Framework");
html_body.push_str("</title>");
html_body.push_str("<meta");
html_body.push_str(" name=\"description\"");
html_body.push_str(" content=\"Build high-performance full-stack apps with Rust. Zero-compromise speed, developer experience, and safety.\"");
html_body.push_str(">");
html_body.push_str("</meta>");
html_body.push_str("<!-- DNS Prefetch & Preconnect for External Resources -->");
html_body.push_str("<link");
html_body.push_str(" rel=\"dns-prefetch\"");
html_body.push_str(" href=\"//fonts.googleapis.com\"");
html_body.push_str(">");
html_body.push_str("</link>");
html_body.push_str("<link");
html_body.push_str(" rel=\"dns-prefetch\"");
html_body.push_str(" href=\"//fonts.gstatic.com\"");
html_body.push_str(">");
html_body.push_str("</link>");
html_body.push_str("<link");
html_body.push_str(" rel=\"preconnect\"");
html_body.push_str(" href=\"https://fonts.googleapis.com\"");
html_body.push_str(">");
html_body.push_str("</link>");
html_body.push_str("<link");
html_body.push_str(" rel=\"preconnect\"");
html_body.push_str(" href=\"https://fonts.gstatic.com\"");
html_body.push_str(" crossorigin=\"true\"");
html_body.push_str(">");
html_body.push_str("</link>");
html_body.push_str("<!-- Favicon -->");
html_body.push_str("<link");
html_body.push_str(" rel=\"icon\"");
html_body.push_str(" href=\"data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>‚ö°</text></svg>\"");
html_body.push_str(">");
html_body.push_str("</link>");
html_body.push_str("<!-- Critical CSS (inlined for render performance) -->");
html_body.push_str("<style");
html_body.push_str(" critical=\"true\"");
html_body.push_str(">");
html_body.push_str("\n        /* Critical above-the-fold styles */\n        body { margin: 0; background: #000; color: #ededed; font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif; }\n        .nav { position: fixed; top: 0; left: 0; right: 0; z-index: 100; padding: 16px 0; background: rgba(0,0,0,0.8); backdrop-filter: blur(20px); }\n    ");
html_body.push_str("</style>");
html_body.push_str("<!-- Main Stylesheet (non-blocking with media swap) -->");
html_body.push_str("<link");
html_body.push_str(" href=\"/assets/output.css\"");
html_body.push_str(" rel=\"stylesheet\"");
html_body.push_str(">");
html_body.push_str("</link>");
html_body.push_str("<!-- Accessibility Styles (WCAG 2.1 AA) -->");
html_body.push_str("<link");
html_body.push_str(" href=\"/assets/accessibility.css\"");
html_body.push_str(" rel=\"stylesheet\"");
html_body.push_str(">");
html_body.push_str("</link>");
html_body.push_str("<!-- Highlight.js for syntax highlighting (Local) -->");
html_body.push_str("<link");
html_body.push_str(" rel=\"stylesheet\"");
html_body.push_str(" href=\"/assets/highlight.css?v=4\"");
html_body.push_str(">");
html_body.push_str("</link>");
html_body.push_str("<script");
html_body.push_str(" src=\"/assets/highlight.min.js?v=4\"");
html_body.push_str(">");
html_body.push_str("");
html_body.push_str("</script>");
html_body.push_str("<!-- Google Fonts with font-display: swap (non-render-blocking) -->");
html_body.push_str("<link");
html_body.push_str(" href=\"https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap\"");
html_body.push_str(" rel=\"stylesheet\"");
html_body.push_str(" media=\"print\"");
html_body.push_str(" onload=\"this.media='all'\"");
html_body.push_str(">");
html_body.push_str("</link>");
html_body.push_str("<noscript");
html_body.push_str(">");
html_body.push_str("<link");
html_body.push_str(" href=\"https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap\"");
html_body.push_str(" rel=\"stylesheet\"");
html_body.push_str(">");
html_body.push_str("</link>");
html_body.push_str("</noscript>");
html_body.push_str("<link");
html_body.push_str(" rel=\"preconnect\"");
html_body.push_str(" href=\"https://fonts.googleapis.com\"");
html_body.push_str(">");
html_body.push_str("</link>");
html_body.push_str("<link");
html_body.push_str(" rel=\"preconnect\"");
html_body.push_str(" href=\"https://fonts.gstatic.com\"");
html_body.push_str(">");
html_body.push_str("</link>");
html_body.push_str("</head>");
html_body.push_str("<body");
html_body.push_str(">");
html_body.push_str("<!-- Skip Link for Keyboard Navigation (WCAG 2.4.1) -->");
html_body.push_str("<a");
html_body.push_str(" href=\"#main-content\"");
html_body.push_str(" class=\"skip-link\"");
html_body.push_str(">");
html_body.push_str("Skip to main content");
html_body.push_str("</a>");
html_body.push_str("<!-- Screen Reader Announcements (WCAG 4.1.3) -->");
html_body.push_str("<div");
html_body.push_str(" id=\"a11y-announcer\"");
html_body.push_str(" class=\"sr-only\"");
html_body.push_str(" aria-live=\"polite\"");
html_body.push_str(" aria-atomic=\"true\"");
html_body.push_str(">");
html_body.push_str("</div>");
html_body.push_str("<!DOCTYPE html>");
html_body.push_str("<html");
html_body.push_str(" lang=\"en\"");
html_body.push_str(">");
html_body.push_str("<head");
html_body.push_str(">");
html_body.push_str("<meta");
html_body.push_str(" charset=\"UTF-8\"");
html_body.push_str(">");
html_body.push_str("</meta>");
html_body.push_str("<meta");
html_body.push_str(" name=\"viewport\"");
html_body.push_str(" content=\"width=device-width, initial-scale=1.0\"");
html_body.push_str(">");
html_body.push_str("</meta>");
html_body.push_str("<title");
html_body.push_str(">");
html_body.push_str("Nucleus Playground");
html_body.push_str("</title>");
html_body.push_str("<!-- Playground Critical CSS -->");
html_body.push_str("<link");
html_body.push_str(" rel=\"stylesheet\"");
html_body.push_str(" href=\"/static/css/style-82010526467a39f8.css\"");
html_body.push_str(">");
html_body.push_str("</link>");
html_body.push_str("</head>");
html_body.push_str("<body");
html_body.push_str(">");
html_body.push_str("</body>");
html_body.push_str("</html>");
html_body.push_str("<!-- Nucleus Client-Side Router for SPA-like navigation -->");
html_body.push_str("<script");
html_body.push_str(" src=\"/assets/router.js?v=4\"");
html_body.push_str(" defer=\"true\"");
html_body.push_str(">");
html_body.push_str("");
html_body.push_str("</script>");
html_body.push_str("<!-- Docs Script -->");
html_body.push_str("<script");
html_body.push_str(" src=\"/assets/docs.js?v=9\"");
html_body.push_str(" defer=\"true\"");
html_body.push_str(">");
html_body.push_str("");
html_body.push_str("</script>");
html_body.push_str("</body>");
html_body.push_str("</html>");

    axum::response::Html(html_body).into_response()
}

#[allow(non_snake_case, unreachable_code, unused_variables)]
async fn handle_components(headers: axum::http::HeaderMap, Query(params): Query<std::collections::HashMap<String, String>>) -> impl axum::response::IntoResponse {
    let mut html_body = String::new();
html_body.push_str("<!DOCTYPE html>");
html_body.push_str("<html");
html_body.push_str(" lang=\"en\"");
html_body.push_str(">");
html_body.push_str("<head");
html_body.push_str(">");
html_body.push_str("<meta");
html_body.push_str(" charset=\"UTF-8\"");
html_body.push_str(">");
html_body.push_str("</meta>");
html_body.push_str("<meta");
html_body.push_str(" name=\"viewport\"");
html_body.push_str(" content=\"width=device-width, initial-scale=1.0\"");
html_body.push_str(">");
html_body.push_str("</meta>");
html_body.push_str("<title");
html_body.push_str(">");
html_body.push_str("Nucleus | The Hyper-Optimized Framework");
html_body.push_str("</title>");
html_body.push_str("<meta");
html_body.push_str(" name=\"description\"");
html_body.push_str(" content=\"Build high-performance full-stack apps with Rust. Zero-compromise speed, developer experience, and safety.\"");
html_body.push_str(">");
html_body.push_str("</meta>");
html_body.push_str("<!-- DNS Prefetch & Preconnect for External Resources -->");
html_body.push_str("<link");
html_body.push_str(" rel=\"dns-prefetch\"");
html_body.push_str(" href=\"//fonts.googleapis.com\"");
html_body.push_str(">");
html_body.push_str("</link>");
html_body.push_str("<link");
html_body.push_str(" rel=\"dns-prefetch\"");
html_body.push_str(" href=\"//fonts.gstatic.com\"");
html_body.push_str(">");
html_body.push_str("</link>");
html_body.push_str("<link");
html_body.push_str(" rel=\"preconnect\"");
html_body.push_str(" href=\"https://fonts.googleapis.com\"");
html_body.push_str(">");
html_body.push_str("</link>");
html_body.push_str("<link");
html_body.push_str(" rel=\"preconnect\"");
html_body.push_str(" href=\"https://fonts.gstatic.com\"");
html_body.push_str(" crossorigin=\"true\"");
html_body.push_str(">");
html_body.push_str("</link>");
html_body.push_str("<!-- Favicon -->");
html_body.push_str("<link");
html_body.push_str(" rel=\"icon\"");
html_body.push_str(" href=\"data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>‚ö°</text></svg>\"");
html_body.push_str(">");
html_body.push_str("</link>");
html_body.push_str("<!-- Critical CSS (inlined for render performance) -->");
html_body.push_str("<style");
html_body.push_str(" critical=\"true\"");
html_body.push_str(">");
html_body.push_str("\n        /* Critical above-the-fold styles */\n        body { margin: 0; background: #000; color: #ededed; font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif; }\n        .nav { position: fixed; top: 0; left: 0; right: 0; z-index: 100; padding: 16px 0; background: rgba(0,0,0,0.8); backdrop-filter: blur(20px); }\n    ");
html_body.push_str("</style>");
html_body.push_str("<!-- Main Stylesheet (non-blocking with media swap) -->");
html_body.push_str("<link");
html_body.push_str(" href=\"/assets/output.css\"");
html_body.push_str(" rel=\"stylesheet\"");
html_body.push_str(">");
html_body.push_str("</link>");
html_body.push_str("<!-- Accessibility Styles (WCAG 2.1 AA) -->");
html_body.push_str("<link");
html_body.push_str(" href=\"/assets/accessibility.css\"");
html_body.push_str(" rel=\"stylesheet\"");
html_body.push_str(">");
html_body.push_str("</link>");
html_body.push_str("<!-- Highlight.js for syntax highlighting (Local) -->");
html_body.push_str("<link");
html_body.push_str(" rel=\"stylesheet\"");
html_body.push_str(" href=\"/assets/highlight.css?v=4\"");
html_body.push_str(">");
html_body.push_str("</link>");
html_body.push_str("<script");
html_body.push_str(" src=\"/assets/highlight.min.js?v=4\"");
html_body.push_str(">");
html_body.push_str("");
html_body.push_str("</script>");
html_body.push_str("<!-- Google Fonts with font-display: swap (non-render-blocking) -->");
html_body.push_str("<link");
html_body.push_str(" href=\"https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap\"");
html_body.push_str(" rel=\"stylesheet\"");
html_body.push_str(" media=\"print\"");
html_body.push_str(" onload=\"this.media='all'\"");
html_body.push_str(">");
html_body.push_str("</link>");
html_body.push_str("<noscript");
html_body.push_str(">");
html_body.push_str("<link");
html_body.push_str(" href=\"https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap\"");
html_body.push_str(" rel=\"stylesheet\"");
html_body.push_str(">");
html_body.push_str("</link>");
html_body.push_str("</noscript>");
html_body.push_str("<link");
html_body.push_str(" rel=\"preconnect\"");
html_body.push_str(" href=\"https://fonts.googleapis.com\"");
html_body.push_str(">");
html_body.push_str("</link>");
html_body.push_str("<link");
html_body.push_str(" rel=\"preconnect\"");
html_body.push_str(" href=\"https://fonts.gstatic.com\"");
html_body.push_str(">");
html_body.push_str("</link>");
html_body.push_str("</head>");
html_body.push_str("<body");
html_body.push_str(">");
html_body.push_str("<!-- Skip Link for Keyboard Navigation (WCAG 2.4.1) -->");
html_body.push_str("<a");
html_body.push_str(" href=\"#main-content\"");
html_body.push_str(" class=\"skip-link\"");
html_body.push_str(">");
html_body.push_str("Skip to main content");
html_body.push_str("</a>");
html_body.push_str("<!-- Screen Reader Announcements (WCAG 4.1.3) -->");
html_body.push_str("<div");
html_body.push_str(" id=\"a11y-announcer\"");
html_body.push_str(" class=\"sr-only\"");
html_body.push_str(" aria-live=\"polite\"");
html_body.push_str(" aria-atomic=\"true\"");
html_body.push_str(">");
html_body.push_str("</div>");
html_body.push_str("<n:layout");
html_body.push_str(" name=\"layout\"");
html_body.push_str(">");
html_body.push_str("<!-- Navigation -->");
html_body.push_str("<nav");
html_body.push_str(" class=\"showcase-nav\"");
html_body.push_str(">");
html_body.push_str("<a href=\"/\" data-nucleus-link=\"true\">");
html_body.push_str("üß© Components Showcase");
html_body.push_str("</a>");
html_body.push_str("<div");
html_body.push_str(" class=\"showcase-links\"");
html_body.push_str(">");
html_body.push_str("<a");
html_body.push_str(" href=\"#buttons\"");
html_body.push_str(">");
html_body.push_str("Buttons");
html_body.push_str("</a>");
html_body.push_str("<a");
html_body.push_str(" href=\"#cards\"");
html_body.push_str(">");
html_body.push_str("Cards");
html_body.push_str("</a>");
html_body.push_str("<a");
html_body.push_str(" href=\"#badges\"");
html_body.push_str(">");
html_body.push_str("Badges");
html_body.push_str("</a>");
html_body.push_str("<a href=\"/docs/components\" data-nucleus-link=\"true\">");
html_body.push_str("Docs");
html_body.push_str("</a>");
html_body.push_str("</div>");
html_body.push_str("</nav>");
html_body.push_str("<!-- Hero -->");
html_body.push_str("<section");
html_body.push_str(" class=\"showcase-hero\"");
html_body.push_str(">");
html_body.push_str("<h1");
html_body.push_str(">");
html_body.push_str("Nucleus Components");
html_body.push_str("</h1>");
html_body.push_str("<p");
html_body.push_str(">");
html_body.push_str("Reusable, type-safe, scoped-styled UI components");
html_body.push_str("</p>");
html_body.push_str("</section>");
html_body.push_str("<!-- Buttons -->");
html_body.push_str("<section");
html_body.push_str(" id=\"buttons\"");
html_body.push_str(" class=\"showcase-section\"");
html_body.push_str(">");
html_body.push_str("<h2");
html_body.push_str(">");
html_body.push_str("Button Component");
html_body.push_str("</h2>");
html_body.push_str("<p");
html_body.push_str(" class=\"section-desc\"");
html_body.push_str(">");
html_body.push_str("Buttons with variants, sizes, and optional href for links");
html_body.push_str("</p>");
html_body.push_str("<div");
html_body.push_str(" class=\"component-row\"");
html_body.push_str(">");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" class=\"component-row\"");
html_body.push_str(">");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" class=\"component-row\"");
html_body.push_str(">");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" class=\"code-preview\"");
html_body.push_str(">");
html_body.push_str("&lt;Button variant=\"primary\" size=\"md\"&gt;Click Me&lt;/Button&gt;\n&lt;Button href=\"/docs\" variant=\"gradient\"&gt;Learn More ‚Üí&lt;/Button&gt;\n    ");
html_body.push_str("</div>");
html_body.push_str("</section>");
html_body.push_str("<!-- Cards -->");
html_body.push_str("<section");
html_body.push_str(" id=\"cards\"");
html_body.push_str(" class=\"showcase-section\"");
html_body.push_str(">");
html_body.push_str("<h2");
html_body.push_str(">");
html_body.push_str("Card Component");
html_body.push_str("</h2>");
html_body.push_str("<p");
html_body.push_str(" class=\"section-desc\"");
html_body.push_str(">");
html_body.push_str("Container cards with variants and glass effect");
html_body.push_str("</p>");
html_body.push_str("<div");
html_body.push_str(" class=\"component-row\"");
html_body.push_str(">");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" class=\"code-preview\"");
html_body.push_str(">");
html_body.push_str("&lt;Card variant=\"highlight\" glass=\"true\"&gt;\n  &lt;h3&gt;Title&lt;/h3&gt;\n  &lt;p&gt;Content&lt;/p&gt;\n&lt;/Card&gt;\n    ");
html_body.push_str("</div>");
html_body.push_str("</section>");
html_body.push_str("<!-- Badges -->");
html_body.push_str("<section");
html_body.push_str(" id=\"badges\"");
html_body.push_str(" class=\"showcase-section\"");
html_body.push_str(">");
html_body.push_str("<h2");
html_body.push_str(">");
html_body.push_str("Badge Component");
html_body.push_str("</h2>");
html_body.push_str("<p");
html_body.push_str(" class=\"section-desc\"");
html_body.push_str(">");
html_body.push_str("Labels and tags with variants and icons");
html_body.push_str("</p>");
html_body.push_str("<div");
html_body.push_str(" class=\"component-row\"");
html_body.push_str(">");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" class=\"code-preview\"");
html_body.push_str(">");
html_body.push_str("&lt;Badge variant=\"primary\" icon=\"‚ö°\"&gt;New Feature&lt;/Badge&gt;\n    ");
html_body.push_str("</div>");
html_body.push_str("</section>");
html_body.push_str("<!-- FeatureCard -->");
html_body.push_str("<section");
html_body.push_str(" id=\"feature-cards\"");
html_body.push_str(" class=\"showcase-section\"");
html_body.push_str(">");
html_body.push_str("<h2");
html_body.push_str(">");
html_body.push_str("FeatureCard Component");
html_body.push_str("</h2>");
html_body.push_str("<p");
html_body.push_str(" class=\"section-desc\"");
html_body.push_str(">");
html_body.push_str("Feature showcase cards with icon, title, and description");
html_body.push_str("</p>");
html_body.push_str("<div");
html_body.push_str(" class=\"component-row\"");
html_body.push_str(">");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" class=\"code-preview\"");
html_body.push_str(">");
html_body.push_str("&lt;FeatureCard \n  icon=\"‚ö°\" \n  title=\"Hyper Speed\" \n  description=\"20,000+ RPS with sub-ms latency\" \n/&gt;\n    ");
html_body.push_str("</div>");
html_body.push_str("</section>");
html_body.push_str("<!-- StatCard -->");
html_body.push_str("<section");
html_body.push_str(" id=\"stat-cards\"");
html_body.push_str(" class=\"showcase-section\"");
html_body.push_str(">");
html_body.push_str("<h2");
html_body.push_str(">");
html_body.push_str("StatCard Component");
html_body.push_str("</h2>");
html_body.push_str("<p");
html_body.push_str(" class=\"section-desc\"");
html_body.push_str(">");
html_body.push_str("Metrics and statistics display");
html_body.push_str("</p>");
html_body.push_str("<div");
html_body.push_str(" class=\"component-row\"");
html_body.push_str(">");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" class=\"code-preview\"");
html_body.push_str(">");
html_body.push_str("&lt;StatCard value=\"5x\" label=\"Faster\" highlight=\"true\" /&gt;\n    ");
html_body.push_str("</div>");
html_body.push_str("</section>");
html_body.push_str("<!-- Footer -->");
html_body.push_str("<footer");
html_body.push_str(" class=\"showcase-footer\"");
html_body.push_str(">");
html_body.push_str("<p");
html_body.push_str(">");
html_body.push_str("Nucleus Component System ‚Äî Props, Slots, Scoped CSS");
html_body.push_str("</p>");
html_body.push_str("</footer>");
html_body.push_str("</n:layout>");
html_body.push_str("<!-- Nucleus Client-Side Router for SPA-like navigation -->");
html_body.push_str("<script");
html_body.push_str(" src=\"/assets/router.js?v=4\"");
html_body.push_str(" defer=\"true\"");
html_body.push_str(">");
html_body.push_str("");
html_body.push_str("</script>");
html_body.push_str("<!-- Docs Script -->");
html_body.push_str("<script");
html_body.push_str(" src=\"/assets/docs.js?v=9\"");
html_body.push_str(" defer=\"true\"");
html_body.push_str(">");
html_body.push_str("");
html_body.push_str("</script>");
html_body.push_str("</body>");
html_body.push_str("</html>");

    axum::response::Html(html_body).into_response()
}

#[allow(non_snake_case, unreachable_code, unused_variables)]
async fn handle_playground(headers: axum::http::HeaderMap, Query(params): Query<std::collections::HashMap<String, String>>) -> impl axum::response::IntoResponse {
    let mut html_body = String::new();
html_body.push_str("<!DOCTYPE html>");
html_body.push_str("<html");
html_body.push_str(" lang=\"en\"");
html_body.push_str(">");
html_body.push_str("<head");
html_body.push_str(">");
html_body.push_str("<meta");
html_body.push_str(" charset=\"UTF-8\"");
html_body.push_str(">");
html_body.push_str("</meta>");
html_body.push_str("<meta");
html_body.push_str(" name=\"viewport\"");
html_body.push_str(" content=\"width=device-width, initial-scale=1.0\"");
html_body.push_str(">");
html_body.push_str("</meta>");
html_body.push_str("<title");
html_body.push_str(">");
html_body.push_str("Nucleus | The Hyper-Optimized Framework");
html_body.push_str("</title>");
html_body.push_str("<meta");
html_body.push_str(" name=\"description\"");
html_body.push_str(" content=\"Build high-performance full-stack apps with Rust. Zero-compromise speed, developer experience, and safety.\"");
html_body.push_str(">");
html_body.push_str("</meta>");
html_body.push_str("<!-- DNS Prefetch & Preconnect for External Resources -->");
html_body.push_str("<link");
html_body.push_str(" rel=\"dns-prefetch\"");
html_body.push_str(" href=\"//fonts.googleapis.com\"");
html_body.push_str(">");
html_body.push_str("</link>");
html_body.push_str("<link");
html_body.push_str(" rel=\"dns-prefetch\"");
html_body.push_str(" href=\"//fonts.gstatic.com\"");
html_body.push_str(">");
html_body.push_str("</link>");
html_body.push_str("<link");
html_body.push_str(" rel=\"preconnect\"");
html_body.push_str(" href=\"https://fonts.googleapis.com\"");
html_body.push_str(">");
html_body.push_str("</link>");
html_body.push_str("<link");
html_body.push_str(" rel=\"preconnect\"");
html_body.push_str(" href=\"https://fonts.gstatic.com\"");
html_body.push_str(" crossorigin=\"true\"");
html_body.push_str(">");
html_body.push_str("</link>");
html_body.push_str("<!-- Favicon -->");
html_body.push_str("<link");
html_body.push_str(" rel=\"icon\"");
html_body.push_str(" href=\"data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>‚ö°</text></svg>\"");
html_body.push_str(">");
html_body.push_str("</link>");
html_body.push_str("<!-- Critical CSS (inlined for render performance) -->");
html_body.push_str("<style");
html_body.push_str(" critical=\"true\"");
html_body.push_str(">");
html_body.push_str("\n        /* Critical above-the-fold styles */\n        body { margin: 0; background: #000; color: #ededed; font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif; }\n        .nav { position: fixed; top: 0; left: 0; right: 0; z-index: 100; padding: 16px 0; background: rgba(0,0,0,0.8); backdrop-filter: blur(20px); }\n    ");
html_body.push_str("</style>");
html_body.push_str("<!-- Main Stylesheet (non-blocking with media swap) -->");
html_body.push_str("<link");
html_body.push_str(" href=\"/assets/output.css\"");
html_body.push_str(" rel=\"stylesheet\"");
html_body.push_str(">");
html_body.push_str("</link>");
html_body.push_str("<!-- Accessibility Styles (WCAG 2.1 AA) -->");
html_body.push_str("<link");
html_body.push_str(" href=\"/assets/accessibility.css\"");
html_body.push_str(" rel=\"stylesheet\"");
html_body.push_str(">");
html_body.push_str("</link>");
html_body.push_str("<!-- Highlight.js for syntax highlighting (Local) -->");
html_body.push_str("<link");
html_body.push_str(" rel=\"stylesheet\"");
html_body.push_str(" href=\"/assets/highlight.css?v=4\"");
html_body.push_str(">");
html_body.push_str("</link>");
html_body.push_str("<script");
html_body.push_str(" src=\"/assets/highlight.min.js?v=4\"");
html_body.push_str(">");
html_body.push_str("");
html_body.push_str("</script>");
html_body.push_str("<!-- Google Fonts with font-display: swap (non-render-blocking) -->");
html_body.push_str("<link");
html_body.push_str(" href=\"https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap\"");
html_body.push_str(" rel=\"stylesheet\"");
html_body.push_str(" media=\"print\"");
html_body.push_str(" onload=\"this.media='all'\"");
html_body.push_str(">");
html_body.push_str("</link>");
html_body.push_str("<noscript");
html_body.push_str(">");
html_body.push_str("<link");
html_body.push_str(" href=\"https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap\"");
html_body.push_str(" rel=\"stylesheet\"");
html_body.push_str(">");
html_body.push_str("</link>");
html_body.push_str("</noscript>");
html_body.push_str("<link");
html_body.push_str(" rel=\"preconnect\"");
html_body.push_str(" href=\"https://fonts.googleapis.com\"");
html_body.push_str(">");
html_body.push_str("</link>");
html_body.push_str("<link");
html_body.push_str(" rel=\"preconnect\"");
html_body.push_str(" href=\"https://fonts.gstatic.com\"");
html_body.push_str(">");
html_body.push_str("</link>");
html_body.push_str("</head>");
html_body.push_str("<body");
html_body.push_str(">");
html_body.push_str("<!-- Skip Link for Keyboard Navigation (WCAG 2.4.1) -->");
html_body.push_str("<a");
html_body.push_str(" href=\"#main-content\"");
html_body.push_str(" class=\"skip-link\"");
html_body.push_str(">");
html_body.push_str("Skip to main content");
html_body.push_str("</a>");
html_body.push_str("<!-- Screen Reader Announcements (WCAG 4.1.3) -->");
html_body.push_str("<div");
html_body.push_str(" id=\"a11y-announcer\"");
html_body.push_str(" class=\"sr-only\"");
html_body.push_str(" aria-live=\"polite\"");
html_body.push_str(" aria-atomic=\"true\"");
html_body.push_str(">");
html_body.push_str("</div>");
html_body.push_str("<n:layout");
html_body.push_str(" name=\"clean_layout\"");
html_body.push_str(">");
html_body.push_str("<link");
html_body.push_str(" href=\"/assets/playground.css?v=6\"");
html_body.push_str(" rel=\"stylesheet\"");
html_body.push_str(">");
html_body.push_str("</link>");
html_body.push_str("<link");
html_body.push_str(" href=\"/assets/playground_sidebar.css?v=6\"");
html_body.push_str(" rel=\"stylesheet\"");
html_body.push_str(">");
html_body.push_str("</link>");
html_body.push_str("<!-- Playground Container -->");
html_body.push_str("<div");
html_body.push_str(" class=\"playground-container\"");
html_body.push_str(" role=\"main\"");
html_body.push_str(" id=\"main-content\"");
html_body.push_str(">");
html_body.push_str("<!-- Header Bar -->");
html_body.push_str("<header");
html_body.push_str(" class=\"playground-header\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" class=\"playground-header-left\"");
html_body.push_str(">");
html_body.push_str("<a href=\"/\" data-nucleus-link=\"true\">");
html_body.push_str("<span");
html_body.push_str(" class=\"logo-icon\"");
html_body.push_str(">");
html_body.push_str("‚ö°");
html_body.push_str("</span>");
html_body.push_str("<span");
html_body.push_str(" class=\"logo-text\"");
html_body.push_str(">");
html_body.push_str("Nucleus");
html_body.push_str("</span>");
html_body.push_str("</a>");
html_body.push_str("<span");
html_body.push_str(" class=\"playground-separator\"");
html_body.push_str(">");
html_body.push_str("/");
html_body.push_str("</span>");
html_body.push_str("<h1");
html_body.push_str(" class=\"playground-title\"");
html_body.push_str(">");
html_body.push_str("Playground");
html_body.push_str("</h1>");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" class=\"playground-header-center\"");
html_body.push_str(">");
html_body.push_str("<!-- Example selector moved to sidebar -->");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" class=\"playground-header-right\"");
html_body.push_str(">");
html_body.push_str("<button");
html_body.push_str(" id=\"run-btn\"");
html_body.push_str(" class=\"playground-btn playground-btn-primary\"");
html_body.push_str(" aria-label=\"Run code\"");
html_body.push_str(">");
html_body.push_str("<span");
html_body.push_str(" class=\"btn-icon\"");
html_body.push_str(">");
html_body.push_str("‚ñ∂");
html_body.push_str("</span>");
html_body.push_str("<span");
html_body.push_str(" class=\"btn-text\"");
html_body.push_str(">");
html_body.push_str("Run");
html_body.push_str("</span>");
html_body.push_str("</button>");
html_body.push_str("<button");
html_body.push_str(" id=\"share-btn\"");
html_body.push_str(" class=\"playground-btn\"");
html_body.push_str(" aria-label=\"Share code\"");
html_body.push_str(">");
html_body.push_str("<span");
html_body.push_str(" class=\"btn-icon\"");
html_body.push_str(">");
html_body.push_str("üîó");
html_body.push_str("</span>");
html_body.push_str("<span");
html_body.push_str(" class=\"btn-text\"");
html_body.push_str(">");
html_body.push_str("Share");
html_body.push_str("</span>");
html_body.push_str("</button>");
html_body.push_str("<button");
html_body.push_str(" id=\"download-btn\"");
html_body.push_str(" class=\"playground-btn\"");
html_body.push_str(" aria-label=\"Download HTML\"");
html_body.push_str(">");
html_body.push_str("<span");
html_body.push_str(" class=\"btn-icon\"");
html_body.push_str(">");
html_body.push_str("‚¨á");
html_body.push_str("</span>");
html_body.push_str("<span");
html_body.push_str(" class=\"btn-text\"");
html_body.push_str(">");
html_body.push_str("Download");
html_body.push_str("</span>");
html_body.push_str("</button>");
html_body.push_str("<a href=\"/docs\" data-nucleus-link=\"true\">");
html_body.push_str("<span");
html_body.push_str(" class=\"btn-icon\"");
html_body.push_str(">");
html_body.push_str("üìö");
html_body.push_str("</span>");
html_body.push_str("<span");
html_body.push_str(" class=\"btn-text\"");
html_body.push_str(">");
html_body.push_str("Docs");
html_body.push_str("</span>");
html_body.push_str("</a>");
html_body.push_str("</div>");
html_body.push_str("</header>");
html_body.push_str("<!-- Main Playground Area -->");
html_body.push_str("<div");
html_body.push_str(" class=\"playground-main\"");
html_body.push_str(">");
html_body.push_str("<!-- Sidebar -->");
html_body.push_str("<aside");
html_body.push_str(" class=\"playground-sidebar\"");
html_body.push_str(">");
html_body.push_str("<!-- Project Header -->");
html_body.push_str("<div");
html_body.push_str(" class=\"sidebar-project-header\"");
html_body.push_str(">");
html_body.push_str("<button");
html_body.push_str(" class=\"project-dropdown-btn\"");
html_body.push_str(" id=\"project-dropdown-btn\"");
html_body.push_str(" aria-haspopup=\"true\"");
html_body.push_str(">");
html_body.push_str("<span");
html_body.push_str(" class=\"project-icon\"");
html_body.push_str(">");
html_body.push_str("üìÅ");
html_body.push_str("</span>");
html_body.push_str("<span");
html_body.push_str(" class=\"project-name\"");
html_body.push_str(" id=\"current-project-name\"");
html_body.push_str(">");
html_body.push_str("My Project");
html_body.push_str("</span>");
html_body.push_str("<span");
html_body.push_str(" class=\"dropdown-arrow\"");
html_body.push_str(">");
html_body.push_str("‚ñæ");
html_body.push_str("</span>");
html_body.push_str("</button>");
html_body.push_str("<div");
html_body.push_str(" class=\"project-dropdown hidden\"");
html_body.push_str(" id=\"project-dropdown\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" class=\"dropdown-section\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" class=\"dropdown-header\"");
html_body.push_str(">");
html_body.push_str("Projects");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" id=\"projects-list\"");
html_body.push_str(">");
html_body.push_str("</div>");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" class=\"dropdown-divider\"");
html_body.push_str(">");
html_body.push_str("</div>");
html_body.push_str("<button");
html_body.push_str(" class=\"dropdown-item\"");
html_body.push_str(" onclick=\"createNewProject()\"");
html_body.push_str(">");
html_body.push_str("<span");
html_body.push_str(">");
html_body.push_str("‚ûï");
html_body.push_str("</span>");
html_body.push_str("New Project\n                            ");
html_body.push_str("</button>");
html_body.push_str("</div>");
html_body.push_str("</div>");
html_body.push_str("<!-- Search -->");
html_body.push_str("<div");
html_body.push_str(" class=\"sidebar-search\"");
html_body.push_str(">");
html_body.push_str("<span");
html_body.push_str(" class=\"search-icon\"");
html_body.push_str(">");
html_body.push_str("üîç");
html_body.push_str("</span>");
html_body.push_str("<input");
html_body.push_str(" type=\"text\"");
html_body.push_str(" id=\"file-search\"");
html_body.push_str(" placeholder=\"Search files...\"");
html_body.push_str(" class=\"search-input\"");
html_body.push_str(">");
html_body.push_str("</input>");
html_body.push_str("</div>");
html_body.push_str("<!-- View Tabs -->");
html_body.push_str("<div");
html_body.push_str(" class=\"sidebar-tabs\"");
html_body.push_str(" role=\"tablist\"");
html_body.push_str(">");
html_body.push_str("<button");
html_body.push_str(" class=\"sidebar-tab active\"");
html_body.push_str(" data-view=\"files\"");
html_body.push_str(" role=\"tab\"");
html_body.push_str(" aria-selected=\"true\"");
html_body.push_str(">");
html_body.push_str("Files");
html_body.push_str("</button>");
html_body.push_str("<button");
html_body.push_str(" class=\"sidebar-tab\"");
html_body.push_str(" data-view=\"favorites\"");
html_body.push_str(" role=\"tab\"");
html_body.push_str(" aria-selected=\"false\"");
html_body.push_str(">");
html_body.push_str("‚òÖ");
html_body.push_str("</button>");
html_body.push_str("<button");
html_body.push_str(" class=\"sidebar-tab\"");
html_body.push_str(" data-view=\"recents\"");
html_body.push_str(" role=\"tab\"");
html_body.push_str(" aria-selected=\"false\"");
html_body.push_str(">");
html_body.push_str("‚è±");
html_body.push_str("</button>");
html_body.push_str("</div>");
html_body.push_str("<!-- Dynamic Content Area (SCROLLABLE) -->");
html_body.push_str("<div");
html_body.push_str(" class=\"sidebar-content\"");
html_body.push_str(" id=\"sidebar-content\"");
html_body.push_str(">");
html_body.push_str("<!-- Files View (default) -->");
html_body.push_str("<div");
html_body.push_str(" class=\"sidebar-view active\"");
html_body.push_str(" id=\"files-view\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" class=\"file-tree-header\"");
html_body.push_str(">");
html_body.push_str("<span");
html_body.push_str(" class=\"tree-title\"");
html_body.push_str(">");
html_body.push_str("Workspace");
html_body.push_str("</span>");
html_body.push_str("<button");
html_body.push_str(" class=\"tree-action-btn\"");
html_body.push_str(" onclick=\"openModal('new-file-dialog')\"");
html_body.push_str(" title=\"New File\"");
html_body.push_str(">");
html_body.push_str("+");
html_body.push_str("</button>");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" class=\"file-tree\"");
html_body.push_str(" id=\"file-tree\"");
html_body.push_str(">");
html_body.push_str("<!-- Dynamic file tree -->");
html_body.push_str("</div>");
html_body.push_str("<!-- Divider -->");
html_body.push_str("<div");
html_body.push_str(" class=\"sidebar-divider\"");
html_body.push_str(">");
html_body.push_str("</div>");
html_body.push_str("<!-- Templates Section (inside files view so it scrolls) -->");
html_body.push_str("<div");
html_body.push_str(" class=\"sidebar-section collapsible\"");
html_body.push_str(">");
html_body.push_str("<button");
html_body.push_str(" class=\"section-header\"");
html_body.push_str(" onclick=\"toggleSection('templates')\"");
html_body.push_str(">");
html_body.push_str("<span");
html_body.push_str(">");
html_body.push_str("üìö Templates");
html_body.push_str("</span>");
html_body.push_str("<span");
html_body.push_str(" class=\"collapse-icon\"");
html_body.push_str(" id=\"templates-collapse-icon\"");
html_body.push_str(">");
html_body.push_str("‚ñæ");
html_body.push_str("</span>");
html_body.push_str("</button>");
html_body.push_str("<div");
html_body.push_str(" class=\"section-content\"");
html_body.push_str(" id=\"templates-section\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" class=\"template-list\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" class=\"template-group\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" class=\"template-group-title\"");
html_body.push_str(">");
html_body.push_str("Starters");
html_body.push_str("</div>");
html_body.push_str("<button");
html_body.push_str(" class=\"template-item\"");
html_body.push_str(" data-template=\"hello\"");
html_body.push_str(">");
html_body.push_str("‚ö° Hello World");
html_body.push_str("</button>");
html_body.push_str("<button");
html_body.push_str(" class=\"template-item\"");
html_body.push_str(" data-template=\"landing\"");
html_body.push_str(">");
html_body.push_str("üöÄ Landing Page");
html_body.push_str("</button>");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" class=\"template-group\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" class=\"template-group-title\"");
html_body.push_str(">");
html_body.push_str("Components");
html_body.push_str("</div>");
html_body.push_str("<button");
html_body.push_str(" class=\"template-item\"");
html_body.push_str(" data-template=\"card\"");
html_body.push_str(">");
html_body.push_str("üé¥ Card Component");
html_body.push_str("</button>");
html_body.push_str("<button");
html_body.push_str(" class=\"template-item\"");
html_body.push_str(" data-template=\"button\"");
html_body.push_str(">");
html_body.push_str("üîò Button System");
html_body.push_str("</button>");
html_body.push_str("<button");
html_body.push_str(" class=\"template-item\"");
html_body.push_str(" data-template=\"form\"");
html_body.push_str(">");
html_body.push_str("üìù Forms & Inputs");
html_body.push_str("</button>");
html_body.push_str("<button");
html_body.push_str(" class=\"template-item\"");
html_body.push_str(" data-template=\"wizard\"");
html_body.push_str(">");
html_body.push_str("üìã Multi-Step Form");
html_body.push_str("</button>");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" class=\"template-group\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" class=\"template-group-title\"");
html_body.push_str(">");
html_body.push_str("Full Apps");
html_body.push_str("</div>");
html_body.push_str("<button");
html_body.push_str(" class=\"template-item\"");
html_body.push_str(" data-template=\"dashboard\"");
html_body.push_str(">");
html_body.push_str("üìä Dashboard");
html_body.push_str("</button>");
html_body.push_str("<button");
html_body.push_str(" class=\"template-item\"");
html_body.push_str(" data-template=\"auth\"");
html_body.push_str(">");
html_body.push_str("üîê Auth Pages");
html_body.push_str("</button>");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" class=\"template-group\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" class=\"template-group-title\"");
html_body.push_str(">");
html_body.push_str("State Management");
html_body.push_str("</div>");
html_body.push_str("<button");
html_body.push_str(" class=\"template-item\"");
html_body.push_str(" data-template=\"state_client\"");
html_body.push_str(">");
html_body.push_str("‚ö° Client (Simple)");
html_body.push_str("</button>");
html_body.push_str("<button");
html_body.push_str(" class=\"template-item\"");
html_body.push_str(" data-template=\"state_form\"");
html_body.push_str(">");
html_body.push_str("üìù Form (Server)");
html_body.push_str("</button>");
html_body.push_str("<button");
html_body.push_str(" class=\"template-item\"");
html_body.push_str(" data-template=\"state_island\"");
html_body.push_str(">");
html_body.push_str("‚öõ\u{fe0f} Neutron (Complex)");
html_body.push_str("</button>");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" class=\"template-group\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" class=\"template-group-title\"");
html_body.push_str(">");
html_body.push_str("Advanced Patterns");
html_body.push_str("</div>");
html_body.push_str("<button");
html_body.push_str(" class=\"template-item\"");
html_body.push_str(" data-template=\"imports\"");
html_body.push_str(">");
html_body.push_str("üì¶ Imports");
html_body.push_str("</button>");
html_body.push_str("<button");
html_body.push_str(" class=\"template-item\"");
html_body.push_str(" data-template=\"data\"");
html_body.push_str(">");
html_body.push_str("üìä Data Binding");
html_body.push_str("</button>");
html_body.push_str("<button");
html_body.push_str(" class=\"template-item\"");
html_body.push_str(" data-template=\"counter\"");
html_body.push_str(">");
html_body.push_str("üî¢ Counter");
html_body.push_str("</button>");
html_body.push_str("<button");
html_body.push_str(" class=\"template-item\"");
html_body.push_str(" data-template=\"todo\"");
html_body.push_str(">");
html_body.push_str("‚úÖ Todo App");
html_body.push_str("</button>");
html_body.push_str("<button");
html_body.push_str(" class=\"template-item\"");
html_body.push_str(" data-template=\"blog\"");
html_body.push_str(">");
html_body.push_str("üì∞ Blog Layout");
html_body.push_str("</button>");
html_body.push_str("</div>");
html_body.push_str("</div>");
html_body.push_str("</div>");
html_body.push_str("</div>");
html_body.push_str("</div>");
html_body.push_str("<!-- Favorites View -->");
html_body.push_str("<div");
html_body.push_str(" class=\"sidebar-view hidden\"");
html_body.push_str(" id=\"favorites-view\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" class=\"empty-state\"");
html_body.push_str(" id=\"favorites-empty\"");
html_body.push_str(">");
html_body.push_str("<span");
html_body.push_str(" class=\"empty-icon\"");
html_body.push_str(">");
html_body.push_str("‚≠ê");
html_body.push_str("</span>");
html_body.push_str("<p");
html_body.push_str(">");
html_body.push_str("No favorites yet");
html_body.push_str("</p>");
html_body.push_str("<p");
html_body.push_str(" class=\"empty-hint\"");
html_body.push_str(">");
html_body.push_str("Click ‚òÖ on a project to add it here");
html_body.push_str("</p>");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" class=\"project-cards\"");
html_body.push_str(" id=\"favorites-list\"");
html_body.push_str(">");
html_body.push_str("</div>");
html_body.push_str("</div>");
html_body.push_str("<!-- Recents View -->");
html_body.push_str("<div");
html_body.push_str(" class=\"sidebar-view hidden\"");
html_body.push_str(" id=\"recents-view\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" class=\"empty-state\"");
html_body.push_str(" id=\"recents-empty\"");
html_body.push_str(">");
html_body.push_str("<span");
html_body.push_str(" class=\"empty-icon\"");
html_body.push_str(">");
html_body.push_str("‚è±");
html_body.push_str("</span>");
html_body.push_str("<p");
html_body.push_str(">");
html_body.push_str("No recent projects");
html_body.push_str("</p>");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" class=\"project-cards\"");
html_body.push_str(" id=\"recents-list\"");
html_body.push_str(">");
html_body.push_str("</div>");
html_body.push_str("</div>");
html_body.push_str("</div>");
html_body.push_str("<!-- Settings Footer (FIXED) -->");
html_body.push_str("<div");
html_body.push_str(" class=\"sidebar-section sidebar-footer\"");
html_body.push_str(">");
html_body.push_str("<label");
html_body.push_str(" class=\"sidebar-checkbox\"");
html_body.push_str(">");
html_body.push_str("<input");
html_body.push_str(" type=\"checkbox\"");
html_body.push_str(" id=\"use-tailwind\"");
html_body.push_str(" checked=\"true\"");
html_body.push_str(">");
html_body.push_str("</input>");
html_body.push_str("<span");
html_body.push_str(" class=\"checkbox-label\"");
html_body.push_str(">");
html_body.push_str("<span");
html_body.push_str(" class=\"icon\"");
html_body.push_str(">");
html_body.push_str("üåä");
html_body.push_str("</span>");
html_body.push_str("Tailwind CSS\n                            ");
html_body.push_str("</span>");
html_body.push_str("</label>");
html_body.push_str("<div");
html_body.push_str(" class=\"sidebar-resources\"");
html_body.push_str(">");
html_body.push_str("<button");
html_body.push_str(" class=\"resource-toggle-btn\"");
html_body.push_str(" onclick=\"toggleSection('resources')\"");
html_body.push_str(">");
html_body.push_str("<span");
html_body.push_str(">");
html_body.push_str("üì¶ Resources");
html_body.push_str("</span>");
html_body.push_str("<span");
html_body.push_str(" class=\"collapse-icon\"");
html_body.push_str(" id=\"resources-collapse-icon\"");
html_body.push_str(">");
html_body.push_str("‚ñ∏");
html_body.push_str("</span>");
html_body.push_str("</button>");
html_body.push_str("<div");
html_body.push_str(" class=\"section-content hidden\"");
html_body.push_str(" id=\"resources-section\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" class=\"resource-group\"");
html_body.push_str(">");
html_body.push_str("<label");
html_body.push_str(" class=\"resource-label\"");
html_body.push_str(">");
html_body.push_str("CSS");
html_body.push_str("</label>");
html_body.push_str("<div");
html_body.push_str(" id=\"css-resources\"");
html_body.push_str(">");
html_body.push_str("</div>");
html_body.push_str("<button");
html_body.push_str(" class=\"sidebar-btn-sm\"");
html_body.push_str(" onclick=\"addResource('css')\"");
html_body.push_str(">");
html_body.push_str("+ Add");
html_body.push_str("</button>");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" class=\"resource-group\"");
html_body.push_str(">");
html_body.push_str("<label");
html_body.push_str(" class=\"resource-label\"");
html_body.push_str(">");
html_body.push_str("JS");
html_body.push_str("</label>");
html_body.push_str("<div");
html_body.push_str(" id=\"js-resources\"");
html_body.push_str(">");
html_body.push_str("</div>");
html_body.push_str("<button");
html_body.push_str(" class=\"sidebar-btn-sm\"");
html_body.push_str(" onclick=\"addResource('js')\"");
html_body.push_str(">");
html_body.push_str("+ Add");
html_body.push_str("</button>");
html_body.push_str("</div>");
html_body.push_str("</div>");
html_body.push_str("</div>");
html_body.push_str("</div>");
html_body.push_str("</aside>");
html_body.push_str("<!-- Editor & Preview Wrapper -->");
html_body.push_str("<div");
html_body.push_str(" class=\"playground-workspace\"");
html_body.push_str(">");
html_body.push_str("<!-- Editor Panel -->");
html_body.push_str("<div");
html_body.push_str(" class=\"playground-panel playground-editor-panel\"");
html_body.push_str(" id=\"editor-panel\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" class=\"panel-header\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" class=\"panel-tabs\"");
html_body.push_str(" role=\"tablist\"");
html_body.push_str(" id=\"editor-tabs\"");
html_body.push_str(">");
html_body.push_str("<!-- Dynamic Tabs -->");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" class=\"panel-actions\"");
html_body.push_str(">");
html_body.push_str("<button");
html_body.push_str(" id=\"format-btn\"");
html_body.push_str(" class=\"panel-action-btn\"");
html_body.push_str(" aria-label=\"Format code\"");
html_body.push_str(" title=\"Format (Ctrl+Shift+F)\"");
html_body.push_str(">");
html_body.push_str("‚ú®\n                                ");
html_body.push_str("</button>");
html_body.push_str("<button");
html_body.push_str(" id=\"copy-btn\"");
html_body.push_str(" class=\"panel-action-btn\"");
html_body.push_str(" aria-label=\"Copy code\"");
html_body.push_str(" title=\"Copy\"");
html_body.push_str(">");
html_body.push_str("üìã\n                                ");
html_body.push_str("</button>");
html_body.push_str("</div>");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" class=\"editor-container\"");
html_body.push_str(" id=\"editor-container\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" id=\"monaco-container\"");
html_body.push_str(" style=\"width: 100%; height: 100%; position: absolute; top: 0; left: 0;\"");
html_body.push_str(">");
html_body.push_str("</div>");
html_body.push_str("<textarea");
html_body.push_str(" id=\"code-editor\"");
html_body.push_str(" class=\"code-editor hidden\"");
html_body.push_str(" spellcheck=\"false\"");
html_body.push_str(" placeholder=\"Write your Nucleus template here...\"");
html_body.push_str(">");
html_body.push_str("</textarea>");
html_body.push_str("<textarea");
html_body.push_str(" id=\"css-editor\"");
html_body.push_str(" class=\"code-editor hidden\"");
html_body.push_str(" spellcheck=\"false\"");
html_body.push_str(" placeholder=\"Add custom styles...\"");
html_body.push_str(">");
html_body.push_str("</textarea>");
html_body.push_str("</div>");
html_body.push_str("</div>");
html_body.push_str("<!-- Resize Handle -->");
html_body.push_str("<div");
html_body.push_str(" class=\"playground-resizer\"");
html_body.push_str(" id=\"resizer\"");
html_body.push_str(" role=\"separator\"");
html_body.push_str(" aria-valuenow=\"50\"");
html_body.push_str(" tabindex=\"0\"");
html_body.push_str(" aria-label=\"Resize panels\"");
html_body.push_str(">");
html_body.push_str("</div>");
html_body.push_str("<!-- Preview Panel -->");
html_body.push_str("<div");
html_body.push_str(" class=\"playground-panel playground-preview-panel\"");
html_body.push_str(" id=\"preview-panel\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" class=\"panel-header\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" class=\"panel-tabs\"");
html_body.push_str(">");
html_body.push_str("<button");
html_body.push_str(" class=\"panel-tab active\"");
html_body.push_str(" role=\"tab\"");
html_body.push_str(" data-preview=\"render\"");
html_body.push_str(">");
html_body.push_str("<span");
html_body.push_str(" class=\"tab-icon\"");
html_body.push_str(">");
html_body.push_str("üëÅ");
html_body.push_str("</span>");
html_body.push_str("Preview\n                                ");
html_body.push_str("</button>");
html_body.push_str("<button");
html_body.push_str(" class=\"panel-tab\"");
html_body.push_str(" role=\"tab\"");
html_body.push_str(" data-preview=\"html\"");
html_body.push_str(">");
html_body.push_str("<span");
html_body.push_str(" class=\"tab-icon\"");
html_body.push_str(">");
html_body.push_str("üîß");
html_body.push_str("</span>");
html_body.push_str("HTML Output\n                                ");
html_body.push_str("</button>");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" class=\"panel-status\"");
html_body.push_str(">");
html_body.push_str("<span");
html_body.push_str(" id=\"status-indicator\"");
html_body.push_str(" class=\"status-indicator status-ready\"");
html_body.push_str(" aria-live=\"polite\"");
html_body.push_str(">");
html_body.push_str("Ready");
html_body.push_str("</span>");
html_body.push_str("</div>");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" class=\"preview-container\"");
html_body.push_str(">");
html_body.push_str("<iframe");
html_body.push_str(" id=\"preview-frame\"");
html_body.push_str(" class=\"preview-frame\"");
html_body.push_str(" title=\"Live preview\"");
html_body.push_str(" sandbox=\"allow-scripts allow-modals allow-forms\"");
html_body.push_str(">");
html_body.push_str("</iframe>");
html_body.push_str("<pre");
html_body.push_str(" id=\"html-output\"");
html_body.push_str(" class=\"html-output hidden\"");
html_body.push_str(" aria-label=\"Generated HTML output\"");
html_body.push_str(">");
html_body.push_str("<code");
html_body.push_str(">");
html_body.push_str("</code>");
html_body.push_str("</pre>");
html_body.push_str("</div>");
html_body.push_str("</div>");
html_body.push_str("</div>");
html_body.push_str("</div>");
html_body.push_str("<!-- Footer Status Bar -->");
html_body.push_str("<footer");
html_body.push_str(" class=\"playground-footer\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" class=\"footer-left\"");
html_body.push_str(">");
html_body.push_str("<span");
html_body.push_str(" class=\"status-item\"");
html_body.push_str(">");
html_body.push_str("<span");
html_body.push_str(" class=\"status-dot\"");
html_body.push_str(">");
html_body.push_str("</span>");
html_body.push_str("<span");
html_body.push_str(" id=\"compile-status\"");
html_body.push_str(">");
html_body.push_str("Ready");
html_body.push_str("</span>");
html_body.push_str("</span>");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" class=\"footer-center\"");
html_body.push_str(">");
html_body.push_str("<kbd");
html_body.push_str(">");
html_body.push_str("Ctrl");
html_body.push_str("</kbd>");
html_body.push_str("+ ");
html_body.push_str("<kbd");
html_body.push_str(">");
html_body.push_str("Enter");
html_body.push_str("</kbd>");
html_body.push_str("to run\n                    ");
html_body.push_str("<span");
html_body.push_str(" class=\"footer-separator\"");
html_body.push_str(">");
html_body.push_str("|");
html_body.push_str("</span>");
html_body.push_str("<kbd");
html_body.push_str(">");
html_body.push_str("Ctrl");
html_body.push_str("</kbd>");
html_body.push_str("+ ");
html_body.push_str("<kbd");
html_body.push_str(">");
html_body.push_str("S");
html_body.push_str("</kbd>");
html_body.push_str("to save\n                ");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" class=\"footer-right\"");
html_body.push_str(">");
html_body.push_str("<span");
html_body.push_str(" class=\"footer-hint\"");
html_body.push_str(">");
html_body.push_str("Powered by Nucleus v3.5");
html_body.push_str("</span>");
html_body.push_str("</div>");
html_body.push_str("</footer>");
html_body.push_str("</div>");
html_body.push_str("<!-- Share Modal -->");
html_body.push_str("<div");
html_body.push_str(" id=\"share-modal\"");
html_body.push_str(" class=\"modal hidden\"");
html_body.push_str(" role=\"dialog\"");
html_body.push_str(" aria-labelledby=\"share-modal-title\"");
html_body.push_str(" aria-modal=\"true\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" class=\"modal-backdrop\"");
html_body.push_str(">");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" class=\"modal-content\"");
html_body.push_str(">");
html_body.push_str("<header");
html_body.push_str(" class=\"modal-header\"");
html_body.push_str(">");
html_body.push_str("<h2");
html_body.push_str(" id=\"share-modal-title\"");
html_body.push_str(">");
html_body.push_str("Share Your Code");
html_body.push_str("</h2>");
html_body.push_str("<button");
html_body.push_str(" class=\"modal-close\"");
html_body.push_str(" onclick=\"closeModal('share-modal')\"");
html_body.push_str(" aria-label=\"Close modal\"");
html_body.push_str(">");
html_body.push_str("&times;");
html_body.push_str("</button>");
html_body.push_str("</header>");
html_body.push_str("<div");
html_body.push_str(" class=\"modal-body\"");
html_body.push_str(">");
html_body.push_str("<p");
html_body.push_str(">");
html_body.push_str("Copy this URL to share your code:");
html_body.push_str("</p>");
html_body.push_str("<div");
html_body.push_str(" class=\"share-url-container\"");
html_body.push_str(">");
html_body.push_str("<input");
html_body.push_str(" type=\"text\"");
html_body.push_str(" id=\"share-url\"");
html_body.push_str(" class=\"share-url-input\"");
html_body.push_str(" readonly=\"true\"");
html_body.push_str(" aria-label=\"Shareable URL\"");
html_body.push_str(">");
html_body.push_str("</input>");
html_body.push_str("<button");
html_body.push_str(" id=\"copy-share-btn\"");
html_body.push_str(" class=\"playground-btn playground-btn-primary\"");
html_body.push_str(">");
html_body.push_str("Copy");
html_body.push_str("</button>");
html_body.push_str("</div>");
html_body.push_str("</div>");
html_body.push_str("</div>");
html_body.push_str("</div>");
html_body.push_str("<!-- Confirm Dialog (Semantic) -->");
html_body.push_str("<dialog");
html_body.push_str(" id=\"confirm-dialog\"");
html_body.push_str(" class=\"playground-dialog\"");
html_body.push_str(">");
html_body.push_str("<form");
html_body.push_str(" method=\"dialog\"");
html_body.push_str(">");
html_body.push_str("<header");
html_body.push_str(" class=\"dialog-header\"");
html_body.push_str(">");
html_body.push_str("<h2");
html_body.push_str(" class=\"dialog-title\"");
html_body.push_str(">");
html_body.push_str("Switch Template?");
html_body.push_str("</h2>");
html_body.push_str("</header>");
html_body.push_str("<div");
html_body.push_str(" class=\"dialog-body\"");
html_body.push_str(">");
html_body.push_str("<p");
html_body.push_str(">");
html_body.push_str("This will overwrite your current code.");
html_body.push_str("</p>");
html_body.push_str("<p");
html_body.push_str(" id=\"version-warning\"");
html_body.push_str(" class=\"hidden text-warning\"");
html_body.push_str(">");
html_body.push_str("You have a saved version of this template. Which one would you like to load?");
html_body.push_str("</p>");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" class=\"dialog-footer\"");
html_body.push_str(">");
html_body.push_str("<button");
html_body.push_str(" value=\"cancel\"");
html_body.push_str(" formnovalidate=\"true\"");
html_body.push_str(" type=\"button\"");
html_body.push_str(" class=\"playground-btn\"");
html_body.push_str(" onclick=\"document.getElementById('confirm-dialog').close()\"");
html_body.push_str(">");
html_body.push_str("Cancel");
html_body.push_str("</button>");
html_body.push_str("<div");
html_body.push_str(" class=\"dialog-actions\"");
html_body.push_str(">");
html_body.push_str("<button");
html_body.push_str(" id=\"btn-load-saved\"");
html_body.push_str(" value=\"saved\"");
html_body.push_str(" class=\"playground-btn playground-btn-secondary hidden\"");
html_body.push_str(">");
html_body.push_str("Load Saved");
html_body.push_str("</button>");
html_body.push_str("<button");
html_body.push_str(" value=\"confirm\"");
html_body.push_str(" class=\"playground-btn playground-btn-primary\"");
html_body.push_str(">");
html_body.push_str("Load Original");
html_body.push_str("</button>");
html_body.push_str("</div>");
html_body.push_str("</div>");
html_body.push_str("</form>");
html_body.push_str("</dialog>");
html_body.push_str("<!-- Resource Dialog -->");
html_body.push_str("<dialog");
html_body.push_str(" id=\"resource-dialog\"");
html_body.push_str(" class=\"playground-dialog\"");
html_body.push_str(">");
html_body.push_str("<form");
html_body.push_str(" method=\"dialog\"");
html_body.push_str(">");
html_body.push_str("<header");
html_body.push_str(" class=\"dialog-header\"");
html_body.push_str(">");
html_body.push_str("<h2");
html_body.push_str(" class=\"dialog-title\"");
html_body.push_str(" id=\"resource-dialog-title\"");
html_body.push_str(">");
html_body.push_str("Add Resource");
html_body.push_str("</h2>");
html_body.push_str("</header>");
html_body.push_str("<div");
html_body.push_str(" class=\"dialog-body\"");
html_body.push_str(">");
html_body.push_str("<label");
html_body.push_str(" class=\"sidebar-label\"");
html_body.push_str(" style=\"margin-bottom: 0.5rem; display: block;\"");
html_body.push_str(">");
html_body.push_str("Resource URL");
html_body.push_str("</label>");
html_body.push_str("<input");
html_body.push_str(" type=\"url\"");
html_body.push_str(" id=\"resource-input\"");
html_body.push_str(" class=\"dialog-input\"");
html_body.push_str(" placeholder=\"https://...\"");
html_body.push_str(" required=\"true\"");
html_body.push_str(">");
html_body.push_str("</input>");
html_body.push_str("<p");
html_body.push_str(" class=\"text-sm text-muted\"");
html_body.push_str(">");
html_body.push_str("Supports CDN links (jsdelivr, unpkg, etc.)");
html_body.push_str("</p>");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" class=\"dialog-footer\"");
html_body.push_str(">");
html_body.push_str("<button");
html_body.push_str(" value=\"cancel\"");
html_body.push_str(" formnovalidate=\"true\"");
html_body.push_str(" type=\"button\"");
html_body.push_str(" class=\"playground-btn\"");
html_body.push_str(" onclick=\"document.getElementById('resource-dialog').close()\"");
html_body.push_str(">");
html_body.push_str("Cancel");
html_body.push_str("</button>");
html_body.push_str("<button");
html_body.push_str(" id=\"btn-add-resource\"");
html_body.push_str(" value=\"add\"");
html_body.push_str(" class=\"playground-btn playground-btn-primary\"");
html_body.push_str(">");
html_body.push_str("Add Resource");
html_body.push_str("</button>");
html_body.push_str("</div>");
html_body.push_str("</form>");
html_body.push_str("</dialog>");
html_body.push_str("<!-- New File Dialog -->");
html_body.push_str("<dialog");
html_body.push_str(" id=\"new-file-dialog\"");
html_body.push_str(" class=\"playground-dialog\"");
html_body.push_str(">");
html_body.push_str("<form");
html_body.push_str(" method=\"dialog\"");
html_body.push_str(">");
html_body.push_str("<header");
html_body.push_str(" class=\"dialog-header\"");
html_body.push_str(">");
html_body.push_str("<h2");
html_body.push_str(" class=\"dialog-title\"");
html_body.push_str(">");
html_body.push_str("New File");
html_body.push_str("</h2>");
html_body.push_str("</header>");
html_body.push_str("<div");
html_body.push_str(" class=\"dialog-body\"");
html_body.push_str(">");
html_body.push_str("<label");
html_body.push_str(" class=\"sidebar-label\"");
html_body.push_str(" style=\"margin-bottom: 0.5rem; display: block;\"");
html_body.push_str(">");
html_body.push_str("Filename");
html_body.push_str("</label>");
html_body.push_str("<input");
html_body.push_str(" type=\"text\"");
html_body.push_str(" id=\"new-filename\"");
html_body.push_str(" class=\"dialog-input\"");
html_body.push_str(" placeholder=\"component.ncl\"");
html_body.push_str(" required=\"true\"");
html_body.push_str(" pattern=\"^[a-zA-Z0-9._-]+$\"");
html_body.push_str(">");
html_body.push_str("</input>");
html_body.push_str("<p");
html_body.push_str(" class=\"text-sm text-muted\"");
html_body.push_str(">");
html_body.push_str("Supported: .ncl, .css, .js");
html_body.push_str("</p>");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" class=\"dialog-footer\"");
html_body.push_str(">");
html_body.push_str("<button");
html_body.push_str(" value=\"cancel\"");
html_body.push_str(" formnovalidate=\"true\"");
html_body.push_str(" type=\"button\"");
html_body.push_str(" class=\"playground-btn\"");
html_body.push_str(" onclick=\"document.getElementById('new-file-dialog').close()\"");
html_body.push_str(">");
html_body.push_str("Cancel");
html_body.push_str("</button>");
html_body.push_str("<button");
html_body.push_str(" id=\"btn-create-file\"");
html_body.push_str(" type=\"button\"");
html_body.push_str(" class=\"playground-btn playground-btn-primary\"");
html_body.push_str(">");
html_body.push_str("Create");
html_body.push_str("</button>");
html_body.push_str("</div>");
html_body.push_str("</form>");
html_body.push_str("</dialog>");
html_body.push_str("<!-- Monaco Editor CDN (loaded async) -->");
html_body.push_str("<script");
html_body.push_str(" src=\"https://cdn.jsdelivr.net/npm/monaco-editor@0.45.0/min/vs/loader.js\"");
html_body.push_str(">");
html_body.push_str("");
html_body.push_str("</script>");
html_body.push_str("<script");
html_body.push_str(" src=\"/assets/playground.js?v=55\"");
html_body.push_str(">");
html_body.push_str("");
html_body.push_str("</script>");
html_body.push_str("</n:layout>");
html_body.push_str("<!-- Nucleus Client-Side Router for SPA-like navigation -->");
html_body.push_str("<script");
html_body.push_str(" src=\"/assets/router.js?v=4\"");
html_body.push_str(" defer=\"true\"");
html_body.push_str(">");
html_body.push_str("");
html_body.push_str("</script>");
html_body.push_str("<!-- Docs Script -->");
html_body.push_str("<script");
html_body.push_str(" src=\"/assets/docs.js?v=9\"");
html_body.push_str(" defer=\"true\"");
html_body.push_str(">");
html_body.push_str("");
html_body.push_str("</script>");
html_body.push_str("</body>");
html_body.push_str("</html>");

    axum::response::Html(html_body).into_response()
}

#[allow(non_snake_case, unreachable_code, unused_variables)]
async fn handle_docs(headers: axum::http::HeaderMap, Query(params): Query<std::collections::HashMap<String, String>>) -> impl axum::response::IntoResponse {
    let mut html_body = String::new();
html_body.push_str("<!DOCTYPE html>");
html_body.push_str("<html");
html_body.push_str(" lang=\"en\"");
html_body.push_str(">");
html_body.push_str("<head");
html_body.push_str(">");
html_body.push_str("<meta");
html_body.push_str(" charset=\"UTF-8\"");
html_body.push_str(">");
html_body.push_str("</meta>");
html_body.push_str("<meta");
html_body.push_str(" name=\"viewport\"");
html_body.push_str(" content=\"width=device-width, initial-scale=1.0\"");
html_body.push_str(">");
html_body.push_str("</meta>");
html_body.push_str("<title");
html_body.push_str(">");
html_body.push_str("Nucleus | The Hyper-Optimized Framework");
html_body.push_str("</title>");
html_body.push_str("<meta");
html_body.push_str(" name=\"description\"");
html_body.push_str(" content=\"Build high-performance full-stack apps with Rust. Zero-compromise speed, developer experience, and safety.\"");
html_body.push_str(">");
html_body.push_str("</meta>");
html_body.push_str("<!-- DNS Prefetch & Preconnect for External Resources -->");
html_body.push_str("<link");
html_body.push_str(" rel=\"dns-prefetch\"");
html_body.push_str(" href=\"//fonts.googleapis.com\"");
html_body.push_str(">");
html_body.push_str("</link>");
html_body.push_str("<link");
html_body.push_str(" rel=\"dns-prefetch\"");
html_body.push_str(" href=\"//fonts.gstatic.com\"");
html_body.push_str(">");
html_body.push_str("</link>");
html_body.push_str("<link");
html_body.push_str(" rel=\"preconnect\"");
html_body.push_str(" href=\"https://fonts.googleapis.com\"");
html_body.push_str(">");
html_body.push_str("</link>");
html_body.push_str("<link");
html_body.push_str(" rel=\"preconnect\"");
html_body.push_str(" href=\"https://fonts.gstatic.com\"");
html_body.push_str(" crossorigin=\"true\"");
html_body.push_str(">");
html_body.push_str("</link>");
html_body.push_str("<!-- Favicon -->");
html_body.push_str("<link");
html_body.push_str(" rel=\"icon\"");
html_body.push_str(" href=\"data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>‚ö°</text></svg>\"");
html_body.push_str(">");
html_body.push_str("</link>");
html_body.push_str("<!-- Critical CSS (inlined for render performance) -->");
html_body.push_str("<style");
html_body.push_str(" critical=\"true\"");
html_body.push_str(">");
html_body.push_str("\n        /* Critical above-the-fold styles */\n        body { margin: 0; background: #000; color: #ededed; font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif; }\n        .nav { position: fixed; top: 0; left: 0; right: 0; z-index: 100; padding: 16px 0; background: rgba(0,0,0,0.8); backdrop-filter: blur(20px); }\n    ");
html_body.push_str("</style>");
html_body.push_str("<!-- Main Stylesheet (non-blocking with media swap) -->");
html_body.push_str("<link");
html_body.push_str(" href=\"/assets/output.css\"");
html_body.push_str(" rel=\"stylesheet\"");
html_body.push_str(">");
html_body.push_str("</link>");
html_body.push_str("<!-- Accessibility Styles (WCAG 2.1 AA) -->");
html_body.push_str("<link");
html_body.push_str(" href=\"/assets/accessibility.css\"");
html_body.push_str(" rel=\"stylesheet\"");
html_body.push_str(">");
html_body.push_str("</link>");
html_body.push_str("<!-- Highlight.js for syntax highlighting (Local) -->");
html_body.push_str("<link");
html_body.push_str(" rel=\"stylesheet\"");
html_body.push_str(" href=\"/assets/highlight.css?v=4\"");
html_body.push_str(">");
html_body.push_str("</link>");
html_body.push_str("<script");
html_body.push_str(" src=\"/assets/highlight.min.js?v=4\"");
html_body.push_str(">");
html_body.push_str("");
html_body.push_str("</script>");
html_body.push_str("<!-- Google Fonts with font-display: swap (non-render-blocking) -->");
html_body.push_str("<link");
html_body.push_str(" href=\"https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap\"");
html_body.push_str(" rel=\"stylesheet\"");
html_body.push_str(" media=\"print\"");
html_body.push_str(" onload=\"this.media='all'\"");
html_body.push_str(">");
html_body.push_str("</link>");
html_body.push_str("<noscript");
html_body.push_str(">");
html_body.push_str("<link");
html_body.push_str(" href=\"https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap\"");
html_body.push_str(" rel=\"stylesheet\"");
html_body.push_str(">");
html_body.push_str("</link>");
html_body.push_str("</noscript>");
html_body.push_str("<link");
html_body.push_str(" rel=\"preconnect\"");
html_body.push_str(" href=\"https://fonts.googleapis.com\"");
html_body.push_str(">");
html_body.push_str("</link>");
html_body.push_str("<link");
html_body.push_str(" rel=\"preconnect\"");
html_body.push_str(" href=\"https://fonts.gstatic.com\"");
html_body.push_str(">");
html_body.push_str("</link>");
html_body.push_str("</head>");
html_body.push_str("<body");
html_body.push_str(">");
html_body.push_str("<!-- Skip Link for Keyboard Navigation (WCAG 2.4.1) -->");
html_body.push_str("<a");
html_body.push_str(" href=\"#main-content\"");
html_body.push_str(" class=\"skip-link\"");
html_body.push_str(">");
html_body.push_str("Skip to main content");
html_body.push_str("</a>");
html_body.push_str("<!-- Screen Reader Announcements (WCAG 4.1.3) -->");
html_body.push_str("<div");
html_body.push_str(" id=\"a11y-announcer\"");
html_body.push_str(" class=\"sr-only\"");
html_body.push_str(" aria-live=\"polite\"");
html_body.push_str(" aria-atomic=\"true\"");
html_body.push_str(">");
html_body.push_str("</div>");
html_body.push_str("<n:layout");
html_body.push_str(" name=\"layout\"");
html_body.push_str(">");
html_body.push_str("<!-- Enhanced Navigation for Docs -->");
html_body.push_str("<nav");
html_body.push_str(" class=\"docs-nav-bar\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" class=\"docs-nav-container\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" class=\"docs-nav-left\"");
html_body.push_str(">");
html_body.push_str("<a href=\"/\" data-nucleus-link=\"true\">");
html_body.push_str("<span");
html_body.push_str(" class=\"logo-icon\"");
html_body.push_str(">");
html_body.push_str("‚ö°");
html_body.push_str("</span>");
html_body.push_str("<span");
html_body.push_str(" class=\"logo-text\"");
html_body.push_str(">");
html_body.push_str("Nucleus");
html_body.push_str("</span>");
html_body.push_str("</a>");
html_body.push_str("<span");
html_body.push_str(" class=\"docs-nav-separator\"");
html_body.push_str(">");
html_body.push_str("/");
html_body.push_str("</span>");
html_body.push_str("<span");
html_body.push_str(" class=\"docs-nav-section-label\"");
html_body.push_str(">");
html_body.push_str("Documentation");
html_body.push_str("</span>");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" class=\"docs-nav-right\"");
html_body.push_str(">");
html_body.push_str("<a href=\"/\" data-nucleus-link=\"true\">");
html_body.push_str("Home");
html_body.push_str("</a>");
html_body.push_str("<a href=\"/#features\" data-nucleus-link=\"true\">");
html_body.push_str("Features");
html_body.push_str("</a>");
html_body.push_str("<a href=\"/#benchmarks\" data-nucleus-link=\"true\">");
html_body.push_str("Benchmarks");
html_body.push_str("</a>");
html_body.push_str("<a href=\"/playground\" data-nucleus-link=\"true\">");
html_body.push_str("Playground");
html_body.push_str("</a>");
html_body.push_str("<a");
html_body.push_str(" href=\"https://github.com/nucleus-fire/nucleus-fire\"");
html_body.push_str(" target=\"_blank\"");
html_body.push_str(" class=\"docs-nav-item docs-nav-github\"");
html_body.push_str(">");
html_body.push_str("<svg");
html_body.push_str(" width=\"18\"");
html_body.push_str(" height=\"18\"");
html_body.push_str(" fill=\"currentColor\"");
html_body.push_str(" viewBox=\"0 0 24 24\"");
html_body.push_str(">");
html_body.push_str("<path");
html_body.push_str(" d=\"M12 0C5.374 0 0 5.373 0 12c0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23A11.509 11.509 0 0112 5.803c1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576C20.566 21.797 24 17.3 24 12c0-6.627-5.373-12-12-12z\"");
html_body.push_str(">");
html_body.push_str("</path>");
html_body.push_str("</svg>");
html_body.push_str("<span");
html_body.push_str(">");
html_body.push_str("GitHub");
html_body.push_str("</span>");
html_body.push_str("</a>");
html_body.push_str("</div>");
html_body.push_str("</div>");
html_body.push_str("</nav>");
html_body.push_str("<!-- External CSS for docs -->");
html_body.push_str("<link");
html_body.push_str(" href=\"/assets/docs.css?v=8\"");
html_body.push_str(" rel=\"stylesheet\"");
html_body.push_str(">");
html_body.push_str("</link>");
html_body.push_str("<div");
html_body.push_str(" class=\"docs-layout\"");
html_body.push_str(">");
html_body.push_str("<!-- Sidebar -->");
html_body.push_str("<aside");
html_body.push_str(" class=\"docs-sidebar\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" class=\"docs-search\"");
html_body.push_str(">");
html_body.push_str("<input");
html_body.push_str(" type=\"text\"");
html_body.push_str(" id=\"doc-search\"");
html_body.push_str(" placeholder=\"Search docs...\"");
html_body.push_str(" class=\"docs-search-input\"");
html_body.push_str(">");
html_body.push_str("</input>");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" class=\"docs-nav\"");
html_body.push_str(" id=\"docs-nav\"");
html_body.push_str(">");
html_body.push_str("<!-- Navigation will be populated dynamically from manifest -->");
html_body.push_str("<div");
html_body.push_str(" class=\"docs-nav-section\"");
html_body.push_str(">");
html_body.push_str("<h4");
html_body.push_str(" class=\"docs-nav-title\"");
html_body.push_str(">");
html_body.push_str("Loading...");
html_body.push_str("</h4>");
html_body.push_str("</div>");
html_body.push_str("</div>");
html_body.push_str("</aside>");
html_body.push_str("<!-- Main Content -->");
html_body.push_str("<main");
html_body.push_str(" class=\"docs-content\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" class=\"docs-content-inner\"");
html_body.push_str(">");
html_body.push_str("<!-- Breadcrumbs -->");
html_body.push_str("<div");
html_body.push_str(" id=\"docs-breadcrumbs\"");
html_body.push_str(" class=\"docs-breadcrumbs\"");
html_body.push_str(">");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" id=\"docs-body\"");
html_body.push_str(" class=\"docs-body\"");
html_body.push_str(">");
html_body.push_str("<!-- Landing Page (shown when no doc selected) -->");
html_body.push_str("<section");
html_body.push_str(" class=\"docs-landing\"");
html_body.push_str(" id=\"docs-landing\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" class=\"docs-hero-modern\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" class=\"docs-hero-content\"");
html_body.push_str(">");
html_body.push_str("<span");
html_body.push_str(" class=\"hero-badge\"");
html_body.push_str(">");
html_body.push_str("Nucleus v3.5");
html_body.push_str("</span>");
html_body.push_str("<h1");
html_body.push_str(">");
html_body.push_str("Build faster, scale better.");
html_body.push_str("</h1>");
html_body.push_str("<p");
html_body.push_str(">");
html_body.push_str("The high-performance framework for modern web applications. Zero-compromise speed, Developer Experience, and Type Safety.");
html_body.push_str("</p>");
html_body.push_str("<div");
html_body.push_str(" class=\"hero-actions\"");
html_body.push_str(">");
html_body.push_str("<a");
html_body.push_str(" href=\"#24_quick_start_tutorial\"");
html_body.push_str(" class=\"btn-docs-primary\"");
html_body.push_str(" onclick=\"loadDoc('24_quick_start_tutorial'); return false;\"");
html_body.push_str(">");
html_body.push_str("Get Started ‚Üí");
html_body.push_str("</a>");
html_body.push_str("<a");
html_body.push_str(" href=\"#02_core_concepts\"");
html_body.push_str(" class=\"btn-docs-secondary\"");
html_body.push_str(" onclick=\"loadDoc('02_core_concepts'); return false;\"");
html_body.push_str(">");
html_body.push_str("Core Concepts");
html_body.push_str("</a>");
html_body.push_str("</div>");
html_body.push_str("</div>");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" class=\"docs-grid-modern\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" class=\"docs-card\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" class=\"card-icon\"");
html_body.push_str(">");
html_body.push_str("üìö");
html_body.push_str("</div>");
html_body.push_str("<h3");
html_body.push_str(">");
html_body.push_str("Guides");
html_body.push_str("</h3>");
html_body.push_str("<p");
html_body.push_str(">");
html_body.push_str("In-depth guides for every feature, from Database to Auth.");
html_body.push_str("</p>");
html_body.push_str("<a");
html_body.push_str(" href=\"#20_database_guide\"");
html_body.push_str(" class=\"docs-card-link\"");
html_body.push_str(" onclick=\"loadDoc('20_database_guide'); return false;\"");
html_body.push_str(">");
html_body.push_str("Explore Guides ‚Üí");
html_body.push_str("</a>");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" class=\"docs-card\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" class=\"card-icon\"");
html_body.push_str(">");
html_body.push_str("‚ö°");
html_body.push_str("</div>");
html_body.push_str("<h3");
html_body.push_str(">");
html_body.push_str("API Reference");
html_body.push_str("</h3>");
html_body.push_str("<p");
html_body.push_str(">");
html_body.push_str("Detailed references for the Standard Library, CLI, and Configuration.");
html_body.push_str("</p>");
html_body.push_str("<a");
html_body.push_str(" href=\"#04_stdlib_reference\"");
html_body.push_str(" class=\"docs-card-link\"");
html_body.push_str(" onclick=\"loadDoc('04_stdlib_reference'); return false;\"");
html_body.push_str(">");
html_body.push_str("View Reference ‚Üí");
html_body.push_str("</a>");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" class=\"docs-card\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" class=\"card-icon\"");
html_body.push_str(">");
html_body.push_str("üõ†\u{fe0f}");
html_body.push_str("</div>");
html_body.push_str("<h3");
html_body.push_str(">");
html_body.push_str("Tooling");
html_body.push_str("</h3>");
html_body.push_str("<p");
html_body.push_str(">");
html_body.push_str("Master the Console, Studio, Profiler, and AI Assistant.");
html_body.push_str("</p>");
html_body.push_str("<a");
html_body.push_str(" href=\"#51_developer_tools_guide\"");
html_body.push_str(" class=\"docs-card-link\"");
html_body.push_str(" onclick=\"loadDoc('51_developer_tools_guide'); return false;\"");
html_body.push_str(">");
html_body.push_str("Learn Tooling ‚Üí");
html_body.push_str("</a>");
html_body.push_str("</div>");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" class=\"docs-features-list\"");
html_body.push_str(">");
html_body.push_str("<h3");
html_body.push_str(">");
html_body.push_str("Popular Topics");
html_body.push_str("</h3>");
html_body.push_str("<div");
html_body.push_str(" class=\"topic-tags\"");
html_body.push_str(">");
html_body.push_str("<a");
html_body.push_str(" href=\"#21_authentication_guide\"");
html_body.push_str(" onclick=\"loadDoc('21_authentication_guide'); return false;\"");
html_body.push_str(">");
html_body.push_str("Authentication");
html_body.push_str("</a>");
html_body.push_str("<a");
html_body.push_str(" href=\"#30_websocket_guide\"");
html_body.push_str(" onclick=\"loadDoc('30_websocket_guide'); return false;\"");
html_body.push_str(">");
html_body.push_str("WebSockets");
html_body.push_str("</a>");
html_body.push_str("<a");
html_body.push_str(" href=\"#07_forms_and_validation\"");
html_body.push_str(" onclick=\"loadDoc('07_forms_and_validation'); return false;\"");
html_body.push_str(">");
html_body.push_str("Forms");
html_body.push_str("</a>");
html_body.push_str("<a");
html_body.push_str(" href=\"#23_deployment_guide\"");
html_body.push_str(" onclick=\"loadDoc('23_deployment_guide'); return false;\"");
html_body.push_str(">");
html_body.push_str("Deployment");
html_body.push_str("</a>");
html_body.push_str("<a");
html_body.push_str(" href=\"#32_middleware_guide\"");
html_body.push_str(" onclick=\"loadDoc('32_middleware_guide'); return false;\"");
html_body.push_str(">");
html_body.push_str("Middleware");
html_body.push_str("</a>");
html_body.push_str("</div>");
html_body.push_str("</div>");
html_body.push_str("</section>");
html_body.push_str("</div>");
html_body.push_str("<!-- Article Navigation -->");
html_body.push_str("<div");
html_body.push_str(" id=\"docs-article-nav\"");
html_body.push_str(" class=\"docs-article-nav\"");
html_body.push_str(">");
html_body.push_str("</div>");
html_body.push_str("</div>");
html_body.push_str("</main>");
html_body.push_str("<!-- Right Sidebar for TOC -->");
html_body.push_str("<aside");
html_body.push_str(" class=\"docs-toc-sidebar\"");
html_body.push_str(">");
html_body.push_str("<div");
html_body.push_str(" class=\"docs-toc-header\"");
html_body.push_str(">");
html_body.push_str("On this page");
html_body.push_str("</div>");
html_body.push_str("<div");
html_body.push_str(" id=\"docs-toc\"");
html_body.push_str(" class=\"docs-toc\"");
html_body.push_str(">");
html_body.push_str("</div>");
html_body.push_str("</aside>");
html_body.push_str("</div>");
html_body.push_str("<!-- External script: marked.js (docs.js is loaded via layout.ncl) -->");
html_body.push_str("<script");
html_body.push_str(" src=\"https://cdn.jsdelivr.net/npm/marked/marked.min.js\"");
html_body.push_str(">");
html_body.push_str("");
html_body.push_str("</script>");
html_body.push_str("</n:layout>");
html_body.push_str("<!-- Nucleus Client-Side Router for SPA-like navigation -->");
html_body.push_str("<script");
html_body.push_str(" src=\"/assets/router.js?v=4\"");
html_body.push_str(" defer=\"true\"");
html_body.push_str(">");
html_body.push_str("");
html_body.push_str("</script>");
html_body.push_str("<!-- Docs Script -->");
html_body.push_str("<script");
html_body.push_str(" src=\"/assets/docs.js?v=9\"");
html_body.push_str(" defer=\"true\"");
html_body.push_str(">");
html_body.push_str("");
html_body.push_str("</script>");
html_body.push_str("</body>");
html_body.push_str("</html>");

    axum::response::Html(html_body).into_response()
}



        // Middleware Module Support
        

        // Logic Module Support
        

        // Models Module Support
        

        use mimalloc::MiMalloc;
        #[global_allocator]
        static GLOBAL: MiMalloc = MiMalloc;

        pub async fn app() -> Router {
            // Load Configuration
            let config = nucleus_std::config::Config::load();
            
            // Initialize Database
            // Only init if URL is set (simple check)
            if !config.database.url.is_empty() {
                 match nucleus_std::photon::init_db(&config.database.url).await {
                     Ok(_) => {
                         println!("‚úÖ Database initialized on {}", config.database.url);
                         // Auto-run migrations
                         match nucleus_std::photon::run_migrations("migrations").await {
                             Ok(applied) => {
                                 if !applied.is_empty() {
                                     println!("‚úÖ Applied {} migration(s)", applied.len());
                                 }
                             }
                             Err(e) => eprintln!("‚ö†Ô∏è Migration error: {}", e),
                         }
                     }
                     Err(e) => eprintln!("‚ùå Database initialization failed: {}", e),
                 }
            }

            // Static Router with Zero-Allocation Assets
            let app = Router::new()
                .route("/", get(handle_index).post(handle_action_index)).route("/index", get(handle_index).post(handle_action_index)).route("/admin", get(handle_admin).post(handle_action_admin)).route("/clean_layout", get(handle_clean_layout)).route("/components", get(handle_components)).route("/playground", get(handle_playground)).route("/docs", get(handle_docs))
                .nest_service("/pkg", ServeDir::new("static/pkg"))
                .nest_service("/assets", ServeDir::new("static/assets"))
                .nest_service("/static", ServeDir::new("static"))
                .nest_service("/docs/raw", ServeDir::new("../../docs/en"))
                .route_service("/docs/manifest.json", tower_http::services::ServeFile::new("static/docs/manifest.json"))
                .layer(tower_http::set_header::SetResponseHeaderLayer::if_not_present(
                    axum::http::header::CACHE_CONTROL,
                    axum::http::HeaderValue::from_static("public, max-age=31536000, immutable"),
                ))
                .layer(CompressionLayer::new().br(true).gzip(true))
                ;
                
            // Auto-Inject Middleware if `src/middleware.rs` exists
            let app = app;
            

            app
        }
        